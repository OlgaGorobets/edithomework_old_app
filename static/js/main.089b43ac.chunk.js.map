{"version":3,"sources":["actions/index.js","helper/index.js","reducers/index.js","components/UserModal.js","components/UserBlock.js","components/PdfView.js","components/FileUploader.js","components/PdfBlock.js","components/PageView.js","components/PageBlock.js","components/Blocks.js","components/ImagesPaginator.js","components/EditablePageView.js","components/EditablePage.js","App.js","index.js"],"names":["CHANGE_ACTIVE_PDF","CHANGE_TEXT_VALUE","REMOVE_TEXT_VALUE","ADD_NEW_TEXT_VALUE","REMOVE_MESSAGE","ADD_NEW_MESSAGE","ADD_FIRST_MESSAGE","REMOVE_PAGE","ADD_NEW_PAGE","SIGN_FORM","SIGN_OUT_FORM","SIGN_FORM_AND_ADD_NEW_PAGE","ADD_PDF","REMOVE_PDF","CHANGE_PDF_DATE","CHANGE_PAGE_DATE","changeTextValue","data","type","id","text","max_width","x","y","status","removePage","signForm","userData","name","login","pass","addPdf","path","images","user_id","changePdfDate","changePageDate","hasSomeParentTheClass","element","classname","className","split","indexOf","parentNode","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","h","getHours","m","getMinutes","length","initialState","current_user","users","pdfs","load_date","last_edit_date","texts","page_id","image_index","messages","text_id","active_pdf_index","pages","pdf_id","UserModal","customFieldsValue","customFieldsError","requiredFields","addPage","signIn","useState","show","setShow","fieldsValue","setFieldsValue","fieldsErrors","setFieldsErrors","handleClose","handleFieldValueChange","e","target","getAttribute","value","console","log","sureRemove","sureRemovePdf","Card","Body","Title","Text","Form","Control","placeholder","onChange","Alert","variant","Button","size","onClick","button","icon","title","Modal","onHide","animation","Header","closeButton","Footer","buttons","map","but","index","key","res","errors","isError","trim","validateFields","func","UserBlock","connect","state","dispatch","signModalObj","signUp","fieldsData","usersData","filter","us","ListGroup","Item","PdfView","pdf","signModalRemoveObj","is_active","preventDefault","faChevronRight","user","ButtonGroup","FileUploader","file","setFile","loader","setLoader","modal","setModal","fileUp","formData","FormData","append","post","headers","onSubmit","then","response","result","error","JSON","parse","Spinner","aria-describedby","files","catch","htmlFor","style","PdfBlock","faPlus","pdfItem","pdfUsers","PageView","page","to","faEdit","PageBlock","activePdfId","activePages","item","addPageObj","pageUsers","activePage","Blocks","Col","ImagesPaginator","activeIndex","items","onPageChange","pageId","setActivePage","activeItem","setActiveItem","activeImages","setActiveImages","setPage","parseInt","aPage","activeInd","window","location","hash","selected","img","useEffect","pageNum","replace","isNaN","faChevronUp","src","faChevronDown","EditablePageView","newTextId","customFieldState","customButtonsVisibility","customButtonsStatus","canvasRef","useRef","imageTexts","setImageTexts","activeMessages","setActiveMessages","activeMessageText","setActiveMessageText","imageIndex","setImageIndex","fieldData","setFieldData","buttonsVisibility","setButtonsVisibility","buttonsStatus","setButtonsStatus","setMovingMode","handleActiveMessagesRemove","msg","renderImage","setTextsVisibility","imageTextId","visibility","txt","handleAddNewMessage","left","top","msgText","addNewMessage","getTexts","ctx","current","getContext","image","Image","Promise","resolve","onload","height","width","canvas","clearRect","drawImage","activeTxt","undefined","forEach","Container","Row","pageData","ref","remove","ok","warning","rect","getBoundingClientRect","clientX","clientY","imageTextStatus","stopPropagation","currentTarget","offsetLeft","offsetTop","imageTextClick","faEnvelope","disabled","offsetWidth","rows","faTrashAlt","faExclamation","faCheck","message","mUsers","mUser","EditablePage","history","useParams","activePdfs","activePdf","activeTexts","withRouter","exact","component","store","createStore","newTexts","newMessages","newText","newMessage","newPages","newPage","cUserId","newUsers","fUsers","action","pg","newTextsIds","newPdf","newPdfs","pd","render","document","getElementById"],"mappings":"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","file":"static/js/main.089b43ac.chunk.js","sourcesContent":["export const CHANGE_ACTIVE_PDF = 'CHANGE_ACTIVE_PDF';\r\nexport const CHANGE_TEXT_VALUE = 'CHANGE_TEXT_VALUE';\r\nexport const REMOVE_TEXT_VALUE = 'REMOVE_TEXT_VALUE';\r\nexport const ADD_NEW_TEXT_VALUE = 'ADD_NEW_TEXT_VALUE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\nexport const ADD_FIRST_MESSAGE = 'ADD_FIRST_MESSAGE';\r\nexport const REMOVE_PAGE = 'REMOVE_PAGE';\r\nexport const ADD_NEW_PAGE = 'ADD_NEW_PAGE';\r\nexport const SIGN_FORM = 'SIGN_FORM';\r\nexport const SIGN_OUT_FORM = 'SIGN_OUT_FORM';\r\nexport const SIGN_FORM_AND_ADD_NEW_PAGE = 'SIGN_FORM_AND_ADD_NEW_PAGE';\r\nexport const ADD_PDF = 'ADD_PDF';\r\nexport const REMOVE_PDF = 'REMOVE_PDF';\r\nexport const CHANGE_PDF_DATE = 'CHANGE_PDF_DATE';\r\nexport const CHANGE_PAGE_DATE = 'CHANGE_PAGE_DATE';\r\n\r\nexport function changeActivePdf(index) {\r\n\treturn {\r\n\t\ttype: CHANGE_ACTIVE_PDF,\r\n\t\tindex: index\r\n\t};\r\n}\r\nexport function changeTextValue(data) {\r\n\treturn {\r\n\t\ttype: CHANGE_TEXT_VALUE,\r\n\t\tid: data.id,\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tstatus: data.status\r\n\t};\r\n}\r\nexport function addNewTextValue(data) {\r\n\treturn {\r\n\t\ttype: ADD_NEW_TEXT_VALUE,\t\t\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\r\n\t};\r\n}\r\nexport function addFirstMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_FIRST_MESSAGE,\r\n\t\tuser_id: data.user_id,\t\t\r\n\t\tmsgText: data.msgText,\r\n\t\tdate: data.date,\r\n\t\t\r\n\t\ttext: data.text,\t\t\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\t\t\r\n\t};\r\n}\r\nexport function addNewMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_MESSAGE,\r\n\t\tuser_id: data.user_id,\r\n\t\ttext_id: data.text_id,\r\n\t\ttext: data.text,\r\n\t\tdate: data.date\r\n\t};\r\n}\r\nexport function addNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\r\n\t\tuser_id: data.user_id\t\r\n\t};\r\n}\r\nexport function removeTextValue(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_TEXT_VALUE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removeMessage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_MESSAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removePage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_PAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function signForm(userData) {\r\n\treturn {\r\n\t\ttype: SIGN_FORM,\r\n\t\tname: userData.login,\r\n\t\tpass: userData.pass\r\n\t};\r\n}\r\nexport function signOutForm() {\r\n\treturn {\r\n\t\ttype: SIGN_OUT_FORM\r\n\t};\r\n}\r\nexport function signFormAndAddNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FORM_AND_ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\t\t\r\n\t\t\r\n\t\tlogin: data.login,\r\n\t\tpass: data.pass\r\n\t};\r\n}\r\nexport function addPdf(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_PDF,\r\n\t\tpath: data.path,\r\n\t\timages: data.images,\r\n\t\tuser_id: data.user_id\r\n\t};\r\n}\r\nexport function removePdf(id) {\t\r\n\treturn {\r\n\t\ttype: REMOVE_PDF,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePdfDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PDF_DATE,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePageDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PAGE_DATE,\r\n\t\tid: id\r\n\t};\r\n}","export function hasSomeParentTheClass(element, classname) {\r\n    if (element.className && element.className.split && element.className.split(' ').indexOf(classname)>=0) return true;\r\n    return element.parentNode && hasSomeParentTheClass(element.parentNode, classname);\r\n}\r\nexport function formatDate(date) {\r\n\tconst monthNames = [\"Jan\", \"Feb\", \"March\", \"Apr\", \"May\", \"June\",\r\n\t  \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\r\n\t];\r\n\t\r\n    let d = date ? new Date(date) : new Date(),\r\n        month = '' + monthNames[d.getMonth()],\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear(),\r\n\t\th = d.getHours(),\r\n\t\tm = d.getMinutes();\r\n\r\n    if (month.length < 2) \r\n        month = '0' + month;\r\n    if (day.length < 2) \r\n        day = '0' + day;\r\n\r\n    return day + \" \" + month + \",\" + year + \" \" + h + \":\" + m;\r\n}","//import { ADD_TODO } from '../actions';\r\nimport { CHANGE_ACTIVE_PDF } from '../actions';\r\nimport { CHANGE_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_TEXT_VALUE } from '../actions';\r\nimport { ADD_NEW_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_MESSAGE } from '../actions';\r\nimport { ADD_NEW_MESSAGE } from '../actions';\r\nimport { ADD_FIRST_MESSAGE } from '../actions';\r\nimport { REMOVE_PAGE } from '../actions';\r\nimport { ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM_AND_ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM } from '../actions';\r\nimport { SIGN_OUT_FORM } from '../actions';\r\nimport { ADD_PDF } from '../actions';\r\nimport { REMOVE_PDF } from '../actions';\r\nimport { CHANGE_PDF_DATE } from '../actions';\r\nimport { CHANGE_PAGE_DATE } from '../actions';\r\n\r\nimport { formatDate } from '../helper';\r\n\r\nconst initialState = {\r\n  //toDoList: [],\r\n  \r\n\tcurrent_user: {\r\n\t\tid: 0\r\n\t},\r\n\tusers: [{\r\n\t\tid: 0,\r\n\t\tname: \"Olka\",\r\n\t\tpass: \"123\"\r\n\t},\r\n\t{\r\n\t\tid: 1,\r\n\t\tname: \"Barabolka\",\r\n\t\tpass: \"123\"\r\n\t}],\r\n\tpdfs: [{\r\n\t\tpath: \"some path1\",\r\n\t\tid: 0,\r\n\t\tuser_id: 0,\r\n\t\tload_date: \"\",\r\n\t\tlast_edit_date: \"\",\r\n\t\timages: [\"/uploads/photos/photo_pdf билета.png\", \"../photos/2.jpg\", \"../photos/3.jpg\", \"../photos/4.jpg\", \"../photos/5.jpg\", \"../photos/6.jpg\", \"../photos7.jpg\", \"../photos/8.jpg\"]\r\n\t},{\r\n\t\tpath: \"some path2\",\r\n\t\tid: 1,\r\n\t\tuser_id: 0,\r\n\t\tload_date: \"\",\r\n\t\tlast_edit_date: \"\",\t\t\r\n\t\timages: [\"../photos/2.jpg\"]\r\n\t}],\r\n\ttexts: [{\r\n\t\ttext: \"testing text1\",\r\n\t\tx: 0,\r\n\t\ty:0,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 0,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: \"ok\" //\"ok\", \"warning\"\r\n\t},\r\n\t{\r\n\t\ttext: \"testing text2\",\r\n\t\tx: 100,\r\n\t\ty:100,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 1,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: null\r\n\t}\t\r\n\t],\r\n\tmessages: [{\r\n\t\tid: 0,\r\n\t\tuser_id: null,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message1\",\r\n\t\tdate: \"date1\"\r\n\t},\r\n\t{\r\n\t\tid: 1,\r\n\t\tuser_id: 0,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message2\",\r\n\t\tdate: \"date2\"\r\n\t}],\r\n\tactive_pdf_index: 0,\r\n\tpages: [{\r\n\t\tname: \"page 1\",\r\n\t\tid: 0,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t},{\r\n\t\tname: \"page 2\",\r\n\t\tid: 1,\r\n\t\tpdf_id: 1,\r\n\t\tuser_id: 0\r\n\t},{\r\n\t\tname: \"page 3\",\r\n\t\tid: 2,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t}]  \r\n};\r\n\r\nexport default function toDoApp(state = initialState, action) {\r\n\tlet newTexts, newMessages, \r\n\t\tid, newText, newMessage, \r\n\t\tnewPages, newPage, cUserId,\r\n\t\tnewUsers, fUsers, pageId;\r\n\t\r\n\tswitch (action.type) {\r\n\tcase CHANGE_ACTIVE_PDF:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tactive_pdf_index: action.index\r\n\t\t}\r\n\tcase CHANGE_TEXT_VALUE: \t\t\r\n\t\tnewTexts = state.texts.map((txt)=>{\t\t\t\r\n\t\t\tif(txt.id == action.id){\r\n\t\t\t\ttxt.text = action.text;\r\n\t\t\t\ttxt.max_width = action.max_width;\t\r\n\t\t\t\ttxt.x = action.x;\t\r\n\t\t\t\ttxt.y = action.y;\r\n\t\t\t\ttxt.status = action.status;\r\n\t\t\t\ttxt.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn txt;\r\n\t\t});\r\n\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts\r\n\t\t}\r\n\tcase ADD_NEW_TEXT_VALUE: \t\t\t\r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText]\r\n\t\t}\t\r\n\tcase ADD_NEW_MESSAGE: \r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\t\t\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.text_id,\r\n\t\t\ttext: action.text,\r\n\t\t\tdate: action.date\t\t\t\t\r\n\t\t};\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\r\n\tcase ADD_FIRST_MESSAGE: \r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null\r\n\t\t};\t\r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.id,\r\n\t\t\ttext: action.msgText,\r\n\t\t\tdate: action.date\t\t\t\r\n\t\t};\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText],\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\t\r\n\tcase ADD_NEW_PAGE:\r\n\t\tid = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: id,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]\r\n\t\t}\t\t\t\r\n\tcase REMOVE_TEXT_VALUE: \t\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.id !== action.id;\t\r\n\t\t});\t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.text_id !== action.id;\t\r\n\t\t});\t\t\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_MESSAGE: \t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.id !== action.id;\t\r\n\t\t});\t\t\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_PAGE: \t\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.id !== action.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id !== action.id;\t\r\n\t\t});\t\r\n\t\tlet oldTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id == action.id;\t\r\n\t\t});\t\r\n\t\tlet newTextsIds = oldTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: newPages,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase SIGN_FORM:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.name && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\r\n\tcase SIGN_OUT_FORM:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: null\r\n\t\t\t}\r\n\t\t}\r\n\tcase SIGN_FORM_AND_ADD_NEW_PAGE:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.login && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.login,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\t\r\n\t\tpageId = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: pageId,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: cUserId,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t],\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\t\t\t\r\n\t\t}\r\n\tcase ADD_PDF:\r\n\t\tid = state.pdfs.length > 0 ? state.pdfs[state.pdfs.length-1].id + 1 : 0;\r\n\t\tlet newPdf = {\r\n\t\t\tid: id,\r\n\t\t\tpath: action.path,\r\n\t\t\timages: action.images,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\t\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]\t\t\t\r\n\t\t}\r\n\tcase REMOVE_PDF:\r\n\t\tnewPages = state.pages.map((pg)=>{\t\t\t\r\n\t\t\tif(pg.id == action.id){\r\n\t\t\t\tpg.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pg;\r\n\t\t});\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\r\n\tcase CHANGE_PDF_DATE:\r\n\t\tconsole.log(action.id, \"pdf action\");\r\n\t\tlet newPdfs = state.pdfs.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...newPdfs]\r\n\t\t}\r\n\tcase CHANGE_PAGE_DATE:\r\n\t\tconsole.log(action.id, \"page action\");\r\n\t\tnewPages = state.pages.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\t\r\n    default:\r\n      return state;\r\n  }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Card from 'react-bootstrap/Card';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst UserModal = (data) => {\t\t\r\n\tlet customFieldsValue = {\r\n\t\tlogin: \"\",\r\n\t\tpass: \"\",\r\n\t\tname: \"\"\r\n\t};\r\n\tlet customFieldsError = {\r\n\t\tlogin: false,\r\n\t\tpass: false,\r\n\t\tname: false\r\n\t};\t\r\n\tlet requiredFields = {\r\n\t\tname: data.addPage,\r\n\t\tlogin: data.signIn,\r\n\t\tpass: data.signIn,\r\n\t\t\r\n\t}\r\n\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [fieldsValue, setFieldsValue] = useState({...customFieldsValue});\r\n\tconst [fieldsErrors, setFieldsErrors] = useState({...customFieldsError});\r\n\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\t\t\r\n\t\r\n\tlet validateFields = ()=>{\r\n\t\tlet res = true;\r\n\t\tlet errors = {};\r\n\t\tfor(let key in requiredFields){\r\n\t\t\tif(requiredFields[key]){\r\n\t\t\t\tlet isError = fieldsValue[key].trim().length == 0;\t\t\t\t\r\n\t\t\t\terrors[key] = isError;\r\n\t\t\t\tif(isError){\r\n\t\t\t\t\tres = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\terrors[key] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFieldsErrors({\r\n\t\t\t...errors\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn res;\r\n\t}\t\r\n\tlet clearFields = ()=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...customFieldsValue\r\n\t\t})\t\t\r\n\t}\r\n\tlet handleFieldValueChange = (e)=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...fieldsValue,\r\n\t\t\t[e.target.getAttribute(\"name\")]: e.target.value\r\n\t\t})\r\n\t\tsetFieldsErrors({\r\n\t\t\t...customFieldsError\r\n\t\t});\r\n\t\tconsole.log(fieldsErrors, \"errors\");\r\n\t\tconsole.log(e.target.getAttribute(\"name\"));\r\n\t}\r\n\tlet signIn = \"\";\r\n\tlet signUp = \"\";\r\n\tlet sureRemove = \"\";\t\r\n\tlet sureRemovePdf = \"\";\t\r\n\tlet addPage = \"\";\r\n\tif(data.signIn){\r\n\t\tsignIn = <Card><Card.Body>\r\n\t\t\t<Card.Title>Login or Register <small>(if you don't have an account)</small></Card.Title>\r\n\t\t\t<Card.Text>\r\n\t\t\t<div><Form.Control name=\"login\" type=\"text\" value={fieldsValue.login} placeholder=\"Login\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.login ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t<div>\r\n\t\t\t<Form.Control name=\"pass\" type=\"password\" value={fieldsValue.pass} placeholder=\"Password\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.pass ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t</Card.Text>\r\n\t\t</Card.Body></Card>;\r\n\t}\r\n\r\n\tif(data.sureRemove){\r\n\t\tsureRemove = <div>Are you sure? You won't be able to recover this page! </div>;\r\n\t}\r\n\tif(data.sureRemovePdf){\r\n\t\tsureRemovePdf = <div>Are you sure? You won't be able to recover this Pdf and all pages created from this Pdf will be removed! </div>;\r\n\t}\t\r\n\tif(data.addPage){\r\n\t\taddPage = <div><Form.Control type=\"text\" name=\"name\" value={fieldsValue.name} placeholder=\"Name\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.name ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t}\r\n\t\r\n\treturn (\r\n    <>\r\n      <Button size=\"sm\" variant=\"primary\" onClick={handleShow}>\r\n\t\t  {data.button.icon ? <FontAwesomeIcon icon={data.button.icon} /> : \"\"} \r\n\t\t\t{data.button.title}\r\n      </Button>\r\n\r\n      <Modal show={show} onHide={handleClose} animation={false}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{data.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n\t\t\t{signIn} \r\n\t\t\t{signUp}\r\n\t\t\t{sureRemove}\r\n\t\t\t{sureRemovePdf}\r\n\t\t\t{addPage}\r\n\t\t</Modal.Body>\r\n        <Modal.Footer>\r\n\t\t\t{data.buttons.map((but, index)=>{\r\n\t\t\t\treturn (<Button size=\"sm\" key={index}  variant=\"secondary\" onClick={()=>{\r\n\t\t\t\t\tif(validateFields()){\r\n\t\t\t\t\t\ttypeof but.func === \"function\" && but.func(fieldsValue);\r\n\t\t\t\t\t\thandleClose();\t\r\n\t\t\t\t\t\tclearFields();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{but.title}\r\n\t\t\t\t</Button>);\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\t);\r\n}\t\r\n\r\n\r\nexport default UserModal;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { signForm, signOutForm} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcurrent_user: state.current_user,\r\n\t\tusers: state.users\r\n\t};\r\n};\r\n\r\n\r\nlet UserBlock = connect(mapStateToProps)(({ current_user, users, dispatch }) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\ttitle: \"Login or Register\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsData){\r\n\t\t\t\tdispatch(signForm(fieldsData));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\t\r\n\tlet userData = null;\r\n\tif(current_user.id !== null){\r\n\t\tlet usersData = users.filter((us)=>{\r\n\t\t\treturn us.id == current_user.id;\r\n\t\t});\r\n\t\tuserData = usersData.length > 0 ? usersData[0] : null;\r\n\t}\r\n\treturn(\r\n\t<ListGroup>\r\n\t{current_user.id == null ?\r\n\t\t<ListGroup.Item><UserModal {...signModalObj} /></ListGroup.Item>\r\n\t:\r\n\t\t<ListGroup.Item>Hello, {userData ? userData.name : \"\"} <Button onClick={()=>{\r\n\t\t\tdispatch(signOutForm());\r\n\t\t}} variant=\"primary\" size=\"sm\">SignOut</Button></ListGroup.Item>\r\n\t}\r\n\t\r\n\t</ListGroup>\r\n)});\r\n\r\nUserBlock = connect()(UserBlock);\r\nexport default UserBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faChevronRight } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { changeActivePdf, removePdf } from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nlet PdfView = ({pdf, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemovePdf: true,\r\n\t\ttitle: \"Remove Pdf File\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePdf(pdf.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item className={pdf.is_active ? \"list-group-item-primary\" : \"\"}>\t\t\t\r\n\t\t\t<Button variant=\"link\"  onClick={e => {\r\n\t\t\t\te.preventDefault();\t\r\n\t\t\t\tdispatch(changeActivePdf(pdf.index));\r\n\t\t\t}}><span>{pdf.path}</span> <FontAwesomeIcon icon={faChevronRight} /></Button>\t\r\n\t\t\t{pdf.current_user.id !== null && pdf.user && pdf.current_user.id == pdf.user.id ?\r\n\t\t\t\t<ButtonGroup className=\"mr-2\"><UserModal {...signModalRemoveObj} /></ButtonGroup>\r\n\t\t\t\t: <></>\r\n\t\t\t}\r\n\t\t\t{pdf.user ?  <div><small>Loaded by {pdf.user.id == pdf.current_user.id ? \"you\" : pdf.user.name} {pdf.load_date}</small>\r\n\t\t\t<div><small>Last pages edits - {pdf.last_edit_date}</small></div></div> : <></>}\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPdfView = connect()(PdfView);\r\nexport default PdfView;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios, { post } from 'axios';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addPdf} from '../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst FileUploader = connect(mapStateToProps)(({ current_user, dispatch }) => {\r\n\tconst [file, setFile] = useState(null);\r\n\tconst [loader, setLoader] = useState(null);\r\n\tconst [modal, setModal] = useState({\r\n\t\tshow: false,\r\n\t\ttitle: \"\",\r\n\t\ttext: \"\"\r\n\t});\r\n\t\r\n\tlet fileUp = (file)=>{\r\n\t\tconst url = '/upload.php';\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('file',file)\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n            'content-type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn  post(url, formData,config)\r\n\t}\r\n\t\r\n\tlet onFormSubmit = (e)=>{\r\n\t\te.preventDefault() \r\n\t\tfile && setLoader(true);\r\n\t\tfileUp(file).then((response)=>{\t\r\n\t\t\tsetLoader(false);\r\n\t\t\tlet result = response.data;\r\n\t\t\tif(result.error == false){\r\n\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\tlet onChange = (e)=> {\r\n\t\tsetFile(e.target.files[0]);\t\r\n\t\tif(e.target.files[0]){\r\n\t\t\tsetLoader(true);\r\n\t\t\tfileUp(e.target.files[0]).then((response)=>{\t\t\t\t\r\n\t\t\t\tsetLoader(false);\r\n\t\t\t\tlet result = response.data;\r\n\t\t\t\tif(result.error == false){\r\n\t\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t\t}));\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsetModal({...modal, show: true, title: \"File Upload Error\", text: (\"File wasn't loaded. \" + result.error) });\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => { setLoader(false); setModal({...modal, show: true, title: \"File Upload Error\", text: \"File wasn't loaded. Somthing went wrong...\"});});\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t<form onSubmit={onFormSubmit}>\r\n\t\t\t<h5>Upload Pdf File</h5>\r\n\t\t\t{ loader ? <span>\r\n\t\t\t\t\t<Spinner animation=\"border\" variant=\"secondary\" />\r\n\t\t\t\t\tWait please, File is Loading...\r\n\t\t\t\t</span> : <>\r\n\t\t\t\t  <div className=\"custom-file\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tclassName=\"custom-file-input\"\r\n\t\t\t\t\t\tid=\"inputGroupFile01\"\r\n\t\t\t\t\t\taria-describedby=\"inputGroupFileAddon01\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"custom-file-label\" size=\"sm\" htmlFor=\"inputGroupFile01\">\r\n\t\t\t\t\t  Choose file\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<button type=\"submit\" style={{\"display\": \"none\"}}>Upload</button>\r\n\t\t\t\t  </div>\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t  </>\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t</form>\r\n\t\t<Modal show={modal.show} onHide={()=>{setModal({...modal, show: false})}}>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title>{modal.title}</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>{modal.text}</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"primary\" onClick={()=>{setModal({...modal, show: false})}} >\r\n\t\t\t\t\tOk\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\t\r\n\t\t</>\r\n)});\r\n\r\n\r\nexport default FileUploader;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport UserModal from './UserModal';\r\nimport PdfView from './PdfView';\r\nimport FileUploader from './FileUploader';\r\nimport { signForm} from '../actions';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst PdfBlock = connect(mapStateToProps)(({ pdfs, active_pdf_index, users, current_user , dispatch}) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\ttitle: \"Login or Register to Upload File\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Upload Pdf File\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsData){\r\n\t\t\t\tdispatch(signForm(fieldsData));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t{pdfs.map((pdfItem, index) => {\t\r\n\t\t\tlet pdfUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == pdfItem.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pdfUsers.length > 0 ? pdfUsers[0] : null;\r\n\t\t\tlet pdf = {\r\n\t\t\t\t...pdfItem,\r\n\t\t\t\tis_active: index === active_pdf_index,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PdfView key={index} {...{pdf: pdf}} />\r\n\t\t\t)}\r\n\t\t)}\t\t\r\n\t\t<ListGroup.Item>{current_user.id == null ? <UserModal {...signModalObj} /> : <FileUploader/>}</ListGroup.Item>\r\n\t</ListGroup>\r\n)});\r\n\r\n\r\nexport default PdfBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route,Link } from 'react-router-dom';\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { removePage, changePdfDate} from '../actions';\r\nimport UserModal from './UserModal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet PageView = ({page, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Page\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tdispatch(removePage(page.id));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item>\t\t\t\t\r\n\t\t\t<Link to={\"/pages/\" +page.id}><span>{page.name}</span> <FontAwesomeIcon icon={faEdit} /></Link>\r\n\t\t\t{ page.user && page.user.id == page.current_user.id ? <ButtonGroup className=\"mr-2\"><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small><div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPageView = connect()(PageView);\r\nexport default PageView;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addNewPage, signFormAndAddNewPage, changePdfDate} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\nimport PageView from './PageView';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\t\r\n\treturn {\t\r\n\t\t\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\t\t\r\n\t};\r\n};\r\n\r\n\r\nlet PageBlock = connect(mapStateToProps)(({ pages, pdfs, active_pdf_index, users, current_user, dispatch }) => {\r\n\tlet activePdfId = pdfs.length > 0 ? pdfs[active_pdf_index].id : null;\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn activePdfId == item.pdf_id;\r\n\t});\t\r\n\tlet handleAddNewPage = ()=>{\r\n\t\t\r\n\t}\r\n\tlet addPageObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Add New Page\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Add New Page\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Add Page\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(addNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}]\t\t\r\n\t}\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: true,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Add New Page\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Add New Page\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(signFormAndAddNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\t\r\n\t\t\t\t\tlogin: fieldsValue.login,\r\n\t\t\t\t\tpass: fieldsValue.pass\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t{activePages.map((page, index) => {\t\r\n\t\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == page.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\t\tlet activePage = {\r\n\t\t\t\t...page,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PageView key={index} {...{page: activePage}} />\r\n\t\t\t)}\r\n\t\t)}\t\t\r\n\t\t<ListGroup.Item>\r\n\t\t{current_user.id !== null ? <UserModal {...addPageObj} />\t :\t<UserModal {...signModalObj} />\t}\r\n\t\t\t\r\n\t\t</ListGroup.Item>\r\n\t</ListGroup>\r\n)});\r\n\r\nexport default PageBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Col from 'react-bootstrap/Col';\r\n\r\nimport UserBlock from './UserBlock';\r\nimport PdfBlock from './PdfBlock';\r\nimport PageBlock from './PageBlock';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index\r\n  };\r\n};\r\n\r\n\r\nconst Blocks = connect(mapStateToProps)(({ pdfs, active_pdf_index }) => {\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Col><UserBlock /></Col>\r\n\t\t\t<Col><PdfBlock /></Col>\r\n\t\t\t<Col><PageBlock /></Col>\r\n\t\t</>\t\t\r\n)});\r\n\r\n\r\nexport default Blocks;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronUp, faChevronDown} from '@fortawesome/free-solid-svg-icons'\r\n\r\nlet ImagesPaginator = ({images,activeIndex, items, onPageChange, pageId}) => {\t\r\n\tconst [activePage, setActivePage] = useState(0);\r\n\tconst [activeItem, setActiveItem] = useState(0);\r\n\tconst [activeImages, setActiveImages] = useState(images);\r\n\r\n\tlet setPage = (e, type)=>{\r\n\t\te.preventDefault();\r\n\t\tlet pages = parseInt(images.length/items);\r\n\t\tlet aPage = type == \"next\" ? activePage < pages ? activePage+1 : 0 :\r\n\t\tactivePage == 0 ? pages : activePage-1;\r\n\t\tsetActivePage(aPage);\t\r\n\t\t\t\t\r\n\t\tif(!(activeItem >= items*aPage && activeItem < (items * aPage + items))){\t\t\r\n\t\t\tlet activeInd = items*aPage;\r\n\t\t\tsetActiveItem(activeInd);\r\n\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tlet aPage = activePage;\r\n\t\tlet hash = window.location.hash;\r\n\t\tif(hash.indexOf(\"#page_\") !== -1){\r\n\t\t\tlet pageNum = parseInt(hash.replace(\"#page_\", \"\"));\t\t\t\r\n\t\t\tif(!isNaN(pageNum) && pageNum > 0 && pageNum < images.length){\r\n\t\t\t\tactiveIndex = pageNum;\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(activeIndex, \"activeIndex\");\r\n\t\tif(activeIndex > 0){\r\n\t\t\tsetActiveItem(activeIndex);\r\n\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeIndex});\r\n\t\t\tif(activeIndex > (items * activePage + items)){\r\n\t\t\t\taPage = parseInt(activeIndex/items);\r\n\t\t\t\tsetActivePage(aPage);\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\t\r\n\t\tconsole.log(\"--pag->>>\");\r\n\t},[images]);\t\r\n\t\r\n\treturn (\r\n\t\t<div className=\"imagePreviewsContainer\">\r\n\t\t\t<div className=\"imagePreviewsPrev\" onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"prev\");\r\n\t\t\t\t}}><FontAwesomeIcon icon={faChevronUp} /></div>\r\n\t\t\t<div className=\"imagePreviews\">\r\n\t\t\t<>{console.log(activeImages, \"-->>render inages\")}</>\r\n\t\t\t{activeImages.map((img, index)=>{\t\t\t\t\r\n\t\t\t\tlet src = img.replace(\".png\", \"_preview.png\").replace(\".jpg\", \"_preview.jpg\");\r\n\t\t\t\treturn <div onClick={(e)=>{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlet activeInd = items * activePage + index;\r\n\t\t\t\t\tsetActiveItem(activeInd);\r\n\t\t\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\r\n\t\t\t\t}} className={activeItem == (items * activePage + index) ? \"active imagePreview\" : \"imagePreview\"}>\r\n\t\t\t\t\t<img src={src}/>\r\n\t\t\t\t\t<span className=\"imagePreviewNumber\"><span>{items * activePage + index+1}</span></span></div>\r\n\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"next\");\r\n\t\t\t\t}} className=\"imagePreviewsNext\"><FontAwesomeIcon icon={faChevronDown} /></div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default  ImagesPaginator;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport Alert  from 'react-bootstrap/Alert';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport UserModal from './UserModal';\r\nimport ImagesPaginator from './ImagesPaginator';\r\n\r\nimport { hasSomeParentTheClass, formatDate } from '../helper';\r\n\r\nimport { changeTextValue, removeTextValue , addNewTextValue, \r\n\t\tremoveMessage, addNewMessage, addFirstMessage, removePage, changePdfDate, changePageDate} from '../actions';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faPlus, faArrowsAlt, faExclamation, faCheck, faEnvelope} from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet EditablePageView = ({page, newTextId, dispatch}) => {\r\nconsole.log(page, \"page\");\t\r\n\tconst customFieldState = {\r\n\t\t\"visibility\": \"hidden\",\r\n\t\t\"left\": 0,\r\n\t\t\"top\": 0,\r\n\t\t\"value\": \"\",\r\n\t\t\"width\": 0,\r\n\t\t\"height\": 0,\r\n\t\t\"imageTextId\": null\r\n\t};\r\n\tconst customButtonsVisibility = {\r\n\t\t\"remove\": \"visible\",\r\n\t\t\"move\": \"visible\",\r\n\t\t\"warning\": \"visible\",\r\n\t\t\"ok\": \"visible\",\r\n\t\t\"message\": \"visible\"\r\n\t};\r\n\tconst customButtonsStatus = {\r\n\t\t\"warning\": false,\r\n\t\t\"ok\": false,\r\n\t\t\"message\": true\r\n\t};\r\n\t\r\n\t\r\n\tconst canvasRef = useRef(null);\r\n\tconst [imageTexts, setImageTexts] = useState([]);\r\n\tconst [activeMessages, setActiveMessages] = useState([]);\t\r\n\tconst [activeMessageText, setActiveMessageText] = useState(\"\");\t\r\n\tconst [imageIndex, setImageIndex] = useState(0);\r\n\tconst [fieldData, setFieldData] = useState({...customFieldState});\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility});\r\n\tconst [buttonsStatus, setButtonsStatus] = useState({...customButtonsStatus});\r\n\tconst [isMove, setMovingMode] = useState(false);\t\r\n\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Page\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePage(page.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\tlet handlePageChange = (pageData)=>{\t\r\n\t\tsetImageIndex(pageData.selected);\t\t\r\n\t};\r\n\tlet handleFieldTextChange = (e)=>{\t\r\n\t\t\r\n\t\tsetFieldData({\r\n\t\t\t...fieldData,\r\n\t\t\t\"value\": e.target.value\r\n\t\t});\t\t\t\r\n\t\tif(e.target.value.trim().length > 0){\t\t\t\r\n\t\t\tif(fieldData.imageTextId == null){\r\n\t\t\t\tdispatch(addNewTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t\tsetButtonsVisibility({\r\n\t\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\t\tremove: \"visible\"\r\n\t\t\t\t});\t\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId,\r\n\t\t\t\t\t\"value\": e.target.value\r\n\t\t\t\t});\t\r\n\t\t\t\tlet value = e.target.value;\r\n\t\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(changeTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t}\t\r\n\t};\r\n\tlet handleFieldTextRemove = (e)=>{\t\t\t\t\r\n\t\tdispatch(removeTextValue(fieldData.imageTextId));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetFieldData({...customFieldState});\r\n\t\trenderImage();\r\n\t};\t\t\t\r\n\tlet handleImageTextsClick = (e)=>{\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageText\") && !hasSomeParentTheClass(e.target, \"imageTextFileldParent\")){\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\tremove: \"hidden\",\r\n\t\t\t\tok: \"hidden\",\r\n\t\t\t\twarning: \"hidden\"\r\n\t\t\t});\r\n\t\t\tsetButtonsStatus({...customButtonsStatus});\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...customFieldState,\r\n\t\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\t\"width\": 120,\r\n\t\t\t\t\"height\": 30,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\r\n\t\t\tsetActiveMessages([]);\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\r\n\t};\r\n\tlet handleFileldMouseDown = (e)=>{\r\n\t\tconsole.log(\"handleFileldMouseDown\");\r\n\t\tsetMovingMode(true);\r\n\t};\r\n\tlet handleFileldMouseUp = (e)=>{\r\n\t\tconsole.log( \"handleFileldMouseUp\");\r\n\t\tsetMovingMode(false);\r\n\t};\r\n\tlet handleFileldMouseMove = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\t\r\n\t\tconsole.log(isMove, \"is move\");\r\n\t\tif(isMove){\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tconsole.log(rect.x, e.clientX, \"-----\");\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...fieldData,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\t\r\n\t\t\tdispatch(changeTextValue({\r\n\t\t\t\ttext: fieldData.value, \r\n\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\tmax_width: fieldData.max_width,\r\n\t\t\t\tx: fieldData.left,\r\n\t\t\t\ty: fieldData.top\r\n\t\t\t}));\r\n\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\r\n\t\t}\r\n\t};\r\n\tlet handleFieldTextWarning = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.warning ? null : \"warning\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: !buttonsStatus.warning,\r\n\t\t\tok: buttonsStatus.warning ?  buttonsStatus.ok : false\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleFieldTextOk = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.ok ? null : \"ok\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: buttonsStatus.ok ?  buttonsStatus.warning : false,\r\n\t\t\tok: !buttonsStatus.ok\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t\t\r\n\t};\r\n\tlet handleFieldTextMessageVisibility = ()=>{\r\n\t\tsetButtonsStatus({\r\n\t\t\t...buttonsStatus,\r\n\t\t\tmessage: !buttonsStatus.message\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleActiveMessagesRemove = (e, msg)=>{\r\n\t\t\r\n\t\tdispatch(removeMessage(msg.id));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t\tlet messages = page.texts.filter((txt)=>{\r\n\t\t\t\treturn txt.id == fieldData.imageTextId;\r\n\t\t\t})[0].messages;\r\n\t\t\tsetActiveMessages([\r\n\t\t\t\t...messages\r\n\t\t\t]);\t\t\t\t\t\r\n\t\t});\t\t\t\r\n\t};\r\n\tlet handleAddNewMessage = (e)=>{\t\t\t\r\n\t\tif(/*e.keyCode == 13 && e.shiftKey == false &&*/ activeMessageText.trim().length > 0){\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\tlet text_id = fieldData.imageTextId;\r\n\t\t\tif(fieldData.imageTextId == null){\t\t\t\t\r\n\t\t\t\tdispatch(addFirstMessage({\r\n\t\t\t\t\ttext: \"\", \r\n\t\t\t\t\tmax_width: 0,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id,\r\n\t\t\t\t\tmsgText: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate()\t\t\t\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId\r\n\t\t\t\t});\t\r\n\t\t\t\ttext_id = newTextId;\r\n\t\t\t\tconsole.log(newTextId, \"newTextId\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(addNewMessage({\r\n\t\t\t\t\ttext: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate(),\r\n\t\t\t\t\ttext_id: fieldData.imageTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: text_id, visibility: \"hidden\"})]);\r\n\t\t\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\t\t\treturn txt.id == text_id;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(texts.length > 0){\t\t\t\t\t\r\n\t\t\t\t\tsetActiveMessages([\r\n\t\t\t\t\t\t...texts[0].messages\r\n\t\t\t\t\t]);\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetActiveMessageText(\"\");\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t}\t\t\r\n\t};\r\n\tlet handleActiveMessageText = (e)=>{\r\n\t\tsetActiveMessageText(e.target.value);\t\r\n\t};\r\n\tlet imageTextFieldBlur = (e)=>{\t\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageTexts\")){\r\n\t\t\tsetMovingMode(false);\r\n\t\t\tsetFieldData({...customFieldState});\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\t\t\t\r\n\t}\r\n\tlet imageTextClick = (e, imageTextId, imageTextStatus, messages, text)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\r\n\t\t\r\n\t\tsetMovingMode(false);\r\n\t\tsetButtonsVisibility({...customButtonsVisibility});\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: imageTextStatus == \"warning\",\r\n\t\t\tok: imageTextStatus == \"ok\",\r\n\t\t});\r\n\t\tlet rect = e.currentTarget.getBoundingClientRect();\r\n\t\tsetFieldData({\r\n\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\"left\": e.currentTarget.offsetLeft,\r\n\t\t\t\"top\": e.currentTarget.offsetTop,\r\n\t\t\t\"value\": text,\r\n\t\t\t\"width\": rect.width + 30,\r\n\t\t\t\"height\": rect.height > 30 ? rect.height : 30,\r\n\t\t\t\"imageTextId\": imageTextId\r\n\t\t});\r\n\t\tsetActiveMessages([\r\n\t\t\t...messages\r\n\t\t]);\r\n\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: imageTextId, visibility: \"hidden\"})]);\r\n\t}\r\n\tlet renderImage = ()=>{\r\n\t\tconst canvas = canvasRef.current;\r\n\t\tconst ctx = canvas.getContext('2d');\t\t\t\t\r\n\t\tconst image = new Image();\r\n\t\timage.src = page.pdf.images[imageIndex];\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tlet w = 1000;\r\n\t\t\t\tlet h = (w * image.height) / image.width;\r\n\t\t\t\tctx.canvas.width  = w;\r\n\t\t\t\tctx.canvas.height = h;\t\t\t\r\n\t\t\t\tctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\t\tctx.drawImage(image, 0, 0, w, h);\t\t\t\r\n\t\t\t\tsetImageTexts(getTexts());\t\t\r\n\t\t\t\tresolve({status: 'ok'});\r\n\t\t\t};\t\t\t\t\r\n\t\t});\t\r\n\t}\r\n\tlet setTextsVisibility = (texts, activeTxt)=>{\r\n\t\treturn texts.map((txt)=>{\t\r\n\t\t\tlet visibility = \"visible\";\r\n\t\t\tif(activeTxt !== undefined && txt.id == activeTxt.id){\r\n\t\t\t\tvisibility  = activeTxt.visibility;\r\n\t\t\t}\r\n\t\t\ttxt.visibility = visibility;\r\n\t\t\treturn txt;\r\n\t\t});\t\t\t\r\n\t}\t\r\n\tlet getTexts = ()=>{\r\n\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\treturn txt.image_index == imageIndex;\r\n\t\t});\r\n\t\ttexts.forEach((txt)=>{\r\n\t\t\ttxt.messages = page.messages.filter((msg)=>{\r\n\t\t\t\treturn msg.text_id == txt.id;\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\treturn setTextsVisibility(texts);\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\trenderImage(imageIndex);\r\n\t\tconsole.log(\"---ed--->>>\");\r\n\t}, [imageIndex]);\r\n\t\r\n\treturn (\r\n\t\t<Container onClick={imageTextFieldBlur}>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col><h2>{page.name} </h2>{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small>\r\n\t\t\t\t<div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t{page.user && page.user.id == page.current_user.id ? <ButtonGroup className=\"mr-2\"><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>} \t\r\n\t\t\t\t\t<ImagesPaginator {...{images: page.pdf.images, items: 5, onPageChange: handlePageChange, activeIndex: 0, pageId: page.id}}/>\t\t\t\t\t\t\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<div className=\"imageParent\">\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\t  ref={canvasRef}\r\n\t\t\t\t\t/>\t\r\n\t\t\t\t\t<div className=\"imageTexts\" onClick={handleImageTextsClick} /*onMouseMove={handleFileldMouseMove}*/>\r\n\t\t\t\t\t\t{imageTexts.map((txt, index) => {\t\r\n\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t<div key={index}  style={{\r\n\t\t\t\t\t\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\"zIndex\": 3,\r\n\t\t\t\t\t\t\t\t\t\"left\": txt.x,\r\n\t\t\t\t\t\t\t\t\t\"top\": txt.y,\r\n\t\t\t\t\t\t\t\t\t\"maxWidth\": txt.max_width,\r\n\t\t\t\t\t\t\t\t\t\"visibility\": txt.visibility,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": !(page.user && page.user.id == page.current_user.id) && txt.text == \"\" ? 0 : 1\r\n\t\t\t\t\t\t\t\t}}  className={txt.status ? (\"imageText \" + (txt.status + \"Text\")) : \"imageText\"} onClick={(e)=>{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\timageTextClick(e, txt.id, txt.status, txt.messages, txt.text);\r\n\t\t\t\t\t\t\t\t}}><span>{txt.text}</span>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{txt.messages.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"sm\"><FontAwesomeIcon icon={faEnvelope} />{txt.messages.length}</Button>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t: <></>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t)}\t\r\n\t\t\t\t\t\t<div className=\"imageTextFileldParent\" style={{\r\n\t\t\t\t\t\t\t\"left\": fieldData.left,\r\n\t\t\t\t\t\t\t\"top\": fieldData.top,\r\n\t\t\t\t\t\t\t\"visibility\": fieldData.visibility\r\n\t\t\t\t\t\t}}  >\r\n\t\t\t\t\t\t\t<textarea  \r\n\t\t\t\t\t\t\t\tdisabled={!(page.user && page.user.id == page.current_user.id)}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Your text...\"\r\n\t\t\t\t\t\t\t\tonChange={handleFieldTextChange}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\"width\": fieldData.value == \"\" && !(page.user && page.user.id == page.current_user.id) ? 0 : fieldData.width,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": page.user && page.user.id == page.current_user.id ? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t\"height\": fieldData.height,\r\n\t\t\t\t\t\t\t\t\t\"resize\": page.user && page.user.id == page.current_user.id ? \"both\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\t\tvalue={fieldData.value} \r\n\t\t\t\t\t\t\t\tclassName={buttonsStatus.warning ? \"form-control form-control-warning imageTextFileld\" : \r\n\t\t\t\t\t\t\t\t\t\t\tbuttonsStatus.ok ? \"form-control form-control-ok imageTextFileld\" : \"form-control imageTextFileld\"}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trows=\"1\"\r\n\t\t\t\t\t\t\t\t/*onMouseDown={handleFileldMouseDown} \r\n\t\t\t\t\t\t\t\tonMouseUp={handleFileldMouseUp} \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonDragStart={()=>{return false;}} */\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldButtons\">\r\n\t\t\t\t\t\t\t\t{page.user && page.user.id == page.current_user.id ? <Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.remove == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextRemove} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button> : <></>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.warning == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextWarning} variant={buttonsStatus.warning ? \"danger\" : \"outline-danger\"} size=\"sm\"><FontAwesomeIcon icon={faExclamation} /></Button>\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.ok == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextOk} variant={buttonsStatus.ok ? \"success\" : \"outline-success\"} size=\"sm\"><FontAwesomeIcon icon={faCheck} /></Button>\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.message == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextMessageVisibility} variant={buttonsStatus.message ? \"primary\" : \"outline-primary\"} size=\"sm\"><FontAwesomeIcon icon={faEnvelope} /></Button>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldMessageParent\" style={{\r\n\t\t\t\t\t\t\t\t\"display\": buttonsStatus.message ? \"block\" : \"none\"\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Alert variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t{activeMessages.map((msg, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet mUsers = page.users.filter((us)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn us.id == msg.user_id;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tlet mUser = mUsers.length > 0 ? mUsers[0] : null;\r\n\t\t\t\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={index} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{mUser ? <>{mUser.id == page.current_user.id ? \"you\" : mUser.name}, </>  : <>unsigned user, </> } {msg.date}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{msg.text}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{mUser && mUser.id == page.current_user.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleActiveMessagesRemove(e, msg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<div><textarea\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleActiveMessageText}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your message...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control imageTextFileldMessageField\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={activeMessageText}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup className=\"imageTextFileldMessageBtn\"> <Button className=\"simpBtn\" onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\thandleAddNewMessage(e);\r\n\t\t\t\t\t\t\t\t\t\t}} variant=\"primary\" size=\"sm\">Add Message</Button>\t</ButtonGroup>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n}\r\nEditablePageView = connect()(EditablePageView); \r\nexport default EditablePageView;\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditablePage = connect(mapStateToProps)(({ pages , pdfs, texts, messages, users, current_user, history}) => {\r\n\tlet { id } = useParams();\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn item.id == id;\r\n\t});\r\n\tlet activePage = activePages.length > 0 ? activePages[0] : null;\r\n\tlet newTextId = texts.length > 0 ? texts[texts.length-1].id + 1: 0;\r\n\tif(activePage !== null){\r\n\t\tlet activePdfs = pdfs.filter((pdf)=>{\r\n\t\t\treturn pdf.id == activePage.pdf_id;\r\n\t\t});\r\n\t\tlet activePdf = activePdfs.length > 0 ? activePdfs[0] : null;\r\n\t\tactivePage.pdf = activePdf;\r\n\t\tlet activeTexts = texts.filter((txt)=>{\r\n\t\t\treturn txt.page_id == id;\r\n\t\t});\r\n\t\tactivePage.texts = activeTexts;\r\n\t\tif(activePage.texts){\r\n\t\t\tactivePage.messages = messages;\r\n\t\t}\t\r\n\t\tactivePage.users = users;\r\n\t\tactivePage.current_user = current_user;\r\n\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\treturn us.id == activePage.user_id;\r\n\t\t});\r\n\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\tactivePage.user = user;\r\n\t}\r\n\treturn(\r\n\t<>\r\n\t\t<Link to=\"/\">Go Back</Link>\t\r\n\t  {activePage === null ? <>Page Not Found</> : <EditablePageView  {...{page: activePage, newTextId: newTextId}}/>}\r\n\t\t\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditablePage);","import React, { Component } from 'react';\nimport { Route,Link,withRouter } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\nimport Blocks from './components/Blocks';\nimport EditablePage from './components/EditablePage';\nimport './styles/main.scss';\n\nfunction App({location}) {\t\n    return (\n\t\t<Container>\n\t\t\t<h1>EditHomework</h1>\t\t\t\n\t\t\t<Row>\t\t\t\n\t\t\t\t<Route exact path=\"/\" component={Blocks} />\n\t\t\t\t<Route exact path=\"/pages/:id\" component={EditablePage} />\t\t\t\t\t\t\n\t\t\t</Row>\t  \n\t\t</Container>\n    );\n}\n\nexport default withRouter(App);\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport toDoApp from './reducers';\nimport App from './App';\n\nconst store = createStore(toDoApp);\n\nrender(\n  <Provider store={store}>\n\t<BrowserRouter>\n    <App />\n\t</BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}