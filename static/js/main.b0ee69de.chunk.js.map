{"version":3,"sources":["actions/index.js","helper/index.js","reducers/index.js","components/UserModal.js","components/PdfView.js","components/FileUploader.js","components/PdfBlock.js","components/PageView.js","components/PageBlock.js","components/Blocks.js","components/ImagesPaginator.js","components/EditableField.js","components/EditablePageView.js","components/EditablePage.js","components/UserBlock.js","components/PolicyPage.js","App.js","index.js"],"names":["CHANGE_ACTIVE_PDF","CHANGE_TEXT_VALUE","REMOVE_TEXT_VALUE","ADD_NEW_TEXT_VALUE","REMOVE_MESSAGE","ADD_NEW_MESSAGE","ADD_FIRST_MESSAGE","REMOVE_PAGE","ADD_NEW_PAGE","SIGN_FORM","SIGN_FB","SIGN_OUT_FORM","SIGN_FORM_AND_ADD_NEW_PAGE","ADD_PDF","REMOVE_PDF","CHANGE_PDF_DATE","CHANGE_PAGE_DATE","CHANGE_PAGE_NAME","LOAD_USERS","LOAD_PAGES","LOAD_PDFS","LOAD_TEXTS","LOAD_MESSAGES","LOAD_CURRENT_USER","changeTextValue","data","type","id","text","max_width","x","y","status","removePage","signForm","userData","name","login","pass","md5","hex_md5","signFB","photo","addPdf","path","images","user_id","changePdfDate","changePageDate","loadUsers","loadPages","loadTexts","loadPdfs","loadMessages","loadCurrentUser","hasSomeParentTheClass","element","classname","className","split","indexOf","parentNode","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","h","getHours","m","getMinutes","length","initialState","current_user","users","pdfs","texts","messages","active_pdf_index","pages","UserModal","customFieldsValue","customFieldsError","requiredFields","addPage","signIn","useState","show","setShow","fieldsValue","setFieldsValue","fieldsErrors","setFieldsErrors","handleClose","clearFields","handleFieldValueChange","e","target","getAttribute","value","sureRemove","sureRemovePdf","fb","Card","Body","Title","Text","Form","Control","size","placeholder","onChange","Alert","variant","appId","autoLoad","fields","callback","response","version","cssClass","icon","Button","button","large","onClick","title","Modal","onHide","animation","Header","closeButton","Footer","buttons","map","but","index","key","res","errors","isError","trim","validateFields","func","PdfView","pdf","dispatch","signModalRemoveObj","signUp","faTrashAlt","ListGroup","Item","is_active","preventDefault","faChevronRight","user","ButtonGroup","faCalendarAlt","load_date","last_edit_date","connect","FileUploader","state","file","setFile","loader","setLoader","modal","setModal","fileUp","formData","FormData","append","post","headers","onSubmit","then","result","error","JSON","parse","Spinner","aria-describedby","files","catch","htmlFor","style","PdfBlock","signModalObj","console","log","accessToken","picture","url","faPlus","fieldsData","sort","a","b","d1","d2","pdfItem","pdfUsers","filter","us","PageView","page","pdf_id","to","PageBlock","activePdfId","activePdfPath","activePages","item","addPageObj","pageUsers","activePage","Blocks","Col","Row","ImagesPaginator","activeIndex","items","onPageChange","pageId","setActivePage","activeItem","setActiveItem","activeImages","setActiveImages","setPage","parseInt","aPage","activeInd","window","location","hash","selected","img","useEffect","faChevronUp","src","replace","faChevronDown","EditableField","saveTextFunction","customFieldSize","height","width","fieldText","setFieldText","fieldSize","setFieldSize","wrapperRef","setWrapperRef","textRef","setTextRef","edit","save","buttonsVisibility","setButtonsVisibility","handleClickOutside","contains","document","removeEventListener","handleEditField","rect","getBoundingClientRect","addEventListener","ref","faEdit","withRouter","EditablePageView","newTextId","previewLength","innerHeight","customFieldState","customButtonsVisibility","customButtonsStatus","startImageIndex","pageNum","isNaN","canvasRef","useRef","imageTexts","setImageTexts","activeMessages","setActiveMessages","activeMessageText","setActiveMessageText","imageIndex","setImageIndex","fieldData","setFieldData","buttonsStatus","setButtonsStatus","setMovingMode","handleActiveMessagesRemove","msg","renderImage","setTextsVisibility","imageTextId","visibility","txt","handleAddNewMessage","text_id","left","top","page_id","image_index","msgText","addNewMessage","getTexts","ctx","current","getContext","image","Image","Promise","resolve","onload","canvas","clearRect","drawImage","activeTxt","undefined","forEach","Container","changePageName","pageData","remove","ok","warning","clientX","clientY","imageTextStatus","stopPropagation","currentTarget","offsetLeft","offsetTop","imageTextClick","faEnvelope","disabled","offsetWidth","rows","faExclamation","faCheck","message","mUsers","mUser","EditablePage","history","useParams","activePdfs","activePdf","activeTexts","Helmet","faChevronLeft","UserBlock","usersData","PolicyPage","href","dataItems","loadingArr","push","axios","all","spread","responses","cUserId","localStorage","getItem","getStartData","exact","component","store","createStore","newTexts","newMessages","newText","newMessage","newPages","newPage","newUsers","fUsers","newPdfs","newTextsIds","action","saveData","savedData","stringify","pg","oldTexts","setItem","removeItem","newPdf","pd","removedPdfs","removedPdf","removedPagesIds","removedTexts","removePdf","cUser","render","getElementById"],"mappings":"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","file":"static/js/main.b0ee69de.chunk.js","sourcesContent":["import md5 from \"react-native-md5\";\r\nexport const CHANGE_ACTIVE_PDF = 'CHANGE_ACTIVE_PDF';\r\nexport const CHANGE_TEXT_VALUE = 'CHANGE_TEXT_VALUE';\r\nexport const REMOVE_TEXT_VALUE = 'REMOVE_TEXT_VALUE';\r\nexport const ADD_NEW_TEXT_VALUE = 'ADD_NEW_TEXT_VALUE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\nexport const ADD_FIRST_MESSAGE = 'ADD_FIRST_MESSAGE';\r\nexport const REMOVE_PAGE = 'REMOVE_PAGE';\r\nexport const ADD_NEW_PAGE = 'ADD_NEW_PAGE';\r\nexport const SIGN_FORM = 'SIGN_FORM';\r\nexport const SIGN_FB = 'SIGN_FB';\r\nexport const SIGN_OUT_FORM = 'SIGN_OUT_FORM';\r\nexport const SIGN_FORM_AND_ADD_NEW_PAGE = 'SIGN_FORM_AND_ADD_NEW_PAGE';\r\nexport const ADD_PDF = 'ADD_PDF';\r\nexport const REMOVE_PDF = 'REMOVE_PDF';\r\nexport const CHANGE_PDF_DATE = 'CHANGE_PDF_DATE';\r\nexport const CHANGE_PAGE_DATE = 'CHANGE_PAGE_DATE';\r\nexport const CHANGE_PAGE_NAME = 'CHANGE_PAGE_NAME';\r\n\r\nexport const LOAD_USERS = 'LOAD_USERS';\r\nexport const LOAD_PAGES = 'LOAD_PAGES';\r\nexport const LOAD_PDFS = 'LOAD_PDFS';\r\nexport const LOAD_TEXTS = 'LOAD_TEXTS';\r\nexport const LOAD_MESSAGES = 'LOAD_MESSAGES';\r\nexport const LOAD_CURRENT_USER = 'LOAD_CURRENT_USER';\r\n\r\nexport function changeActivePdf(index) {\r\n\treturn {\r\n\t\ttype: CHANGE_ACTIVE_PDF,\r\n\t\tindex: index\r\n\t};\r\n}\r\nexport function changeTextValue(data) {\r\n\treturn {\r\n\t\ttype: CHANGE_TEXT_VALUE,\r\n\t\tid: data.id,\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tstatus: data.status\r\n\t};\r\n}\r\nexport function addNewTextValue(data) {\r\n\treturn {\r\n\t\ttype: ADD_NEW_TEXT_VALUE,\t\t\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\r\n\t};\r\n}\r\nexport function addFirstMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_FIRST_MESSAGE,\r\n\t\tuser_id: data.user_id,\t\t\r\n\t\tmsgText: data.msgText,\r\n\t\tdate: data.date,\r\n\t\t\r\n\t\ttext: data.text,\t\t\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\t\t\r\n\t};\r\n}\r\nexport function addNewMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_MESSAGE,\r\n\t\tuser_id: data.user_id,\r\n\t\ttext_id: data.text_id,\r\n\t\ttext: data.text,\r\n\t\tdate: data.date\r\n\t};\r\n}\r\nexport function addNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\r\n\t\tuser_id: data.user_id\t\r\n\t};\r\n}\r\nexport function removeTextValue(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_TEXT_VALUE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removeMessage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_MESSAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removePage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_PAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function signForm(userData) {\r\n\treturn {\r\n\t\ttype: SIGN_FORM,\r\n\t\tname: userData.login,\r\n\t\tpass: md5.hex_md5(userData.pass)\r\n\t};\r\n}\r\nexport function signFB(userData) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FB,\r\n\t\tname: userData.name,\r\n\t\tpass: userData.pass,\r\n\t\tphoto: userData.photo,\r\n\t\tid: userData.id\r\n\t};\r\n}\r\nexport function signOutForm() {\r\n\treturn {\r\n\t\ttype: SIGN_OUT_FORM\r\n\t};\r\n}\r\nexport function signFormAndAddNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FORM_AND_ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\t\t\r\n\t\t\r\n\t\tlogin: data.login,\r\n\t\tpass: md5.hex_md5(data.pass)\r\n\t};\r\n}\r\nexport function addPdf(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_PDF,\r\n\t\tpath: data.path,\r\n\t\timages: data.images,\r\n\t\tuser_id: data.user_id\r\n\t};\r\n}\r\nexport function removePdf(id) {\t\r\n\treturn {\r\n\t\ttype: REMOVE_PDF,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePdfDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PDF_DATE,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePageDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PAGE_DATE,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePageName(id, name) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PAGE_NAME,\r\n\t\tid: id,\r\n\t\tname: name\r\n\t};\r\n}\r\n\r\nexport function loadUsers(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_USERS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadPages(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_PAGES,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadTexts(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_TEXTS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadPdfs(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_PDFS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadMessages(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_MESSAGES,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadCurrentUser(id) {\t\r\n\treturn {\r\n\t\ttype: LOAD_CURRENT_USER,\r\n\t\tid: id\r\n\t};\r\n}","export function hasSomeParentTheClass(element, classname) {\r\n    if (element.className && element.className.split && element.className.split(' ').indexOf(classname)>=0) return true;\r\n    return element.parentNode && hasSomeParentTheClass(element.parentNode, classname);\r\n}\r\nexport function formatDate(date) {\r\n\tconst monthNames = [\"Jan\", \"Feb\", \"March\", \"Apr\", \"May\", \"June\",\r\n\t  \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\r\n\t];\r\n\t\r\n    let d = date ? new Date(date) : new Date(),\r\n        month = '' + monthNames[d.getMonth()],\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear(),\r\n\t\th = d.getHours(),\r\n\t\tm = d.getMinutes();\r\n\r\n    if (month.length < 2) \r\n        month = '0' + month;\r\n    if (day.length < 2) \r\n        day = '0' + day;\r\n\r\n    return day + \" \" + month + \",\" + year + \" \" + h + \":\" + m;\r\n}","import axios, { post } from 'axios';\r\nimport { CHANGE_ACTIVE_PDF } from '../actions';\r\nimport { CHANGE_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_TEXT_VALUE } from '../actions';\r\nimport { ADD_NEW_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_MESSAGE } from '../actions';\r\nimport { ADD_NEW_MESSAGE } from '../actions';\r\nimport { ADD_FIRST_MESSAGE } from '../actions';\r\nimport { REMOVE_PAGE } from '../actions';\r\nimport { ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM_AND_ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM } from '../actions';\r\nimport { SIGN_OUT_FORM } from '../actions';\r\nimport { ADD_PDF } from '../actions';\r\nimport { REMOVE_PDF } from '../actions';\r\nimport { CHANGE_PDF_DATE } from '../actions';\r\nimport { CHANGE_PAGE_DATE } from '../actions';\r\nimport { LOAD_USERS } from '../actions';\r\nimport { LOAD_PAGES } from '../actions';\r\nimport { LOAD_PDFS } from '../actions';\r\nimport { LOAD_TEXTS } from '../actions';\r\nimport { LOAD_MESSAGES } from '../actions';\r\nimport { LOAD_CURRENT_USER } from '../actions';\r\nimport { CHANGE_PAGE_NAME } from '../actions';\r\nimport { SIGN_FB } from '../actions';\r\n\r\nimport { formatDate } from '../helper';\r\n\r\n\r\nconst initialState = {  \r\n\tcurrent_user: {\r\n\t\tid: null\r\n\t},\r\n\tusers: [/*{\r\n\t\tid: 0,\r\n\t\tname: \"OlkaOlkaOlkaOlka OlkaOlkaOlkaOlkaOlkaOlka\",\r\n\t\tpass: \"123\"\r\n\t}*/],\r\n\tpdfs: [/*{\r\n\t\tpath: \"some path1 some path1 some path1 some path1 some path1some path1 some path1 some path1\",\r\n\t\tid: 0,\r\n\t\tuser_id: 0,\r\n\t\tload_date: \"\",\r\n\t\tlast_edit_date: \"\",\r\n\t\timages: [\"/uploads/photos/photo_pdf билета.png\", \"../photos/2.jpg\", \"../photos/3.jpg\", \"../photos/4.jpg\", \"../photos/5.jpg\", \"../photos/6.jpg\", \"../photos7.jpg\", \"../photos/8.jpg\"]\r\n\t}*/],\r\n\ttexts: [/*{\r\n\t\ttext: \"testing text1\",\r\n\t\tx: 0,\r\n\t\ty:0,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 0,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: \"ok\" //\"ok\", \"warning\"\r\n\t}*/],\r\n\tmessages: [/*{\r\n\t\tid: 0,\r\n\t\tuser_id: null,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message1\",\r\n\t\tdate: \"date1\"\r\n\t}*/],\r\n\tactive_pdf_index: 0,\r\n\tpages: [/*{\r\n\t\tname: \"page 1 page 1page 1page 1 page 1page 1page 1page 1page 1page 1page 1page 1page 1page 1page 1\",\r\n\t\tid: 0,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t}*/]  \r\n};\r\nexport default function EditApp(state = initialState, action) {\t\r\n\tlet newTexts, newMessages, \r\n\t\tid, newText, newMessage, \r\n\t\tnewPages, newPage, cUserId,\r\n\t\tnewUsers, fUsers, pageId, newPdfs, newTextsIds;\r\n\t\t\r\n\tlet saveData= (name, data)=>{\r\n\t\tconst url = '/db.php';\r\n\t\tlet savedData = JSON.stringify(data);\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"name\", name);\r\n\t\tformData.append(\"action\", \"set\");\r\n\t\tformData.append(\"data\", savedData);\t\t\r\n\t\tpost(url, formData).then((result)=>{\r\n\t\t\tconsole.log(result, \"saved\", name);\r\n\t\t});\r\n\t}\t\r\n\tlet removePdf= (images, pdf)=>{\r\n\t\tconst url = '/remove_pdf.php';\t\t\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"images\", JSON.stringify(images));\r\n\t\tformData.append(\"pdf\", pdf);\r\n\t\t\r\n\t\tpost(url, formData).then((result)=>{\r\n\t\t\tconsole.log(result, \"removed\");\r\n\t\t});\r\n\t}\t\r\n\tswitch (action.type) {\r\n\tcase CHANGE_ACTIVE_PDF:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tactive_pdf_index: action.index\r\n\t\t}\r\n\tcase CHANGE_TEXT_VALUE: \t\t\r\n\t\tnewTexts = state.texts.map((txt)=>{\t\t\t\r\n\t\t\tif(txt.id == action.id){\r\n\t\t\t\ttxt.text = action.text;\r\n\t\t\t\ttxt.max_width = action.max_width;\t\r\n\t\t\t\ttxt.x = action.x;\t\r\n\t\t\t\ttxt.y = action.y;\r\n\t\t\t\ttxt.status = action.status;\r\n\t\t\t\ttxt.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn txt;\r\n\t\t});\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts\r\n\t\t}\r\n\tcase ADD_NEW_TEXT_VALUE: \t\t\t\r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"texts\", [...state.texts, newText]);\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText]\r\n\t\t}\t\r\n\tcase ADD_NEW_MESSAGE: \r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\t\t\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.text_id,\r\n\t\t\ttext: action.text,\r\n\t\t\tdate: action.date\t\t\t\t\r\n\t\t};\t\r\n\t\tsaveData(\"messages\", [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\r\n\tcase ADD_FIRST_MESSAGE: \r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null\r\n\t\t};\t\r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.id,\r\n\t\t\ttext: action.msgText,\r\n\t\t\tdate: action.date\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"messages\", [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]);\t\r\n\t\tsaveData(\"texts\", [...state.texts, newText]);\t\t\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText],\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\t\r\n\tcase ADD_NEW_PAGE:\r\n\t\tid = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: id,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pages\", [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]\r\n\t\t}\t\t\t\r\n\tcase REMOVE_TEXT_VALUE: \t\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.id !== action.id;\t\r\n\t\t});\t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.text_id !== action.id;\t\r\n\t\t});\t\t\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"messages\", newMessages);\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_MESSAGE: \t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.id !== action.id;\t\r\n\t\t});\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_PAGE: \t\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.id !== action.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id !== action.id;\t\r\n\t\t});\t\r\n\t\tlet oldTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id == action.id;\t\r\n\t\t});\t\r\n\t\tnewTextsIds = oldTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"pages\", newPages);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: newPages,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase SIGN_FB:\t\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.id == action.id;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\t\t\t\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: action.id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass,\r\n\t\t\t\t\tphoto: action.photo\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = action.id;\r\n\t\t}\r\n\t\tconsole.log(newUsers, \"newUsersnewUsersnewUsers\");\r\n\t\tsaveData(\"users\", [...newUsers]);\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\r\n\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\t\t\r\n\tcase SIGN_FORM:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.name && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\r\n\t\tsaveData(\"users\", [...newUsers]);\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\r\n\tcase SIGN_OUT_FORM:\t\t\r\n\t\tlocalStorage.removeItem(\"current_user_edithomework\");\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: null\r\n\t\t\t}\r\n\t\t}\r\n\tcase SIGN_FORM_AND_ADD_NEW_PAGE:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.login && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.login,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\t\r\n\t\tpageId = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: pageId,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: cUserId,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pages\", [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]);\r\n\t\tsaveData(\"users\", [...newUsers]);\t\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t],\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\t\t\t\r\n\t\t}\r\n\tcase ADD_PDF:\r\n\t\tid = state.pdfs.length > 0 ? state.pdfs[state.pdfs.length-1].id + 1 : 0;\r\n\t\tlet newPdf = {\r\n\t\t\tid: id,\r\n\t\t\tpath: action.path,\r\n\t\t\timages: action.images,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pdfs\", [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]\t\t\t\r\n\t\t}\r\n\tcase REMOVE_PDF:\t\r\n\t\tnewPdfs = state.pdfs.filter((pd)=>{\r\n\t\t\treturn pd.id !== action.id;\r\n\t\t});\r\n\t\tlet removedPdfs = state.pdfs.filter((pd)=>{\r\n\t\t\treturn pd.id == action.id;\r\n\t\t});\t\r\n\t\tlet removedPdf = removedPdfs.length > 0 ? removedPdfs[0] : null;\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.pdf_id !== action.id;\r\n\t\t});\r\n\t\tlet removedPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.pdf_id == action.id;\r\n\t\t});\r\n\t\tlet removedPagesIds = removedPages.map((pg)=>{\r\n\t\t\treturn pg.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn removedPagesIds.indexOf(txt.page_id)==-1;\t\r\n\t\t});\t\r\n\t\tlet removedTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn removedPagesIds.indexOf(txt.page_id)!==-1;\t\r\n\t\t});\t\r\n\t\tnewTextsIds = removedTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"pages\", newPages);\t\r\n\t\tsaveData(\"pdfs\", newPdfs);\t\t\t\r\n\t\tremovedPdf && removePdf(removedPdf.images, removedPdf.path);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...newPdfs],\r\n\t\t\tpages: [...newPages],\r\n\t\t\ttexts: [...newTexts],\r\n\t\t\tmessages: [...newMessages]\r\n\t\t}\r\n\tcase CHANGE_PDF_DATE:\t\t\r\n\t\tnewPdfs = state.pdfs.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pdfs\", [...newPdfs]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...newPdfs]\r\n\t\t}\r\n\tcase CHANGE_PAGE_DATE:\r\n\t\tconsole.log(action.id, \"page action\");\r\n\t\tnewPages = state.pages.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pages\", [...newPages]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\r\n\tcase CHANGE_PAGE_NAME:\r\n\t\tconsole.log(action.id, \"page action\");\r\n\t\tnewPages = state.pages.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.name = action.name;\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pages\", [...newPages]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\t\t\r\n\tcase LOAD_USERS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tusers: [...action.data]\r\n\t\t}\t\r\n\tcase LOAD_PAGES:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...action.data]\r\n\t\t}\r\n\tcase LOAD_PDFS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...action.data]\r\n\t\t}\r\n\tcase LOAD_TEXTS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...action.data]\r\n\t\t}\r\n\tcase LOAD_MESSAGES:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [...action.data]\r\n\t\t}\r\n\tcase LOAD_CURRENT_USER:\t\r\n\t\tlet cUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.id == action.id;\r\n\t\t});\r\n\t\tlet cUser = cUsers.length > 0 ? {id: action.id} : {...state.current_user}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: cUser\r\n\t\t}\t\t\r\n    default:\r\n      return state;\r\n  }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Card from 'react-bootstrap/Card';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst UserModal = (data) => {\t\t\r\n\tlet customFieldsValue = {\r\n\t\tlogin: \"\",\r\n\t\tpass: \"\",\r\n\t\tname: \"\"\r\n\t};\r\n\tlet customFieldsError = {\r\n\t\tlogin: false,\r\n\t\tpass: false,\r\n\t\tname: false\r\n\t};\t\r\n\tlet requiredFields = {\r\n\t\tname: data.addPage,\r\n\t\tlogin: data.signIn,\r\n\t\tpass: data.signIn,\r\n\t\t\r\n\t}\r\n\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [fbData, setFbData] = useState(false);\r\n\tconst [fieldsValue, setFieldsValue] = useState({...customFieldsValue});\r\n\tconst [fieldsErrors, setFieldsErrors] = useState({...customFieldsError});\r\n\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\t\r\n\t\r\n\tconst responseFacebookCallback = (response)=>{\r\n\t\tresponse && typeof data.fb === \"function\" && data.fb(response);\r\n\t\thandleClose();\t\r\n\t\tclearFields();\r\n\t}\t\r\n\t\r\n\tlet validateFields = ()=>{\r\n\t\tlet res = true;\r\n\t\tlet errors = {};\r\n\t\tfor(let key in requiredFields){\r\n\t\t\tif(requiredFields[key]){\r\n\t\t\t\tlet isError = fieldsValue[key].trim().length == 0;\t\t\t\t\r\n\t\t\t\terrors[key] = isError;\r\n\t\t\t\tif(isError){\r\n\t\t\t\t\tres = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\terrors[key] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFieldsErrors({\r\n\t\t\t...errors\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn res;\r\n\t}\t\r\n\tlet clearFields = ()=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...customFieldsValue\r\n\t\t})\t\t\r\n\t}\r\n\tlet handleFieldValueChange = (e)=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...fieldsValue,\r\n\t\t\t[e.target.getAttribute(\"name\")]: e.target.value\r\n\t\t})\r\n\t\tsetFieldsErrors({\r\n\t\t\t...customFieldsError\r\n\t\t});\r\n\t}\r\n\tlet signIn = \"\";\r\n\tlet signUp = \"\";\r\n\tlet sureRemove = \"\";\t\r\n\tlet sureRemovePdf = \"\";\t\r\n\tlet fb = \"\";\r\n\tlet addPage = \"\";\r\n\tif(data.signIn){\r\n\t\tsignIn = <Card><Card.Body>\r\n\t\t\t<Card.Title>Login or Register <small>(if you don't have an account)</small></Card.Title>\r\n\t\t\t<Card.Text>\r\n\t\t\t<div><Form.Control size=\"sm\" name=\"login\" type=\"text\" value={fieldsValue.login} placeholder=\"Login\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.login ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t<div>\r\n\t\t\t<Form.Control size=\"sm\" name=\"pass\" type=\"password\" value={fieldsValue.pass} placeholder=\"Password\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.pass ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t</Card.Text>\r\n\t\t</Card.Body></Card>;\r\n\t\tfb = <FacebookLogin\t\t\t\r\n\t\t\tappId=\"176592233585640\"\r\n\t\t\tautoLoad={false}\r\n\t\t\tfields=\"name,email,picture\"\r\n\t\t\t\r\n\t\t\tcallback={responseFacebookCallback}\r\n\t\t\tversion=\"3.1\"\r\n\t\t\tcssClass=\"my-facebook-button-class\"\r\n\t\t\ticon=\"fa-facebook\"\r\n\t\t  />;\r\n\t}\r\n\r\n\tif(data.sureRemove){\r\n\t\tsureRemove = <div>Are you sure? You won't be able to recover this page! </div>;\r\n\t}\r\n\tif(data.sureRemovePdf){\r\n\t\tsureRemovePdf = <div>Are you sure? You won't be able to recover this Pdf and all pages created from this Pdf will be removed! </div>;\r\n\t}\t\r\n\tif(data.addPage){\r\n\t\taddPage = <div><Form.Control size=\"sm\" type=\"text\" name=\"name\" value={fieldsValue.name} placeholder=\"Name\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.name ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t}\r\n\r\n\treturn (\r\n    <>\r\n      <Button size={data.button.large ? \"lg\" : \"sm\"} variant=\"primary\" onClick={handleShow}>\r\n\t\t  {data.button.icon ? <FontAwesomeIcon icon={data.button.icon} /> : \"\"} \r\n\t\t\t{data.button.title}\r\n      </Button>\r\n\r\n      <Modal show={show} onHide={handleClose} animation={false}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{data.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n\t\t\t{signIn} \r\n\t\t\t{fb}\r\n\t\t\t{signUp}\r\n\t\t\t{sureRemove}\r\n\t\t\t{sureRemovePdf}\r\n\t\t\t{addPage}\r\n\t\t</Modal.Body>\r\n        <Modal.Footer>\r\n\t\t\t{data.buttons.map((but, index)=>{\r\n\t\t\t\treturn (<Button size=\"sm\" key={index}  variant=\"primary\" onClick={()=>{\r\n\t\t\t\t\tif(validateFields()){\r\n\t\t\t\t\t\ttypeof but.func === \"function\" && but.func(fieldsValue);\r\n\t\t\t\t\t\thandleClose();\t\r\n\t\t\t\t\t\tclearFields();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{but.title}\r\n\t\t\t\t</Button>);\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\t);\r\n}\t\r\n\r\n\r\nexport default UserModal;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faChevronRight, faCalendarAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { changeActivePdf, removePdf } from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nlet PdfView = ({pdf, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemovePdf: true,\r\n\t\ttitle: \"Remove PDF File\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove PDF\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePdf(pdf.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item className={pdf.is_active ? \"list-group-item-primary\" : \"\"}>\t\t\t\r\n\t\t\t<div className=\"itemTitle\"><Button variant=\"link\"  onClick={e => {\r\n\t\t\t\te.preventDefault();\t\r\n\t\t\t\tdispatch(changeActivePdf(pdf.index));\r\n\t\t\t}}><span>{pdf.path} <FontAwesomeIcon icon={faChevronRight} /></span></Button></div>\t\r\n\t\t\t<div className=\"absBtns\">\r\n\t\t\t{pdf.current_user.id !== null && pdf.user && pdf.current_user.id == pdf.user.id ?\r\n\t\t\t\t<ButtonGroup ><UserModal {...signModalRemoveObj} /></ButtonGroup>\r\n\t\t\t\t: <></>\r\n\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"calendarBlock\">\r\n\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t{pdf.user ?  <div><small>Loaded by {pdf.user.id == pdf.current_user.id ? \"you\" : pdf.user.name} {pdf.load_date}</small>\r\n\t\t\t\t<div><small>Last pages edits - {pdf.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPdfView = connect()(PdfView);\r\nexport default PdfView;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios, { post } from 'axios';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addPdf} from '../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst FileUploader = connect(mapStateToProps)(({ current_user, dispatch }) => {\r\n\tconst [file, setFile] = useState(null);\r\n\tconst [loader, setLoader] = useState(null);\r\n\tconst [modal, setModal] = useState({\r\n\t\tshow: false,\r\n\t\ttitle: \"\",\r\n\t\ttext: \"\"\r\n\t});\r\n\t\r\n\tlet fileUp = (file)=>{\r\n\t\tconst url = '/upload.php';\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('file',file)\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n            'content-type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn  post(url, formData,config)\r\n\t}\r\n\t\r\n\tlet onFormSubmit = (e)=>{\r\n\t\te.preventDefault() \r\n\t\tfile && setLoader(true);\r\n\t\tfileUp(file).then((response)=>{\t\r\n\t\t\tsetLoader(false);\r\n\t\t\tlet result = response.data;\r\n\t\t\tif(result.error == false){\r\n\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\tlet onChange = (e)=> {\r\n\t\tsetFile(e.target.files[0]);\t\r\n\t\tif(e.target.files[0]){\r\n\t\t\tsetLoader(true);\r\n\t\t\tfileUp(e.target.files[0]).then((response)=>{\t\t\t\t\r\n\t\t\t\tsetLoader(false);\r\n\t\t\t\tlet result = response.data;\r\n\t\t\t\tif(result.error == false){\r\n\t\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t\t}));\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsetModal({...modal, show: true, title: \"File Upload Error\", text: (\"File wasn't loaded. \" + result.error) });\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => { setLoader(false); setModal({...modal, show: true, title: \"File Upload Error\", text: \"File wasn't loaded. Somthing went wrong...\"});});\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t<form onSubmit={onFormSubmit}>\r\n\t\t\t<h6>Upload PDF File</h6>\r\n\t\t\t{ loader ? <span>\r\n\t\t\t\t\t<Spinner animation=\"border\" variant=\"secondary\" />\r\n\t\t\t\t\tWait please, File is Loading...\r\n\t\t\t\t</span> : <>\r\n\t\t\t\t  <div className=\"custom-file\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tclassName=\"custom-file-input\"\r\n\t\t\t\t\t\tid=\"inputGroupFile01\"\r\n\t\t\t\t\t\taria-describedby=\"inputGroupFileAddon01\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"custom-file-label\" size=\"sm\" htmlFor=\"inputGroupFile01\">\r\n\t\t\t\t\t  Choose file\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<button type=\"submit\" style={{\"display\": \"none\"}}>Upload</button>\r\n\t\t\t\t  </div>\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t  </>\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t</form>\r\n\t\t<Modal show={modal.show} onHide={()=>{setModal({...modal, show: false})}}>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title>{modal.title}</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>{modal.text}</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"primary\" onClick={()=>{setModal({...modal, show: false})}} >\r\n\t\t\t\t\tOk\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\t\r\n\t\t</>\r\n)});\r\n\r\n\r\nexport default FileUploader;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport UserModal from './UserModal';\r\nimport PdfView from './PdfView';\r\nimport FileUploader from './FileUploader';\r\nimport { signForm, signFB} from '../actions';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst PdfBlock = connect(mapStateToProps)(({ pdfs, active_pdf_index, users, current_user , dispatch}) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\r\n\t\ttitle: \"Login or Register to Upload File\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register to Upload PDF File\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: (fieldsData)=>{\r\n\t\t\t\tdispatch(signForm(fieldsData));\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t<ListGroup.Item className=\"topItem\">{current_user.id == null ? <UserModal {...signModalObj} /> : <FileUploader/>}</ListGroup.Item>\r\n\t\t<div className=\"scrollBlock\">\r\n\t\t{pdfs.sort((a,b)=>{\r\n\t\t\tlet d1 = new Date(a.last_edit_date);\r\n\t\t\tlet d2 = new Date(b.last_edit_date);\r\n\t\t\treturn +d1 > +d2 ? -1 : +d1 < +d2 ? 1 : 0;\r\n\t\t}).map((pdfItem, index) => {\t\r\n\t\t\tlet pdfUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == pdfItem.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pdfUsers.length > 0 ? pdfUsers[0] : null;\r\n\t\t\tlet pdf = {\r\n\t\t\t\t...pdfItem,\r\n\t\t\t\tis_active: index === active_pdf_index,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PdfView key={index} {...{pdf: pdf}} />\r\n\t\t\t)}\r\n\t\t)}\r\n\t\t{pdfs.length == 0 ? <ListGroup.Item>Don't have any PDF Files</ListGroup.Item> : <></> }\r\n\t\t</div>\r\n\t</ListGroup>\r\n)});\r\n\r\n\r\nexport default PdfBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route,Link } from 'react-router-dom';\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { removePage, changePdfDate} from '../actions';\r\nimport UserModal from './UserModal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit, faCalendarAlt, faChevronRight } from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet PageView = ({page, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Book\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove Book\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tdispatch(removePage(page.id));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item>\t\t\t\t\r\n\t\t\t<div className=\"itemTitle\"><Link to={\"/pages/\" +page.id}><span>{page.name}</span> <FontAwesomeIcon icon={faChevronRight} /></Link></div>\r\n\t\t\t<div className=\"absBtns\">\t\t\t\r\n\t\t\t{ page.user && page.user.id == page.current_user.id ? <ButtonGroup><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"calendarBlock\">\r\n\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small>\r\n\t\t\t\t<div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPageView = connect()(PageView);\r\nexport default PageView;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addNewPage, signFormAndAddNewPage, changePdfDate, signFB, signForm} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\nimport PageView from './PageView';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\t\r\n\treturn {\t\r\n\t\t\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\t\t\r\n\t};\r\n};\r\n\r\n\r\nlet PageBlock = connect(mapStateToProps)(({ pages, pdfs, active_pdf_index, users, current_user, dispatch }) => {\r\n\tlet activePdfId = pdfs.length > 0 ? pdfs[active_pdf_index].id : null;\r\n\tlet activePdfPath = pdfs.length > 0 ? pdfs[active_pdf_index].path : null;\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn activePdfId == item.pdf_id;\r\n\t});\t\r\n\tlet handleAddNewPage = ()=>{\r\n\t\t\r\n\t}\r\n\tlet addPageObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Create New Book\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Create New Book\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Create New Book\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(addNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}]\t\t\r\n\t}\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: true,\r\n\t\taddPage: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\ttitle: \"Login or Register to Create New Book\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register to Create New Book\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\t//dispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(signForm({\r\n\t\t\t\t\tlogin: fieldsValue.login,\r\n\t\t\t\t\tpass: fieldsValue.pass\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\treturn\t(<>\r\n\t\t{pdfs.length > 0 ?\r\n\t\t<ListGroup className=\"list-group-flush\">\r\n\t\t\t\r\n\t\t\t<ListGroup.Item className=\"topItem\">\r\n\t\t\t{current_user.id !== null ? <UserModal {...addPageObj} />\t :\t<UserModal {...signModalObj} />\t}\r\n\t\t\t{activePages.length > 0 && activePdfPath !== null ? <div className=\"topItemText\">Books, created from  {activePdfPath}: </div> : <></>}\r\n\t\t\t</ListGroup.Item>\r\n\t\t\t<div className=\"scrollBlock\">\r\n\t\t\t{activePages.sort((a,b)=>{\r\n\t\t\tlet d1 = new Date(a.last_edit_date);\r\n\t\t\tlet d2 = new Date(b.last_edit_date);\r\n\t\t\treturn +d1 > +d2 ? -1 : +d1 < +d2 ? 1 : 0;\r\n\t\t}).map((page, index) => {\t\r\n\t\t\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\t\t\treturn us.id == page.user_id;\r\n\t\t\t\t});\r\n\t\t\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\t\t\tlet activePage = {\r\n\t\t\t\t\t...page,\r\n\t\t\t\t\tuser: user,\r\n\t\t\t\t\tcurrent_user: current_user\r\n\t\t\t\t}\r\n\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t<PageView key={index} {...{page: activePage}} />\r\n\t\t\t\t)}\r\n\t\t\t)}\r\n\t\t\t{activePages.length == 0 ? <ListGroup.Item>Don't have any Books</ListGroup.Item> : <></> }\r\n\t\t\t</div>\t\t\r\n\t\t</ListGroup>\r\n\t: <></>\r\n\t}\r\n</>)\r\n\r\n\t\r\n});\r\n\r\nexport default PageBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nimport PdfBlock from './PdfBlock';\r\nimport PageBlock from './PageBlock';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index\r\n  };\r\n};\r\n\r\n\r\nconst Blocks = connect(mapStateToProps)(({ pdfs, active_pdf_index }) => {\r\n\treturn(\r\n\t\t<>\t\t\t\r\n\t\t\t<Col><Row><div className=\"blockBorder\"><PdfBlock /></div></Row></Col>\r\n\t\t\t<Col><Row><div className=\"blockBorder\"><PageBlock /></div></Row></Col>\r\n\t\t</>\t\t\r\n)});\r\n\r\n\r\nexport default Blocks;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronUp, faChevronDown} from '@fortawesome/free-solid-svg-icons'\r\n\r\nlet ImagesPaginator = ({images,activeIndex, items, onPageChange, pageId}) => {\t\r\n\tconst [activePage, setActivePage] = useState(0);\r\n\tconst [activeItem, setActiveItem] = useState(0);\r\n\tconst [activeImages, setActiveImages] = useState(images);\r\n\t\r\n\tlet setPage = (e, type)=>{\r\n\t\te.preventDefault();\r\n\t\tlet pages = parseInt(images.length/items);\r\n\t\tlet aPage = type == \"next\" ? activePage < pages ? activePage+1 : 0 :\r\n\t\tactivePage == 0 ? pages : activePage-1;\r\n\t\tsetActivePage(aPage);\t\r\n\t\t\t\t\r\n\t\tif(!(activeItem >= items*aPage && activeItem < (items * aPage + items))){\t\t\r\n\t\t\tlet activeInd = items*aPage;\r\n\t\t\tsetActiveItem(activeInd);\r\n\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tlet aPage = activePage;\r\n\t\r\n\t\tconsole.log(activeIndex, \"activeIndex\");\r\n\t\tif(activeIndex > 0){\r\n\t\t\tsetActiveItem(activeIndex);\r\n\t\t\t//typeof onPageChange == \"function\" && onPageChange({selected: activeIndex});\r\n\t\t\tif(activeIndex > (items * activePage + items)){\r\n\t\t\t\taPage = parseInt(activeIndex/items);\r\n\t\t\t\tsetActivePage(aPage);\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\t\r\n\t\tconsole.log(\"--pag->>>\");\r\n\t},[images]);\t\r\n\t\r\n\treturn (\r\n\t\t<div className=\"imagePreviewsContainer\">\r\n\t\t\t{images.length < items ? <></> : <div className=\"imagePreviewsPrev\" onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"prev\");\r\n\t\t\t\t}}><FontAwesomeIcon icon={faChevronUp} /></div>}\r\n\t\t\t\r\n\t\t\t<div className=\"imagePreviews\">\t\t\t\r\n\t\t\t{activeImages.map((img, index)=>{\t\t\t\t\r\n\t\t\t\tlet src = img.replace(\".png\", \"_preview.png\").replace(\".jpg\", \"_preview.jpg\");\r\n\t\t\t\treturn <div onClick={(e)=>{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlet activeInd = items * activePage + index;\r\n\t\t\t\t\tsetActiveItem(activeInd);\r\n\t\t\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\r\n\t\t\t\t}} className={activeItem == (items * activePage + index) ? \"active imagePreview\" : \"imagePreview\"}>\r\n\t\t\t\t\t<img src={src}/>\r\n\t\t\t\t\t<span className=\"imagePreviewNumber\"><span>{items * activePage + index+1}</span></span></div>\r\n\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t{images.length < items ? <></> : <div onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"next\");\r\n\t\t\t\t}} className=\"imagePreviewsNext\"><FontAwesomeIcon icon={faChevronDown} /></div>}\t\t\t\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default  ImagesPaginator;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditableField = connect(mapStateToProps)(({text , saveTextFunction}) => {\r\n\tconst customButtonsVisibility = {\r\n\t\tedit: \"inline-block\",\r\n\t\tsave: \"none\"\r\n\t};\r\n\tconst customFieldSize = {\r\n\t\theight: 0,\r\n\t\twidth: 0\r\n\t}\r\n\tconst [fieldText, setFieldText] = useState(\"\");\r\n\tconst [fieldSize, setFieldSize] = useState({...customFieldSize});\r\n\tconst [wrapperRef, setWrapperRef] = useState(null);\r\n\tconst [textRef, setTextRef] = useState(null);\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility})\r\n\r\n\tlet handleClickOutside = (e)=>{\r\n\t\tif (wrapperRef && !wrapperRef.contains(e.target)) {\r\n\t\t\tsetFieldText(\"\");\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\tedit: \"inline-block\",\r\n\t\t\t\tsave: \"none\"\r\n\t\t\t});\r\n\t\t\tsetFieldSize({...customFieldSize});\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t}\t\t\r\n\t}\r\n\tlet handleEditField = (e)=>{\t\t\r\n\t\te.preventDefault();\r\n\t\tlet rect = textRef.getBoundingClientRect();\r\n\t\tconsole.log(rect, \"rexr\");\r\n\t\tsetFieldText(text);\r\n\t\tsetButtonsVisibility({\r\n\t\t\tedit: \"none\",\r\n\t\t\tsave: \"inline-block\"\r\n\t\t});\r\n\t\tsetFieldSize({\r\n\t\t\twidth: rect.width + 10,\r\n\t\t\theight: rect.height + 10\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t}\r\n\tlet handleChangeField = (e)=>{\r\n\t\tsetFieldText(e.target.value);\r\n\t}\r\n\tlet handleSave = (e)=>{\r\n\t\tif(fieldText.trim().length > 0 && typeof saveTextFunction == \"function\"){\r\n\t\t\tsaveTextFunction(fieldText);\r\n\t\t\tsetFieldText(\"\");\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\tedit: \"inline-block\",\r\n\t\t\t\tsave: \"none\"\r\n\t\t\t});\t\t\t\r\n\t\t}\t\r\n\t\tsetFieldSize({...customFieldSize});\r\n\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t}\r\n\t\t\r\n\t\r\n\treturn(\r\n\t<>\r\n\t\t<div className=\"editableFieldParent\" ref={setWrapperRef}>\r\n\t\t\t<div className=\"editableFieldValue\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.edit\r\n\t\t\t}} ref={setTextRef} onClick={handleEditField}>{text}</div>\r\n\t\t\t<textarea style={{\r\n\t\t\t\t\"display\": buttonsVisibility.save,\r\n\t\t\t\t\"width\": fieldSize.width,\r\n\t\t\t\t\"height\": fieldSize.height\r\n\t\t\t}} className=\"editableFieldField\" value={fieldText} onChange={handleChangeField}></textarea>\r\n\t\t\t<Button size=\"sm\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.edit\r\n\t\t\t}} onClick={handleEditField}><FontAwesomeIcon icon={faEdit} />Edit</Button>\r\n\t\t\t<Button size=\"sm\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.save\r\n\t\t\t}} onClick={handleSave} >Save</Button>\r\n\t\t</div>\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditableField);","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport Alert  from 'react-bootstrap/Alert';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport UserModal from './UserModal';\r\nimport ImagesPaginator from './ImagesPaginator';\r\nimport EditableField from './EditableField';\r\n\r\nimport { hasSomeParentTheClass, formatDate } from '../helper';\r\n\r\nimport { changeTextValue, removeTextValue , addNewTextValue, \r\n\t\tremoveMessage, addNewMessage, addFirstMessage, removePage, changePdfDate, changePageDate, changePageName} from '../actions';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faPlus, faArrowsAlt, faExclamation, faCheck, faEnvelope, faCalendarAlt} from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet EditablePageView = ({page, newTextId, dispatch}) => {\r\nconsole.log(page, \"page\");\t\r\n\tlet previewLength = parseInt(window.innerHeight/40) - 3 ;\r\n\tif(previewLength < 5){\r\n\t\tpreviewLength = 5;\r\n\t}\r\n\t\r\n\tconst customFieldState = {\r\n\t\t\"visibility\": \"hidden\",\r\n\t\t\"left\": 0,\r\n\t\t\"top\": 0,\r\n\t\t\"value\": \"\",\r\n\t\t\"width\": 0,\r\n\t\t\"height\": 0,\r\n\t\t\"imageTextId\": null\r\n\t};\r\n\tconst customButtonsVisibility = {\r\n\t\t\"remove\": \"visible\",\r\n\t\t\"move\": \"visible\",\r\n\t\t\"warning\": \"visible\",\r\n\t\t\"ok\": \"visible\",\r\n\t\t\"message\": \"visible\"\r\n\t};\r\n\tconst customButtonsStatus = {\r\n\t\t\"warning\": false,\r\n\t\t\"ok\": false,\r\n\t\t\"message\": true\r\n\t};\r\n\tlet startImageIndex = 0;\r\n\tlet hash = window.location.hash;\r\n\tif(hash.indexOf(\"#page_\") !== -1){\r\n\t\tlet pageNum = parseInt(hash.replace(\"#page_\", \"\"));\t\t\t\r\n\t\tif(!isNaN(pageNum) && pageNum > 0 && pageNum < page.pdf.images.length){\r\n\t\t\tstartImageIndex = pageNum;\t\t\t\t\t\r\n\t\t}\r\n\t}\t\t\r\n\tconsole.log(startImageIndex, \"startImageIndex\");\r\n\tconst canvasRef = useRef(null);\r\n\tconst [imageTexts, setImageTexts] = useState([]);\r\n\tconst [activeMessages, setActiveMessages] = useState([]);\t\r\n\tconst [activeMessageText, setActiveMessageText] = useState(\"\");\t\r\n\tconst [imageIndex, setImageIndex] = useState(startImageIndex);\r\n\tconst [fieldData, setFieldData] = useState({...customFieldState});\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility});\r\n\tconst [buttonsStatus, setButtonsStatus] = useState({...customButtonsStatus});\r\n\tconst [isMove, setMovingMode] = useState(false);\t\r\n\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Book\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove Book\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePage(page.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\tlet handlePageChange = (pageData)=>{\t\r\n\t\tsetImageIndex(pageData.selected);\t\t\r\n\t};\r\n\tlet handleFieldTextChange = (e)=>{\t\r\n\t\t\r\n\t\tsetFieldData({\r\n\t\t\t...fieldData,\r\n\t\t\t\"value\": e.target.value\r\n\t\t});\t\t\t\r\n\t\tif(e.target.value.trim().length > 0){\t\t\t\r\n\t\t\tif(fieldData.imageTextId == null){\r\n\t\t\t\tdispatch(addNewTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t\tsetButtonsVisibility({\r\n\t\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\t\tremove: \"visible\"\r\n\t\t\t\t});\t\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId,\r\n\t\t\t\t\t\"value\": e.target.value\r\n\t\t\t\t});\t\r\n\t\t\t\tlet value = e.target.value;\r\n\t\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(changeTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t}\t\r\n\t};\r\n\tlet handleFieldTextRemove = (e)=>{\t\t\t\t\r\n\t\tdispatch(removeTextValue(fieldData.imageTextId));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetFieldData({...customFieldState});\r\n\t\trenderImage();\r\n\t};\t\t\t\r\n\tlet handleImageTextsClick = (e)=>{\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageText\") && !hasSomeParentTheClass(e.target, \"imageTextFileldParent\")){\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\tremove: \"hidden\",\r\n\t\t\t\tok: \"hidden\",\r\n\t\t\t\twarning: \"hidden\"\r\n\t\t\t});\r\n\t\t\tsetButtonsStatus({...customButtonsStatus});\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...customFieldState,\r\n\t\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\t\"width\": 120,\r\n\t\t\t\t\"height\": 30,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\r\n\t\t\tsetActiveMessages([]);\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\r\n\t};\r\n\tlet handleFileldMouseDown = (e)=>{\r\n\t\tconsole.log(\"handleFileldMouseDown\");\r\n\t\tsetMovingMode(true);\r\n\t};\r\n\tlet handleFileldMouseUp = (e)=>{\r\n\t\tconsole.log( \"handleFileldMouseUp\");\r\n\t\tsetMovingMode(false);\r\n\t};\r\n\tlet handleFileldMouseMove = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\t\r\n\t\tconsole.log(isMove, \"is move\");\r\n\t\tif(isMove){\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tconsole.log(rect.x, e.clientX, \"-----\");\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...fieldData,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\t\r\n\t\t\tdispatch(changeTextValue({\r\n\t\t\t\ttext: fieldData.value, \r\n\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\tmax_width: fieldData.max_width,\r\n\t\t\t\tx: fieldData.left,\r\n\t\t\t\ty: fieldData.top\r\n\t\t\t}));\r\n\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\r\n\t\t}\r\n\t};\r\n\tlet handleFieldTextWarning = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.warning ? null : \"warning\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: !buttonsStatus.warning,\r\n\t\t\tok: buttonsStatus.warning ?  buttonsStatus.ok : false\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleFieldTextOk = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.ok ? null : \"ok\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: buttonsStatus.ok ?  buttonsStatus.warning : false,\r\n\t\t\tok: !buttonsStatus.ok\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t\t\r\n\t};\r\n\tlet handleFieldTextMessageVisibility = ()=>{\r\n\t\tsetButtonsStatus({\r\n\t\t\t...buttonsStatus,\r\n\t\t\tmessage: !buttonsStatus.message\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleActiveMessagesRemove = (e, msg)=>{\r\n\t\t\r\n\t\tdispatch(removeMessage(msg.id));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t\tlet messages = page.texts.filter((txt)=>{\r\n\t\t\t\treturn txt.id == fieldData.imageTextId;\r\n\t\t\t})[0].messages;\r\n\t\t\tsetActiveMessages([\r\n\t\t\t\t...messages\r\n\t\t\t]);\t\t\t\t\t\r\n\t\t});\t\t\t\r\n\t};\r\n\tlet handleAddNewMessage = (e)=>{\t\t\t\r\n\t\tif(/*e.keyCode == 13 && e.shiftKey == false &&*/ activeMessageText.trim().length > 0){\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\tlet text_id = fieldData.imageTextId;\r\n\t\t\tif(fieldData.imageTextId == null){\t\t\t\t\r\n\t\t\t\tdispatch(addFirstMessage({\r\n\t\t\t\t\ttext: \"\", \r\n\t\t\t\t\tmax_width: 0,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id,\r\n\t\t\t\t\tmsgText: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate()\t\t\t\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId\r\n\t\t\t\t});\t\r\n\t\t\t\ttext_id = newTextId;\r\n\t\t\t\tconsole.log(newTextId, \"newTextId\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(addNewMessage({\r\n\t\t\t\t\ttext: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate(),\r\n\t\t\t\t\ttext_id: fieldData.imageTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: text_id, visibility: \"hidden\"})]);\r\n\t\t\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\t\t\treturn txt.id == text_id;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(texts.length > 0){\t\t\t\t\t\r\n\t\t\t\t\tsetActiveMessages([\r\n\t\t\t\t\t\t...texts[0].messages\r\n\t\t\t\t\t]);\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetActiveMessageText(\"\");\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t}\t\t\r\n\t};\r\n\tlet handleActiveMessageText = (e)=>{\r\n\t\tsetActiveMessageText(e.target.value);\t\r\n\t};\r\n\tlet imageTextFieldBlur = (e)=>{\t\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageTexts\")){\r\n\t\t\tsetMovingMode(false);\r\n\t\t\tsetFieldData({...customFieldState});\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\t\t\t\r\n\t}\r\n\tlet imageTextClick = (e, imageTextId, imageTextStatus, messages, text)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\r\n\t\t\r\n\t\tsetMovingMode(false);\r\n\t\tsetButtonsVisibility({...customButtonsVisibility});\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: imageTextStatus == \"warning\",\r\n\t\t\tok: imageTextStatus == \"ok\",\r\n\t\t});\r\n\t\tlet rect = e.currentTarget.getBoundingClientRect();\r\n\t\tsetFieldData({\r\n\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\"left\": e.currentTarget.offsetLeft,\r\n\t\t\t\"top\": e.currentTarget.offsetTop,\r\n\t\t\t\"value\": text,\r\n\t\t\t\"width\": rect.width + 30,\r\n\t\t\t\"height\": rect.height > 30 ? rect.height : 30,\r\n\t\t\t\"imageTextId\": imageTextId\r\n\t\t});\r\n\t\tsetActiveMessages([\r\n\t\t\t...messages\r\n\t\t]);\r\n\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: imageTextId, visibility: \"hidden\"})]);\r\n\t}\r\n\tlet renderImage = ()=>{\r\n\t\tconst canvas = canvasRef.current;\r\n\t\tconst ctx = canvas.getContext('2d');\t\t\t\t\r\n\t\tconst image = new Image();\r\n\t\timage.src = page.pdf.images[imageIndex];\r\n\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tlet w = 1000;\r\n\t\t\t\tlet h = (w * image.height) / image.width;\r\n\t\t\t\tctx.canvas.width  = w;\r\n\t\t\t\tctx.canvas.height = h;\t\t\t\r\n\t\t\t\tctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\t\tctx.drawImage(image, 0, 0, w, h);\t\t\t\r\n\t\t\t\tsetImageTexts(getTexts());\t\t\r\n\t\t\t\tresolve({status: 'ok'});\r\n\t\t\t};\t\t\t\t\r\n\t\t});\t\r\n\t}\r\n\tlet setTextsVisibility = (texts, activeTxt)=>{\r\n\t\treturn texts.map((txt)=>{\t\r\n\t\t\tlet visibility = \"visible\";\r\n\t\t\tif(activeTxt !== undefined && txt.id == activeTxt.id){\r\n\t\t\t\tvisibility  = activeTxt.visibility;\r\n\t\t\t}\r\n\t\t\ttxt.visibility = visibility;\r\n\t\t\treturn txt;\r\n\t\t});\t\t\t\r\n\t}\t\r\n\tlet getTexts = ()=>{\r\n\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\treturn txt.image_index == imageIndex;\r\n\t\t});\r\n\t\ttexts.forEach((txt)=>{\r\n\t\t\ttxt.messages = page.messages.filter((msg)=>{\r\n\t\t\t\treturn msg.text_id == txt.id;\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\treturn setTextsVisibility(texts);\t\t\r\n\t}\r\n\tlet handleChangePageName = (name)=>{\r\n\t\tconsole.log(\"new name\", name);\r\n\t\t\r\n\t\tdispatch(changePageName(page.id, name));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\trenderImage(imageIndex);\r\n\t\tconsole.log(\"---ed--->>>\");\r\n\t}, [imageIndex]);\r\n\t\r\n\treturn (\r\n\t\t<Container onClick={imageTextFieldBlur}>\r\n\t\t\t<Row>\r\n\t\t\t\t{page.user && page.user.id == page.current_user.id ? <div className=\"removeBookBtnParent\"><ButtonGroup className=\"removeBookBtn\"><UserModal {...signModalRemoveObj} /></ButtonGroup></div> : <></>}\r\n\t\t\t\t<div><h2 className=\"bookPageTitle\">{page.user && page.user.id == page.current_user.id ? <EditableField {...{text: page.name, saveTextFunction: handleChangePageName}}/> : <>{page.name}</>} </h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div style={{width: \"100%\"}}><div className=\"calendarBlock\">\r\n\t\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t\t{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small>\r\n\t\t\t\t\t<div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div></div>\r\n\t\t\t\t\r\n\t\t\t\t<ImagesPaginator {...{images: page.pdf.images, items: previewLength, onPageChange: handlePageChange, activeIndex: imageIndex, pageId: page.id}}/>\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<div className=\"imageParent\">\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\t  ref={canvasRef}\r\n\t\t\t\t\t/>\t\r\n\t\t\t\t\t<div className=\"imageTexts\" onClick={handleImageTextsClick} /*onMouseMove={handleFileldMouseMove}*/>\r\n\t\t\t\t\t\t{imageTexts.map((txt, index) => {\t\r\n\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t<div key={index}  style={{\r\n\t\t\t\t\t\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\"zIndex\": 3,\r\n\t\t\t\t\t\t\t\t\t\"left\": txt.x,\r\n\t\t\t\t\t\t\t\t\t\"top\": txt.y,\r\n\t\t\t\t\t\t\t\t\t\"maxWidth\": txt.max_width,\r\n\t\t\t\t\t\t\t\t\t\"visibility\": txt.visibility,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": !(page.user && page.user.id == page.current_user.id) && txt.text == \"\" ? 0 : 1\r\n\t\t\t\t\t\t\t\t}}  className={txt.status ? (\"imageText \" + (txt.status + \"Text\")) : \"imageText\"} onClick={(e)=>{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\timageTextClick(e, txt.id, txt.status, txt.messages, txt.text);\r\n\t\t\t\t\t\t\t\t}}><span>{txt.text}</span>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{txt.messages.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"sm\"><FontAwesomeIcon icon={faEnvelope} />{txt.messages.length}</Button>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t: <></>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t)}\t\r\n\t\t\t\t\t\t<div className=\"imageTextFileldParent\" style={{\r\n\t\t\t\t\t\t\t\"left\": fieldData.left,\r\n\t\t\t\t\t\t\t\"top\": fieldData.top,\r\n\t\t\t\t\t\t\t\"visibility\": fieldData.visibility\r\n\t\t\t\t\t\t}}  >\r\n\t\t\t\t\t\t\t<textarea  \r\n\t\t\t\t\t\t\t\tdisabled={!(page.user && page.user.id == page.current_user.id)}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Your text...\"\r\n\t\t\t\t\t\t\t\tonChange={handleFieldTextChange}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\"width\": fieldData.value == \"\" && !(page.user && page.user.id == page.current_user.id) ? 0 : fieldData.width,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": page.user && page.user.id == page.current_user.id ? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t\"height\": fieldData.height,\r\n\t\t\t\t\t\t\t\t\t\"resize\": page.user && page.user.id == page.current_user.id ? \"both\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\t\tvalue={fieldData.value} \r\n\t\t\t\t\t\t\t\tclassName={buttonsStatus.warning ? \"form-control form-control-warning imageTextFileld\" : \r\n\t\t\t\t\t\t\t\t\t\t\tbuttonsStatus.ok ? \"form-control form-control-ok imageTextFileld\" : \"form-control imageTextFileld\"}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trows=\"1\"\r\n\t\t\t\t\t\t\t\t/*onMouseDown={handleFileldMouseDown} \r\n\t\t\t\t\t\t\t\tonMouseUp={handleFileldMouseUp} \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonDragStart={()=>{return false;}} */\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldButtons\">\r\n\t\t\t\t\t\t\t\t{page.user && page.user.id == page.current_user.id ? <Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.remove == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextRemove} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button> : <></>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.warning == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextWarning} variant={buttonsStatus.warning ? \"danger\" : \"outline-danger\"} size=\"sm\"><FontAwesomeIcon icon={faExclamation} /></Button>\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.ok == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextOk} variant={buttonsStatus.ok ? \"success\" : \"outline-success\"} size=\"sm\"><FontAwesomeIcon icon={faCheck} /></Button>\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.message == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextMessageVisibility} variant={buttonsStatus.message ? \"primary\" : \"outline-primary\"} size=\"sm\"><FontAwesomeIcon icon={faEnvelope} /></Button>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldMessageParent\" style={{\r\n\t\t\t\t\t\t\t\t\"display\": buttonsStatus.message ? \"block\" : \"none\"\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Alert variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t{activeMessages.map((msg, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet mUsers = page.users.filter((us)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn us.id == msg.user_id;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tlet mUser = mUsers.length > 0 ? mUsers[0] : null;\r\n\t\t\t\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={index} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{mUser ? <>{mUser.id == page.current_user.id ? \"you\" : mUser.name}, </>  : <>unsigned user, </> } {msg.date}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{msg.text}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{mUser && mUser.id == page.current_user.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleActiveMessagesRemove(e, msg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<div><textarea\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleActiveMessageText}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your message...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control imageTextFileldMessageField\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={activeMessageText}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup className=\"imageTextFileldMessageBtn\"> <Button className=\"simpBtn\" onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\thandleAddNewMessage(e);\r\n\t\t\t\t\t\t\t\t\t\t}} variant=\"primary\" size=\"sm\">Add Message</Button>\t</ButtonGroup>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n}\r\nEditablePageView = connect()(EditablePageView); \r\nexport default EditablePageView;\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit, faChevronLeft } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditablePage = connect(mapStateToProps)(({ pages , pdfs, texts, messages, users, current_user, history}) => {\r\n\tlet { id } = useParams();\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn item.id == id;\r\n\t});\r\n\tlet activePage = activePages.length > 0 ? activePages[0] : null;\r\n\tlet newTextId = texts && texts.length > 0 ? texts[texts.length-1].id + 1: 0;\r\n\tif(activePage !== null){\r\n\t\tlet activePdfs = pdfs.filter((pdf)=>{\r\n\t\t\treturn pdf.id == activePage.pdf_id;\r\n\t\t});\r\n\t\tlet activePdf = activePdfs.length > 0 ? activePdfs[0] : null;\r\n\t\tactivePage.pdf = activePdf;\r\n\t\tlet activeTexts = texts && texts.filter((txt)=>{\r\n\t\t\treturn txt.page_id == id;\r\n\t\t});\r\n\t\tactivePage.texts = activeTexts;\r\n\t\tif(activePage.texts){\r\n\t\t\tactivePage.messages = messages;\r\n\t\t}\t\r\n\t\tactivePage.users = users;\r\n\t\tactivePage.current_user = current_user;\r\n\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\treturn us.id == activePage.user_id;\r\n\t\t});\r\n\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\tactivePage.user = user;\r\n\t}\r\n\treturn(\r\n\t<>\r\n\t\t<Helmet>                \r\n            <title>Edit Homework {activePage !== null && activePage.pdf !== null ? (\" - \" + activePage.pdf.path + \" - \" + activePage.name) :\"\"}</title>                \r\n        </Helmet>\t\r\n\t\t<Link to=\"/\" className=\"backLink\"> <FontAwesomeIcon icon={faChevronLeft} /> Back To Home Page</Link>\t\r\n\t  {activePage === null || activePage.pdf == null ? <></> : <EditablePageView  {...{page: activePage, newTextId: newTextId}}/>}\r\n\t\t\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditablePage);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { signForm, signOutForm, signFB} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcurrent_user: state.current_user,\r\n\t\tusers: state.users\r\n\t};\r\n};\r\n\r\n\r\nlet UserBlock = connect(mapStateToProps)(({ current_user, users, dispatch }) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\ttitle: \"Login or Register\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsData){\r\n\t\t\t\tdispatch(signForm(fieldsData));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\t\r\n\tlet userData = null;\r\n\tif(current_user.id !== null){\r\n\t\tlet usersData = users.filter((us)=>{\r\n\t\t\treturn us.id == current_user.id;\r\n\t\t});\r\n\t\tuserData = usersData.length > 0 ? usersData[0] : null;\r\n\t}\r\n\treturn(\r\n\t<ListGroup className=\"topUserBlock\">\r\n\t{current_user.id == null ?\r\n\t\t<ListGroup.Item><UserModal {...signModalObj} /></ListGroup.Item>\r\n\t:\r\n\t\t<ListGroup.Item>Hello, <strong>{userData ? userData.name : \"\"}</strong> <div><Button onClick={()=>{\r\n\t\t\tdispatch(signOutForm());\r\n\t\t}} variant=\"primary\" size=\"sm\">SignOut</Button></div></ListGroup.Item>\r\n\t}\r\n\t\r\n\t</ListGroup>\r\n)});\r\n\r\nUserBlock = connect()(UserBlock);\r\nexport default UserBlock;","import React from 'react';\r\nimport {Helmet} from \"react-helmet\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {  faChevronLeft } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nconst PolicyPage = ({ }) => {\r\n\r\n\treturn(\r\n\t\t<div className=\"textPage\">\t\t\t\r\n\t\t\t<Helmet>                \r\n\t\t\t\t<title>Edit Homework - Privacy Policy</title>                \r\n\t\t\t</Helmet>\t\r\n\t\t\t<Link to=\"/\" className=\"backLink\"> <FontAwesomeIcon icon={faChevronLeft} /> Back To Home Page</Link>\t\t\t\r\n<h2>Privacy Policy</h2>\r\n<h3>1. Terms</h3>\r\n<p>By accessing the website at <a href=\"http://www.edithomework.com/\">http://www.edithomework.com/</a>, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law.</p>\r\n<h3>2. Use License</h3>\r\n<ol type=\"a\">\r\n   <li>Permission is granted to temporarily download one copy of the materials (information or software) on Edit Homework's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:\r\n   <ol type=\"i\">\r\n       <li>modify or copy the materials;</li>\r\n       <li>use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li>\r\n       <li>attempt to decompile or reverse engineer any software contained on Edit Homework's website;</li>\r\n       <li>remove any copyright or other proprietary notations from the materials; or</li>\r\n       <li>transfer the materials to another person or \"mirror\" the materials on any other server.</li>\r\n   </ol>\r\n    </li>\r\n   <li>This license shall automatically terminate if you violate any of these restrictions and may be terminated by Edit Homework at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format.</li>\r\n</ol>\r\n<h3>3. Disclaimer</h3>\r\n<ol type=\"a\">\r\n   <li>The materials on Edit Homework's website are provided on an 'as is' basis. Edit Homework makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</li>\r\n   <li>Further, Edit Homework does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site.</li>\r\n</ol>\r\n<h3>4. Limitations</h3>\r\n<p>In no event shall Edit Homework or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Edit Homework's website, even if Edit Homework or a Edit Homework authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you.</p>\r\n<h3>5. Accuracy of materials</h3>\r\n<p>The materials appearing on Edit Homework's website could include technical, typographical, or photographic errors. Edit Homework does not warrant that any of the materials on its website are accurate, complete or current. Edit Homework may make changes to the materials contained on its website at any time without notice. However Edit Homework does not make any commitment to update the materials.</p>\r\n<h3>6. Links</h3>\r\n<p>Edit Homework has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by Edit Homework of the site. Use of any such linked website is at the user's own risk.</p>\r\n<h3>7. Modifications</h3>\r\n<p>Edit Homework may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service.</p>\r\n<h3>8. Governing Law</h3>\r\n<p>These terms and conditions are governed by and construed in accordance with the laws of Ukraine and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location.</p>\r\n\t\t</div>\t\t\r\n)};\r\n\r\n\r\nexport default PolicyPage;","import React, { useState, useEffect, Component } from \"react\";\nimport { connect } from 'react-redux';\nimport axios, { post } from 'axios';\nimport {Helmet} from \"react-helmet\";\nimport { Route,Link,withRouter } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport Blocks from './components/Blocks';\nimport EditablePage from './components/EditablePage';\nimport UserBlock from './components/UserBlock';\nimport PolicyPage from './components/PolicyPage';\n\n\nimport './styles/main.scss';\n\nimport { loadPdfs, loadPages, loadMessages, loadUsers, loadTexts, loadCurrentUser} from './actions';\n\nfunction App({location, dispatch}) {\t\n\tlet getStartData = ()=>{\n\t\tconst url = '/db.php';\n\t\tlet dataItems = [[\"users\", loadUsers], [\"pages\", loadPages], [\"texts\", loadTexts], [\"pdfs\", loadPdfs], [\"messages\", loadMessages]];\n\t\tlet loadingArr = [];\n\n\t\tdataItems.forEach((item)=>{\n\t\t\tconst formData = new FormData();\t\t\n\t\t\tformData.append(\"action\", \"get\");\n\t\t\tformData.append(\"data\", \"\");\t\t\t\t\n\t\t\tformData.append(\"name\", item[0]);\n\t\t\tloadingArr.push(post(url, formData));\n\t\t});\n\t\taxios.all(loadingArr).then(axios.spread((...responses) => {\t\t\t\n\t\t\tdataItems.forEach((item, index)=>{\n\t\t\t\tlet res = responses[index];\n\t\t\t\tif(res.data.error == false){\n\t\t\t\t\tdispatch(item[1](JSON.parse(res.data.data)));\t\n\t\t\t\t}\n\t\t\t});\t\n\t\t\tlet cUserId = localStorage.getItem(\"current_user_edithomework\");\n\t\t\t\n\t\t\tif(cUserId !== null){\n\t\t\t\tdispatch(loadCurrentUser(cUserId));\n\t\t\t}\n\t\t})).catch(errors => {\n\t\t\tconsole.log(\"loading error\");\n\t\t});\t\t\t\t\n\t}\n\tuseEffect(() => {\n\t\tgetStartData();\t\t\n\t}, []);\t\t\n    return (\n\t\t<Container>\n\t\t     <Helmet>                \n                <title>Edit Homework</title>                \n            </Helmet>\n\t\t\t<Row className=\"headerBlock\">\t\n\t\t\t\t<Link className=\"mainLogoLink\" to=\"/\"><h1 className=\"mainLogo\"><span>Edit</span>Homework</h1></Link>\t\n\t\t\t\t<UserBlock />\n\t\t\t</Row>\t\n\t\t\t<Row className=\"contentBlock\">\t\t\t\n\t\t\t\t<Route exact path=\"/\" component={Blocks} />\n\t\t\t\t<Route exact path=\"/pages/:id\" component={EditablePage} />\n\t\t\t\t<Route exact path=\"/policy\" component={PolicyPage} />\n\t\t\t</Row>\t\n\t\t\t<Row className=\"bottomBlock\">\t\n\t\t\t\t<Col>EditHomework, olga@edithomework.com</Col>\n\t\t\t\t<Col style={{\"text-align\": \"right\"}}><Link to=\"/policy\">Privacy Policy</Link></Col>\t\t\t\t\t\n\t\t\t</Row>\t \t\t\t\n\t\t</Container>\n    );\n}\n\nexport default connect()(withRouter(App));\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport EditApp from './reducers';\nimport App from './App';\n\nconst store = createStore(EditApp);\nrender(\n  <Provider store={store}>\n\t<BrowserRouter>\n    <App />\n\t</BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}