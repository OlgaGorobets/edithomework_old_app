{"version":3,"sources":["actions/index.js","reducers/index.js","components/UserModal.js","components/UserBlock.js","components/PdfView.js","components/FileUploader.js","components/PdfBlock.js","components/PageView.js","components/PageBlock.js","components/Blocks.js","helper/index.js","components/EditablePageView.js","components/EditablePage.js","App.js","index.js"],"names":["CHANGE_ACTIVE_PDF","CHANGE_TEXT_VALUE","REMOVE_TEXT_VALUE","ADD_NEW_TEXT_VALUE","REMOVE_MESSAGE","ADD_NEW_MESSAGE","ADD_FIRST_MESSAGE","REMOVE_PAGE","ADD_NEW_PAGE","SIGN_FORM","SIGN_OUT_FORM","SIGN_FORM_AND_ADD_NEW_PAGE","ADD_PDF","changeTextValue","data","type","id","text","max_width","x","y","status","removePage","initialState","current_user","users","name","pass","pdfs","path","user_id","images","texts","page_id","image_index","messages","text_id","date","active_pdf_index","pages","pdf_id","UserModal","console","log","customFieldsValue","login","customFieldsError","requiredFields","addPage","signIn","useState","show","setShow","fieldsValue","setFieldsValue","fieldsErrors","setFieldsErrors","handleClose","handleFieldValueChange","e","target","getAttribute","value","sureRemove","Card","Body","Title","Text","Form","Control","placeholder","onChange","Alert","variant","Button","size","onClick","button","icon","title","Modal","onHide","animation","Header","closeButton","Footer","buttons","map","but","index","key","res","errors","isError","trim","length","validateFields","func","UserBlock","connect","state","dispatch","signModalObj","signUp","fieldsData","userData","signForm","usersData","filter","us","ListGroup","Item","PdfView","pdf","className","is_active","preventDefault","faChevronRight","faTrashAlt","user","FileUploader","file","setFile","onSubmit","formData","FormData","append","post","headers","fileUp","then","response","result","JSON","decode","error","files","PdfBlock","faPlus","pdfItem","pdfUsers","PageView","page","signModalRemoveObj","to","faEdit","ButtonGroup","PageBlock","activePdfId","activePages","item","addPageObj","pageUsers","activePage","Blocks","Col","hasSomeParentTheClass","element","classname","split","indexOf","parentNode","formatDate","d","Date","month","getMonth","day","getDate","year","getFullYear","toString","substr","EditablePageView","newTextId","customFieldState","customButtonsVisibility","customButtonsStatus","canvasRef","useRef","imageTexts","setImageTexts","activeMessages","setActiveMessages","activeMessageText","setActiveMessageText","imageIndex","setImageIndex","fieldData","setFieldData","buttonsVisibility","setButtonsVisibility","buttonsStatus","setButtonsStatus","setMovingMode","handleActiveMessagesRemove","msg","renderImage","setTextsVisibility","imageTextId","visibility","txt","ctx","current","getContext","image","Image","src","Promise","resolve","onload","h","height","width","canvas","clearRect","drawImage","getTexts","activeTxt","undefined","forEach","useEffect","Container","Row","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","marginPagesDisplayed","pageRangeDisplayed","onPageChange","pageData","selected","containerClassName","subContainerClassName","activeClassName","ref","remove","ok","warning","rect","getBoundingClientRect","clientX","clientY","style","imageTextStatus","stopPropagation","currentTarget","offsetLeft","offsetTop","imageTextClick","faEnvelope","left","top","disabled","offsetWidth","rows","faExclamation","faCheck","message","mUsers","mUser","onKeyDown","keyCode","shiftKey","msgText","addNewMessage","EditablePage","history","useParams","activePdfs","activePdf","activeTexts","withRouter","location","exact","component","store","createStore","newTexts","newMessages","newText","newMessage","newPages","newPage","cUserId","newUsers","fUsers","pageId","action","pg","newTextsIds","newPdf","render","document","getElementById"],"mappings":"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","file":"static/js/main.eea1eccf.chunk.js","sourcesContent":["export const CHANGE_ACTIVE_PDF = 'CHANGE_ACTIVE_PDF';\r\nexport const CHANGE_TEXT_VALUE = 'CHANGE_TEXT_VALUE';\r\nexport const REMOVE_TEXT_VALUE = 'REMOVE_TEXT_VALUE';\r\nexport const ADD_NEW_TEXT_VALUE = 'ADD_NEW_TEXT_VALUE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\nexport const ADD_FIRST_MESSAGE = 'ADD_FIRST_MESSAGE';\r\nexport const REMOVE_PAGE = 'REMOVE_PAGE';\r\nexport const ADD_NEW_PAGE = 'ADD_NEW_PAGE';\r\nexport const SIGN_FORM = 'SIGN_FORM';\r\nexport const SIGN_OUT_FORM = 'SIGN_OUT_FORM';\r\nexport const SIGN_FORM_AND_ADD_NEW_PAGE = 'SIGN_FORM_AND_ADD_NEW_PAGE';\r\nexport const ADD_PDF = 'ADD_PDF';\r\n\r\nexport function changeActivePdf(index) {\r\n\treturn {\r\n\t\ttype: CHANGE_ACTIVE_PDF,\r\n\t\tindex: index\r\n\t};\r\n}\r\nexport function changeTextValue(data) {\r\n\treturn {\r\n\t\ttype: CHANGE_TEXT_VALUE,\r\n\t\tid: data.id,\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tstatus: data.status\r\n\t};\r\n}\r\nexport function addNewTextValue(data) {\r\n\treturn {\r\n\t\ttype: ADD_NEW_TEXT_VALUE,\t\t\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\r\n\t};\r\n}\r\nexport function addFirstMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_FIRST_MESSAGE,\r\n\t\tuser_id: data.user_id,\t\t\r\n\t\tmsgText: data.msgText,\r\n\t\tdate: data.date,\r\n\t\t\r\n\t\ttext: data.text,\t\t\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\t\t\r\n\t};\r\n}\r\nexport function addNewMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_MESSAGE,\r\n\t\tuser_id: data.user_id,\r\n\t\ttext_id: data.text_id,\r\n\t\ttext: data.text,\r\n\t\tdate: data.date\r\n\t};\r\n}\r\nexport function addNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\r\n\t\tuser_id: data.user_id\t\r\n\t};\r\n}\r\nexport function removeTextValue(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_TEXT_VALUE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removeMessage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_MESSAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removePage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_PAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function signForm(userData) {\r\n\treturn {\r\n\t\ttype: SIGN_FORM,\r\n\t\tname: userData.login,\r\n\t\tpass: userData.pass\r\n\t};\r\n}\r\nexport function signOutForm() {\r\n\treturn {\r\n\t\ttype: SIGN_OUT_FORM\r\n\t};\r\n}\r\nexport function signFormAndAddNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FORM_AND_ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\t\t\r\n\t\t\r\n\t\tlogin: data.login,\r\n\t\tpass: data.pass\r\n\t};\r\n}\r\nexport function addPdf(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_PDF,\r\n\t\tpath: data.path,\r\n\t\timages: data.images,\r\n\t\tuser_id: data.user_id\r\n\t};\r\n}","//import { ADD_TODO } from '../actions';\r\nimport { CHANGE_ACTIVE_PDF } from '../actions';\r\nimport { CHANGE_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_TEXT_VALUE } from '../actions';\r\nimport { ADD_NEW_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_MESSAGE } from '../actions';\r\nimport { ADD_NEW_MESSAGE } from '../actions';\r\nimport { ADD_FIRST_MESSAGE } from '../actions';\r\nimport { REMOVE_PAGE } from '../actions';\r\nimport { ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM_AND_ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM } from '../actions';\r\nimport { SIGN_OUT_FORM } from '../actions';\r\nimport { ADD_PDF } from '../actions';\r\n\r\nconst initialState = {\r\n  //toDoList: [],\r\n  \r\n\tcurrent_user: {\r\n\t\tid: 0\r\n\t},\r\n\tusers: [{\r\n\t\tid: 0,\r\n\t\tname: \"Olka\",\r\n\t\tpass: \"123\"\r\n\t},\r\n\t{\r\n\t\tid: 1,\r\n\t\tname: \"Barabolka\",\r\n\t\tpass: \"123\"\r\n\t}],\r\n\tpdfs: [{\r\n\t\tpath: \"some path1\",\r\n\t\tid: 0,\r\n\t\tuser_id: 0,\r\n\t\timages: [\"/uploads/photos/photo_pdf билета.png\", \"../photos/2.jpg\", \"../photos/3.jpg\", \"../photos/4.jpg\", \"../photos/5.jpg\", \"../photos/6.jpg\", \"../photos7.jpg\", \"../photos/8.jpg\"]\r\n\t},{\r\n\t\tpath: \"some path2\",\r\n\t\tid: 1,\r\n\t\tuser_id: 0,\r\n\t\timages: [\"../photos/2.jpg\"]\r\n\t}],\r\n\ttexts: [{\r\n\t\ttext: \"testing text1\",\r\n\t\tx: 0,\r\n\t\ty:0,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 0,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: \"ok\" //\"ok\", \"warning\"\r\n\t},\r\n\t{\r\n\t\ttext: \"testing text2\",\r\n\t\tx: 100,\r\n\t\ty:100,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 1,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: null\r\n\t}\t\r\n\t],\r\n\tmessages: [{\r\n\t\tid: 0,\r\n\t\tuser_id: null,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message1\",\r\n\t\tdate: \"date1\"\r\n\t},\r\n\t{\r\n\t\tid: 1,\r\n\t\tuser_id: 0,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message2\",\r\n\t\tdate: \"date2\"\r\n\t}],\r\n\tactive_pdf_index: 0,\r\n\tpages: [{\r\n\t\tname: \"page 1\",\r\n\t\tid: 0,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t},{\r\n\t\tname: \"page 2\",\r\n\t\tid: 1,\r\n\t\tpdf_id: 1,\r\n\t\tuser_id: 0\r\n\t},{\r\n\t\tname: \"page 3\",\r\n\t\tid: 2,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t}]  \r\n};\r\n\r\nexport default function toDoApp(state = initialState, action) {\r\n\tlet newTexts, newMessages, \r\n\t\tid, newText, newMessage, \r\n\t\tnewPages, newPage, cUserId,\r\n\t\tnewUsers, fUsers, pageId;\r\n\t\r\n\tswitch (action.type) {\r\n\tcase CHANGE_ACTIVE_PDF:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tactive_pdf_index: action.index\r\n\t\t}\r\n\tcase CHANGE_TEXT_VALUE: \t\r\n\t\tnewTexts = state.texts.map((txt)=>{\t\t\t\r\n\t\t\tif(txt.id == action.id){\r\n\t\t\t\ttxt.text = action.text;\r\n\t\t\t\ttxt.max_width = action.max_width;\t\r\n\t\t\t\ttxt.x = action.x;\t\r\n\t\t\t\ttxt.y = action.y;\r\n\t\t\t\ttxt.status = action.status;\r\n\t\t\t}\r\n\t\t\treturn txt;\r\n\t\t});\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts\r\n\t\t}\r\n\tcase ADD_NEW_TEXT_VALUE: \t\t\t\r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText]\r\n\t\t}\t\r\n\tcase ADD_NEW_MESSAGE: \r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.text_id,\r\n\t\t\ttext: action.text,\r\n\t\t\tdate: action.date\t\t\t\t\r\n\t\t};\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\r\n\tcase ADD_FIRST_MESSAGE: \r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null\r\n\t\t};\t\r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.id,\r\n\t\t\ttext: action.msgText,\r\n\t\t\tdate: action.date\t\t\t\r\n\t\t};\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText],\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\t\r\n\tcase ADD_NEW_PAGE:\r\n\t\tid = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: id,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: action.user_id\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]\r\n\t\t}\t\t\t\r\n\tcase REMOVE_TEXT_VALUE: \t\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.id !== action.id;\t\r\n\t\t});\t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.text_id !== action.id;\t\r\n\t\t});\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_MESSAGE: \t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.id !== action.id;\t\r\n\t\t});\t\t\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_PAGE: \t\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.id !== action.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id !== action.id;\t\r\n\t\t});\t\r\n\t\tlet oldTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id == action.id;\t\r\n\t\t});\t\r\n\t\tlet newTextsIds = oldTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: newPages,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase SIGN_FORM:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.name && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\r\n\tcase SIGN_OUT_FORM:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: null\r\n\t\t\t}\r\n\t\t}\r\n\tcase SIGN_FORM_AND_ADD_NEW_PAGE:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.login && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.login,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\t\r\n\t\tpageId = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: pageId,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: cUserId\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t],\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\t\t\t\r\n\t\t}\r\n\tcase ADD_PDF:\r\n\t\tid = state.pdfs.length > 0 ? state.pdfs[state.pdfs.length-1].id + 1 : 0;\r\n\t\tlet newPdf = {\r\n\t\t\tid: id,\r\n\t\t\tpath: action.path,\r\n\t\t\timages: action.images,\r\n\t\t\tuser_id: action.user_id\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]\t\t\t\r\n\t\t}\r\n    default:\r\n      return state;\r\n  }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Card from 'react-bootstrap/Card';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst UserModal = (data) => {\t\r\n\tconsole.log(data, \"datatatat\");\r\n\tlet customFieldsValue = {\r\n\t\tlogin: \"\",\r\n\t\tpass: \"\",\r\n\t\tname: \"\"\r\n\t};\r\n\tlet customFieldsError = {\r\n\t\tlogin: false,\r\n\t\tpass: false,\r\n\t\tname: false\r\n\t};\t\r\n\tlet requiredFields = {\r\n\t\tname: data.addPage,\r\n\t\tlogin: data.signIn,\r\n\t\tpass: data.signIn,\r\n\t\t\r\n\t}\r\n\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [fieldsValue, setFieldsValue] = useState({...customFieldsValue});\r\n\tconst [fieldsErrors, setFieldsErrors] = useState({...customFieldsError});\r\n\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\t\r\n\tconsole.log(fieldsErrors, \"fieldsErrorsfieldsErrorsfieldsErrorsfieldsErrors\");\r\n\t\r\n\tlet validateFields = ()=>{\r\n\t\tlet res = true;\r\n\t\tlet errors = {};\r\n\t\tfor(let key in requiredFields){\r\n\t\t\tif(requiredFields[key]){\r\n\t\t\t\tlet isError = fieldsValue[key].trim().length == 0;\t\t\t\t\r\n\t\t\t\terrors[key] = isError;\r\n\t\t\t\tif(isError){\r\n\t\t\t\t\tres = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\terrors[key] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFieldsErrors({\r\n\t\t\t...errors\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn res;\r\n\t}\t\r\n\tlet clearFields = ()=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...customFieldsValue\r\n\t\t})\t\t\r\n\t}\r\n\tlet handleFieldValueChange = (e)=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...fieldsValue,\r\n\t\t\t[e.target.getAttribute(\"name\")]: e.target.value\r\n\t\t})\r\n\t\tsetFieldsErrors({\r\n\t\t\t...customFieldsError\r\n\t\t});\r\n\t\tconsole.log(fieldsErrors, \"errors\");\r\n\t\tconsole.log(e.target.getAttribute(\"name\"));\r\n\t}\r\n\tlet signIn = \"\";\r\n\tlet signUp = \"\";\r\n\tlet sureRemove = \"\";\t\r\n\tlet addPage = \"\";\r\n\tif(data.signIn){\r\n\t\tsignIn = <Card><Card.Body>\r\n\t\t\t<Card.Title>Login or Register <small>(if you don't have an account)</small></Card.Title>\r\n\t\t\t<Card.Text>\r\n\t\t\t<div><Form.Control name=\"login\" type=\"text\" value={fieldsValue.login} placeholder=\"Login\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.login ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t<div>\r\n\t\t\t<Form.Control name=\"pass\" type=\"password\" value={fieldsValue.pass} placeholder=\"Password\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.pass ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t</Card.Text>\r\n\t\t</Card.Body></Card>;\r\n\t}\r\n\t/*if(data.signUp){\r\n\t\tsignUp = <div>\r\n\t\t\t<Form.Check\r\n\t\t\t\tchecked\r\n\t\t\t\tonChange = {function(){}}\r\n\t\t\t\ttype=\"radio\"\r\n\t\t\t\tlabel=\"Sign In\"\r\n\t\t\t\tname=\"signUpRadios\"\r\n\t\t\t\tid=\"signUpRadios1\"\r\n\t\t\t/>\r\n\t\t\t<Form.Check\r\n\t\t\t\tonChange = {function(){}}\r\n\t\t\t\ttype=\"radio\"\r\n\t\t\t\tlabel=\"Sign Up\"\r\n\t\t\t\tname=\"signUpRadios\"\r\n\t\t\t\tid=\"signUpRadios2\"\r\n\t\t\t/>\r\n\t\t</div>;\r\n\t}\t*/\r\n\tif(data.sureRemove){\r\n\t\tsureRemove = <div>Are you sure? You won't be able to recover this page! </div>;\r\n\t}\r\n\tif(data.addPage){\r\n\t\taddPage = <div><Form.Control type=\"text\" name=\"name\" value={fieldsValue.name} placeholder=\"Name\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.name ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t}\r\n\t\r\n\treturn (\r\n    <>\r\n      <Button size=\"sm\" variant=\"primary\" onClick={handleShow}>\r\n\t\t  {data.button.icon ? <FontAwesomeIcon icon={data.button.icon} /> : \"\"} \r\n\t\t\t{data.button.title}\r\n      </Button>\r\n\r\n      <Modal show={show} onHide={handleClose} animation={false}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{data.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n\t\t\t{signIn} \r\n\t\t\t{signUp}\r\n\t\t\t{sureRemove}\r\n\t\t\t{addPage}\r\n\t\t</Modal.Body>\r\n        <Modal.Footer>\r\n\t\t\t{data.buttons.map((but, index)=>{\r\n\t\t\t\treturn (<Button size=\"sm\" key={index}  variant=\"secondary\" onClick={()=>{\r\n\t\t\t\t\tif(validateFields()){\r\n\t\t\t\t\t\ttypeof but.func === \"function\" && but.func(fieldsValue);\r\n\t\t\t\t\t\thandleClose();\t\r\n\t\t\t\t\t\tclearFields();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{but.title}\r\n\t\t\t\t</Button>);\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\t);\r\n}\t\r\n\r\n\r\nexport default UserModal;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { signForm, signOutForm} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcurrent_user: state.current_user,\r\n\t\tusers: state.users\r\n\t};\r\n};\r\n\r\n\r\nlet UserBlock = connect(mapStateToProps)(({ current_user, users, dispatch }) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\ttitle: \"Login or Register\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsData){\r\n\t\t\t\tdispatch(signForm(fieldsData));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\t\r\n\tlet userData = null;\r\n\tif(current_user.id !== null){\r\n\t\tlet usersData = users.filter((us)=>{\r\n\t\t\treturn us.id == current_user.id;\r\n\t\t});\r\n\t\tuserData = usersData.length > 0 ? usersData[0] : null;\r\n\t}\r\n\treturn(\r\n\t<ListGroup>\r\n\t{current_user.id == null ?\r\n\t\t<ListGroup.Item><UserModal {...signModalObj} /></ListGroup.Item>\r\n\t:\r\n\t\t<ListGroup.Item>Hello, {userData ? userData.name : \"\"} <Button onClick={()=>{\r\n\t\t\tdispatch(signOutForm());\r\n\t\t}} variant=\"primary\" size=\"sm\">SignOut</Button></ListGroup.Item>\r\n\t}\r\n\t\r\n\t</ListGroup>\r\n)});\r\n\r\nUserBlock = connect()(UserBlock);\r\nexport default UserBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faChevronRight } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { changeActivePdf } from '../actions';\r\n\r\nlet PdfView = ({pdf, dispatch}) => {\t\r\n\treturn (\r\n\t\t<ListGroup.Item className={pdf.is_active ? \"list-group-item-primary\" : \"\"}>\t\t\t\r\n\t\t\t<Button variant=\"link\"  onClick={e => {\r\n\t\t\t\te.preventDefault();\t\r\n\t\t\t\tdispatch(changeActivePdf(pdf.index));\r\n\t\t\t}}><span>{pdf.path}</span> <FontAwesomeIcon icon={faChevronRight} /></Button>\t\t\t\t\r\n\t\t\t<Button variant=\"link\"  onClick={e => {\r\n\t\t\te.preventDefault();\t\r\n\t\t\t}}><FontAwesomeIcon icon={faTrashAlt} /></Button>\r\n\t\t\t{pdf.user ?  <div><small>(Loaded by {pdf.user.id == pdf.current_user.id ? \"you\" : pdf.user.name})</small></div> : <></>}\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPdfView = connect()(PdfView);\r\nexport default PdfView;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios, { post } from 'axios';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addPdf} from '../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst FileUploader = connect(mapStateToProps)(({ current_user, dispatch }) => {\r\n\tconst [file, setFile] = useState(null);\r\n\tlet fileUp = (file)=>{\r\n\t\tconst url = '/upload.php';\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('file',file)\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n            'content-type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn  post(url, formData,config)\r\n\t}\r\n\t\r\n\tlet onFormSubmit = (e)=>{\r\n\t\te.preventDefault() // Stop form submit\r\n\t\tfileUp(file).then((response)=>{\r\n\t\t\tlet result = JSON.decode(response.data);\r\n\t\t\tconsole.log(result.error, \"result.error\");\r\n\t\t\tif(result.error === false){\r\n\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\tpath: result.file[0],\r\n\t\t\t\t\timages: result.images,\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tlet onChange = (e)=> {\r\n\t\tsetFile(e.target.files[0]);\t\t\r\n\t}\r\n\r\n\treturn(\r\n      <form onSubmit={onFormSubmit}>\r\n        <h1>File Upload</h1>\r\n        <input type=\"file\" onChange={onChange} />\r\n        <button type=\"submit\">Upload Pdf File</button>\r\n      </form>\r\n)});\r\n\r\n\r\nexport default FileUploader;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport UserModal from './UserModal';\r\nimport PdfView from './PdfView';\r\nimport FileUploader from './FileUploader';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst PdfBlock = connect(mapStateToProps)(({ pdfs, active_pdf_index, users, current_user }) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: true,\r\n\t\ttitle: \"Add PDF file\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Add PDF file\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tconsole.log(\"is ok\", pdfs);\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t{pdfs.map((pdfItem, index) => {\t\r\n\t\t\tlet pdfUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == pdfItem.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pdfUsers.length > 0 ? pdfUsers[0] : null;\r\n\t\t\tlet pdf = {\r\n\t\t\t\t...pdfItem,\r\n\t\t\t\tis_active: index === active_pdf_index,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PdfView key={index} {...{pdf: pdf}} />\r\n\t\t\t)}\r\n\t\t)}\t\t\r\n\t\t<ListGroup.Item>{current_user.id == null ? <UserModal {...signModalObj} /> : <FileUploader/>}</ListGroup.Item>\r\n\t</ListGroup>\r\n)});\r\n\r\n\r\nexport default PdfBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route,Link } from 'react-router-dom';\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { removePage} from '../actions';\r\nimport UserModal from './UserModal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet PageView = ({page, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePage(page.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item>\t\t\t\t\r\n\t\t\t<Link to={\"/pages/\" +page.id}><span>{page.name}</span> <FontAwesomeIcon icon={faEdit} /></Link>\r\n\t\t\t{ page.user && page.user.id == page.current_user.id ? <ButtonGroup className=\"mr-2\"><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t{page.user ?  <div><small>(Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name})</small></div> : <></>}\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPageView = connect()(PageView);\r\nexport default PageView;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addNewPage, signFormAndAddNewPage} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\nimport PageView from './PageView';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\t\r\n\treturn {\t\r\n\t\t\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\t\t\r\n\t};\r\n};\r\n\r\n\r\nlet PageBlock = connect(mapStateToProps)(({ pages, pdfs, active_pdf_index, users, current_user, dispatch }) => {\r\n\tlet activePdfId = pdfs.length > 0 ? pdfs[active_pdf_index].id : null;\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn activePdfId == item.pdf_id;\r\n\t});\t\r\n\tlet handleAddNewPage = ()=>{\r\n\t\t\r\n\t}\r\n\tlet addPageObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Add New Page\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Add New Page\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Add Page\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(addNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}]\t\t\r\n\t}\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: true,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Add New Page\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Add New Page\" ,\r\n\t\t\ticon: faPlus\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(signFormAndAddNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\t\r\n\t\t\t\t\tlogin: fieldsValue.login,\r\n\t\t\t\t\tpass: fieldsValue.pass\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t\tconsole.log(fieldsValue, \"fieldsValue\");\r\n\t\t\t\tconsole.log(\"is ok\", pages);\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t{activePages.map((page, index) => {\t\r\n\t\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == page.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\t\tlet activePage = {\r\n\t\t\t\t...page,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PageView key={index} {...{page: activePage}} />\r\n\t\t\t)}\r\n\t\t)}\t\t\r\n\t\t<ListGroup.Item>\r\n\t\t{current_user.id !== null ? <UserModal {...addPageObj} />\t :\t<UserModal {...signModalObj} />\t}\r\n\t\t\t\r\n\t\t</ListGroup.Item>\r\n\t</ListGroup>\r\n)});\r\n\r\nexport default PageBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Col from 'react-bootstrap/Col';\r\n\r\nimport UserBlock from './UserBlock';\r\nimport PdfBlock from './PdfBlock';\r\nimport PageBlock from './PageBlock';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index\r\n  };\r\n};\r\n\r\n\r\nconst Blocks = connect(mapStateToProps)(({ pdfs, active_pdf_index }) => {\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<Col><UserBlock /></Col>\r\n\t\t\t<Col><PdfBlock /></Col>\r\n\t\t\t<Col><PageBlock /></Col>\r\n\t\t</>\t\t\r\n)});\r\n\r\n\r\nexport default Blocks;","export function hasSomeParentTheClass(element, classname) {\r\n    if (element.className && element.className.split && element.className.split(' ').indexOf(classname)>=0) return true;\r\n    return element.parentNode && hasSomeParentTheClass(element.parentNode, classname);\r\n}\r\nexport function formatDate(date) {\r\n\tconst monthNames = [\"Jan\", \"Feb\", \"March\", \"Apr\", \"May\", \"June\",\r\n\t  \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\r\n\t];\r\n\t\r\n    let d = date ? new Date(date) : new Date(),\r\n        month = '' + monthNames[d.getMonth()],\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear().toString().substr(-2);\r\n\r\n    if (month.length < 2) \r\n        month = '0' + month;\r\n    if (day.length < 2) \r\n        day = '0' + day;\r\n\r\n    return day + \" \" + month + \",\" + year;\r\n}","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport Alert  from 'react-bootstrap/Alert';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nimport { hasSomeParentTheClass, formatDate } from '../helper';\r\n\r\nimport { changeTextValue, removeTextValue , addNewTextValue, removeMessage, addNewMessage, addFirstMessage, removePage} from '../actions';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faPlus, faArrowsAlt, faExclamation, faCheck, faEnvelope} from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet EditablePageView = ({page, newTextId, dispatch}) => {\r\nconsole.log(page, \"page\");\t\r\n\tconst customFieldState = {\r\n\t\t\"visibility\": \"hidden\",\r\n\t\t\"left\": 0,\r\n\t\t\"top\": 0,\r\n\t\t\"value\": \"\",\r\n\t\t\"width\": 0,\r\n\t\t\"height\": 0,\r\n\t\t\"imageTextId\": null\r\n\t};\r\n\tconst customButtonsVisibility = {\r\n\t\t\"remove\": \"visible\",\r\n\t\t\"move\": \"visible\",\r\n\t\t\"warning\": \"visible\",\r\n\t\t\"ok\": \"visible\",\r\n\t\t\"message\": \"visible\"\r\n\t};\r\n\tconst customButtonsStatus = {\r\n\t\t\"warning\": false,\r\n\t\t\"ok\": false,\r\n\t\t\"message\": true\r\n\t};\r\n\t\r\n\t\r\n\tconst canvasRef = useRef(null);\r\n\tconst [imageTexts, setImageTexts] = useState([]);\r\n\tconst [activeMessages, setActiveMessages] = useState([]);\t\r\n\tconst [activeMessageText, setActiveMessageText] = useState(\"\");\t\r\n\tconst [imageIndex, setImageIndex] = useState(0);\r\n\tconst [fieldData, setFieldData] = useState({...customFieldState});\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility});\r\n\tconst [buttonsStatus, setButtonsStatus] = useState({...customButtonsStatus});\r\n\tconst [isMove, setMovingMode] = useState(false);\t\r\n\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePage(page.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\tlet handlePageChange = (pageData)=>{\t\r\n\t\tsetImageIndex(pageData.selected);\t\t\r\n\t};\r\n\tlet handleFieldTextChange = (e)=>{\t\r\n\t\t\r\n\t\tsetFieldData({\r\n\t\t\t...fieldData,\r\n\t\t\t\"value\": e.target.value\r\n\t\t});\t\t\t\r\n\t\tif(e.target.value.trim().length > 0){\t\t\t\r\n\t\t\tif(fieldData.imageTextId == null){\r\n\t\t\t\tdispatch(addNewTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId\r\n\t\t\t\t}));\r\n\t\t\t\tsetButtonsVisibility({\r\n\t\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\t\tremove: \"visible\"\r\n\t\t\t\t});\t\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId,\r\n\t\t\t\t\t\"value\": e.target.value\r\n\t\t\t\t});\t\r\n\t\t\t\tlet value = e.target.value;\r\n\t\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(changeTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top\r\n\t\t\t\t}));\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t}\t\r\n\t};\r\n\tlet handleFieldTextRemove = (e)=>{\t\t\t\t\r\n\t\tdispatch(removeTextValue(fieldData.imageTextId));\r\n\t\tsetFieldData({...customFieldState});\r\n\t\trenderImage();\r\n\t};\t\t\t\r\n\tlet handleImageTextsClick = (e)=>{\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageText\") && !hasSomeParentTheClass(e.target, \"imageTextFileldParent\")){\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\tremove: \"hidden\",\r\n\t\t\t\tok: \"hidden\",\r\n\t\t\t\twarning: \"hidden\"\r\n\t\t\t});\r\n\t\t\tsetButtonsStatus({...customButtonsStatus});\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...customFieldState,\r\n\t\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\t\"width\": 120,\r\n\t\t\t\t\"height\": 30,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\r\n\t\t\tsetActiveMessages([]);\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\r\n\t};\r\n\tlet handleFileldMouseDown = (e)=>{\r\n\t\tconsole.log(\"handleFileldMouseDown\");\r\n\t\tsetMovingMode(true);\r\n\t};\r\n\tlet handleFileldMouseUp = (e)=>{\r\n\t\tconsole.log( \"handleFileldMouseUp\");\r\n\t\tsetMovingMode(false);\r\n\t};\r\n\tlet handleFileldMouseMove = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\t\r\n\t\tconsole.log(isMove, \"is move\");\r\n\t\tif(isMove){\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tconsole.log(rect.x, e.clientX, \"-----\");\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...fieldData,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\t\r\n\t\t\tdispatch(changeTextValue({\r\n\t\t\t\ttext: fieldData.value, \r\n\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\tmax_width: fieldData.max_width,\r\n\t\t\t\tx: fieldData.left,\r\n\t\t\t\ty: fieldData.top\r\n\t\t\t}));\t\t\t\r\n\t\t}\r\n\t};\r\n\tlet handleFieldTextWarning = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.warning ? null : \"warning\"\r\n\t\t}));\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: !buttonsStatus.warning,\r\n\t\t\tok: buttonsStatus.warning ?  buttonsStatus.ok : false\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleFieldTextOk = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.ok ? null : \"ok\"\r\n\t\t}));\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: buttonsStatus.ok ?  buttonsStatus.warning : false,\r\n\t\t\tok: !buttonsStatus.ok\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t\t\r\n\t};\r\n\tlet handleFieldTextMessageVisibility = ()=>{\r\n\t\tsetButtonsStatus({\r\n\t\t\t...buttonsStatus,\r\n\t\t\tmessage: !buttonsStatus.message\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleActiveMessagesRemove = (e, msg)=>{\r\n\t\t\r\n\t\tdispatch(removeMessage(msg.id));\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t\tlet messages = page.texts.filter((txt)=>{\r\n\t\t\t\treturn txt.id == fieldData.imageTextId;\r\n\t\t\t})[0].messages;\r\n\t\t\tsetActiveMessages([\r\n\t\t\t\t...messages\r\n\t\t\t]);\t\t\t\t\t\r\n\t\t});\t\t\t\r\n\t};\r\n\tlet handleAddNewMessage = (e)=>{\t\t\t\r\n\t\tif(e.keyCode == 13 && e.shiftKey == false && e.target.value.trim().length > 0){\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\tlet text_id = fieldData.imageTextId;\r\n\t\t\tif(fieldData.imageTextId == null){\t\t\t\t\r\n\t\t\t\tdispatch(addFirstMessage({\r\n\t\t\t\t\ttext: \"\", \r\n\t\t\t\t\tmax_width: 0,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id,\r\n\t\t\t\t\tmsgText: e.target.value,\r\n\t\t\t\t\tdate: formatDate()\t\t\t\r\n\t\t\t\t}));\t\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId\r\n\t\t\t\t});\t\r\n\t\t\t\ttext_id = newTextId;\r\n\t\t\t\tconsole.log(newTextId, \"newTextId\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(addNewMessage({\r\n\t\t\t\t\ttext: e.target.value,\r\n\t\t\t\t\tdate: formatDate(),\r\n\t\t\t\t\ttext_id: fieldData.imageTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id\r\n\t\t\t\t}));\r\n\t\t\t}\t\t\r\n\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: text_id, visibility: \"hidden\"})]);\r\n\t\t\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\t\t\treturn txt.id == text_id;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(texts.length > 0){\t\t\t\t\t\r\n\t\t\t\t\tsetActiveMessages([\r\n\t\t\t\t\t\t...texts[0].messages\r\n\t\t\t\t\t]);\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetActiveMessageText(\"\");\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t}\t\t\r\n\t};\r\n\tlet handleActiveMessageText = (e)=>{\r\n\t\tsetActiveMessageText(e.target.value);\t\r\n\t};\r\n\tlet imageTextFieldBlur = (e)=>{\t\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageTexts\")){\r\n\t\t\tsetMovingMode(false);\r\n\t\t\tsetFieldData({...customFieldState});\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\t\t\t\r\n\t}\r\n\tlet imageTextClick = (e, imageTextId, imageTextStatus, messages, text)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\r\n\t\t\r\n\t\tsetMovingMode(false);\r\n\t\tsetButtonsVisibility({...customButtonsVisibility});\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: imageTextStatus == \"warning\",\r\n\t\t\tok: imageTextStatus == \"ok\",\r\n\t\t});\r\n\t\tlet rect = e.currentTarget.getBoundingClientRect();\r\n\t\tsetFieldData({\r\n\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\"left\": e.currentTarget.offsetLeft,\r\n\t\t\t\"top\": e.currentTarget.offsetTop,\r\n\t\t\t\"value\": text,\r\n\t\t\t\"width\": rect.width + 30,\r\n\t\t\t\"height\": rect.height > 30 ? rect.height : 30,\r\n\t\t\t\"imageTextId\": imageTextId\r\n\t\t});\r\n\t\tsetActiveMessages([\r\n\t\t\t...messages\r\n\t\t]);\r\n\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: imageTextId, visibility: \"hidden\"})]);\r\n\t}\r\n\tlet renderImage = ()=>{\r\n\t\tconst canvas = canvasRef.current;\r\n\t\tconst ctx = canvas.getContext('2d');\t\t\t\t\r\n\t\tconst image = new Image();\r\n\t\timage.src = page.pdf.images[imageIndex];\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tlet w = 1000;\r\n\t\t\t\tlet h = (w * image.height) / image.width;\r\n\t\t\t\tctx.canvas.width  = w;\r\n\t\t\t\tctx.canvas.height = h;\t\t\t\r\n\t\t\t\tctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\t\tctx.drawImage(image, 0, 0, w, h);\t\t\t\r\n\t\t\t\tsetImageTexts(getTexts());\t\t\r\n\t\t\t\tresolve({status: 'ok'});\r\n\t\t\t};\t\t\t\t\r\n\t\t});\t\r\n\t}\r\n\tlet setTextsVisibility = (texts, activeTxt)=>{\r\n\t\treturn texts.map((txt)=>{\t\r\n\t\t\tlet visibility = \"visible\";\r\n\t\t\tif(activeTxt !== undefined && txt.id == activeTxt.id){\r\n\t\t\t\tvisibility  = activeTxt.visibility;\r\n\t\t\t}\r\n\t\t\ttxt.visibility = visibility;\r\n\t\t\treturn txt;\r\n\t\t});\t\t\t\r\n\t}\t\r\n\tlet getTexts = ()=>{\r\n\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\treturn txt.image_index == imageIndex;\r\n\t\t});\r\n\t\ttexts.forEach((txt)=>{\r\n\t\t\ttxt.messages = page.messages.filter((msg)=>{\r\n\t\t\t\treturn msg.text_id == txt.id;\r\n\t\t\t});\r\n\t\t});\r\n\t\tconsole.log(texts, \"teataal;ala;;\");\r\n\t\treturn setTextsVisibility(texts);\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\trenderImage(imageIndex);\r\n\t}, [imageIndex]);\r\n\t\r\n\treturn (\r\n\t\t<Container onClick={imageTextFieldBlur}>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col><h2>{page.name} </h2>{page.user ?  <div><small>(Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name})</small></div> : <></>}</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t{page.user && page.user.id == page.current_user.id ? <ButtonGroup className=\"mr-2\"><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>} \t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<ReactPaginate\r\n\t\t\t\t\t  previousLabel={'previous'}\r\n\t\t\t\t\t  nextLabel={'next'}\r\n\t\t\t\t\t  breakLabel={'...'}\r\n\t\t\t\t\t  breakClassName={'break-me'}\r\n\t\t\t\t\t  pageCount={page.pdf.images.length}\r\n\t\t\t\t\t  marginPagesDisplayed={2}\r\n\t\t\t\t\t  pageRangeDisplayed={5}\r\n\t\t\t\t\t  onPageChange={handlePageChange}\r\n\t\t\t\t\t  containerClassName={'pagination'}\r\n\t\t\t\t\t  subContainerClassName={'pages pagination'}\r\n\t\t\t\t\t  activeClassName={'active'}\t\t\t\t\t  \r\n\t\t\t\t\t/>\t\t\t\t\t\t\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<div className=\"imageParent\">\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\t  ref={canvasRef}\r\n\t\t\t\t\t/>\t\r\n\t\t\t\t\t<div className=\"imageTexts\" onClick={handleImageTextsClick} /*onMouseMove={handleFileldMouseMove}*/>\r\n\t\t\t\t\t\t{imageTexts.map((txt, index) => {\t\r\n\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t<div key={index}  style={{\r\n\t\t\t\t\t\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\"zIndex\": 3,\r\n\t\t\t\t\t\t\t\t\t\"left\": txt.x,\r\n\t\t\t\t\t\t\t\t\t\"top\": txt.y,\r\n\t\t\t\t\t\t\t\t\t\"maxWidth\": txt.max_width,\r\n\t\t\t\t\t\t\t\t\t\"visibility\": txt.visibility,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": !(page.user && page.user.id == page.current_user.id) && txt.text == \"\" ? 0 : 1\r\n\t\t\t\t\t\t\t\t}}  className={txt.status ? (\"imageText \" + (txt.status + \"Text\")) : \"imageText\"} onClick={(e)=>{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\timageTextClick(e, txt.id, txt.status, txt.messages, txt.text);\r\n\t\t\t\t\t\t\t\t}}><span>{txt.text}</span>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{txt.messages.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"sm\"><FontAwesomeIcon icon={faEnvelope} />{txt.messages.length}</Button>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t: <></>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t)}\t\r\n\t\t\t\t\t\t<div className=\"imageTextFileldParent\" style={{\r\n\t\t\t\t\t\t\t\"left\": fieldData.left,\r\n\t\t\t\t\t\t\t\"top\": fieldData.top,\r\n\t\t\t\t\t\t\t\"visibility\": fieldData.visibility\r\n\t\t\t\t\t\t}}  >\r\n\t\t\t\t\t\t\t<textarea  \r\n\t\t\t\t\t\t\t\tdisabled={!(page.user && page.user.id == page.current_user.id)}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Your text...\"\r\n\t\t\t\t\t\t\t\tonChange={handleFieldTextChange}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\"width\": fieldData.value == \"\" && !(page.user && page.user.id == page.current_user.id) ? 0 : fieldData.width,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": page.user && page.user.id == page.current_user.id ? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t\"height\": fieldData.height,\r\n\t\t\t\t\t\t\t\t\t\"resize\": page.user && page.user.id == page.current_user.id ? \"both\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\t\tvalue={fieldData.value} \r\n\t\t\t\t\t\t\t\tclassName={buttonsStatus.warning ? \"form-control form-control-warning imageTextFileld\" : \r\n\t\t\t\t\t\t\t\t\t\t\tbuttonsStatus.ok ? \"form-control form-control-ok imageTextFileld\" : \"form-control imageTextFileld\"}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trows=\"1\"\r\n\t\t\t\t\t\t\t\t/*onMouseDown={handleFileldMouseDown} \r\n\t\t\t\t\t\t\t\tonMouseUp={handleFileldMouseUp} \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonDragStart={()=>{return false;}} */\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldButtons\">\r\n\t\t\t\t\t\t\t\t{page.user && page.user.id == page.current_user.id ? <Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.remove == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextRemove} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button> : <></>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.warning == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextWarning} variant={buttonsStatus.warning ? \"danger\" : \"outline-danger\"} size=\"sm\"><FontAwesomeIcon icon={faExclamation} /></Button>\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.ok == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextOk} variant={buttonsStatus.ok ? \"success\" : \"outline-success\"} size=\"sm\"><FontAwesomeIcon icon={faCheck} /></Button>\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.message == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextMessageVisibility} variant={buttonsStatus.message ? \"primary\" : \"outline-primary\"} size=\"sm\"><FontAwesomeIcon icon={faEnvelope} /></Button>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldMessageParent\" style={{\r\n\t\t\t\t\t\t\t\t\"display\": buttonsStatus.message ? \"block\" : \"none\"\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Alert variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t{activeMessages.map((msg, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet mUsers = page.users.filter((us)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn us.id == msg.user_id;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tlet mUser = mUsers.length > 0 ? mUsers[0] : null;\r\n\t\t\t\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={index} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{mUser ? <>{mUser.id == page.current_user.id ? \"you\" : mUser.name}, </>  : <>unsigned user, </> } {msg.date}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{msg.text}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{mUser && mUser.id == page.current_user.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleActiveMessagesRemove(e, msg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleActiveMessageText}\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleAddNewMessage}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your message...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control imageTextFileldMessageField\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={activeMessageText}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n}\r\nEditablePageView = connect()(EditablePageView); \r\nexport default EditablePageView;\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditablePage = connect(mapStateToProps)(({ pages , pdfs, texts, messages, users, current_user, history}) => {\r\n\tlet { id } = useParams();\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn item.id == id;\r\n\t});\r\n\tlet activePage = activePages.length > 0 ? activePages[0] : null;\r\n\tlet newTextId = texts.length > 0 ? texts[texts.length-1].id + 1: 0;\r\n\tif(activePage !== null){\r\n\t\tlet activePdfs = pdfs.filter((pdf)=>{\r\n\t\t\treturn pdf.id == activePage.pdf_id;\r\n\t\t});\r\n\t\tlet activePdf = activePdfs.length > 0 ? activePdfs[0] : null;\r\n\t\tactivePage.pdf = activePdf;\r\n\t\tlet activeTexts = texts.filter((txt)=>{\r\n\t\t\treturn txt.page_id == id;\r\n\t\t});\r\n\t\tactivePage.texts = activeTexts;\r\n\t\tif(activePage.texts){\r\n\t\t\tactivePage.messages = messages;\r\n\t\t}\t\r\n\t\tactivePage.users = users;\r\n\t\tactivePage.current_user = current_user;\r\n\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\treturn us.id == activePage.user_id;\r\n\t\t});\r\n\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\tactivePage.user = user;\r\n\t}\r\n\treturn(\r\n\t<>\r\n\t\t<Link to=\"/\">Go Back</Link>\t\r\n\t  {activePage === null ? <>Page Not Found</> : <EditablePageView  {...{page: activePage, newTextId: newTextId}}/>}\r\n\t\t\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditablePage);","import React, { Component } from 'react';\nimport { Route,Link,withRouter } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\nimport Blocks from './components/Blocks';\nimport EditablePage from './components/EditablePage';\nimport './styles/main.scss';\n\nfunction App({location}) {\t\n    return (\n\t\t<Container>\n\t\t\t<h1>EditHomework</h1>\t\t\t\n\t\t\t<Row>\t\t\t\n\t\t\t\t<Route exact path=\"/\" component={Blocks} />\n\t\t\t\t<Route exact path=\"/pages/:id\" component={EditablePage} />\t\t\t\t\t\t\t\n\t\t\t</Row>\t  \n\t\t</Container>\n    );\n}\n\nexport default withRouter(App);\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport toDoApp from './reducers';\nimport App from './App';\n\nconst store = createStore(toDoApp);\n\nrender(\n  <Provider store={store}>\n\t<BrowserRouter>\n    <App />\n\t</BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}