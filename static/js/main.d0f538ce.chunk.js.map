{"version":3,"sources":["actions/index.js","helper/index.js","reducers/index.js","components/UserModal.js","components/PdfView.js","components/FileUploader.js","components/PdfBlock.js","components/PageView.js","components/PageBlock.js","components/Blocks.js","components/ImagesPaginator.js","components/EditableField.js","components/EditablePageView.js","components/EditablePage.js","components/UserBlock.js","App.js","index.js"],"names":["CHANGE_ACTIVE_PDF","CHANGE_TEXT_VALUE","REMOVE_TEXT_VALUE","ADD_NEW_TEXT_VALUE","REMOVE_MESSAGE","ADD_NEW_MESSAGE","ADD_FIRST_MESSAGE","REMOVE_PAGE","ADD_NEW_PAGE","SIGN_FORM","SIGN_FB","SIGN_OUT_FORM","SIGN_FORM_AND_ADD_NEW_PAGE","ADD_PDF","REMOVE_PDF","CHANGE_PDF_DATE","CHANGE_PAGE_DATE","CHANGE_PAGE_NAME","LOAD_USERS","LOAD_PAGES","LOAD_PDFS","LOAD_TEXTS","LOAD_MESSAGES","LOAD_CURRENT_USER","changeTextValue","data","type","id","text","max_width","x","y","status","removePage","signForm","userData","name","login","pass","md5","hex_md5","signFB","photo","addPdf","path","images","user_id","changePdfDate","changePageDate","loadUsers","loadPages","loadTexts","loadPdfs","loadMessages","loadCurrentUser","hasSomeParentTheClass","element","classname","className","split","indexOf","parentNode","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","h","getHours","m","getMinutes","length","initialState","current_user","users","pdfs","load_date","last_edit_date","texts","messages","active_pdf_index","pages","pdf_id","UserModal","customFieldsValue","customFieldsError","requiredFields","addPage","signIn","useState","show","setShow","fieldsValue","setFieldsValue","fieldsErrors","setFieldsErrors","handleClose","clearFields","handleFieldValueChange","e","target","getAttribute","value","sureRemove","sureRemovePdf","fb","Card","Body","Title","Text","Form","Control","size","placeholder","onChange","Alert","variant","appId","autoLoad","fields","callback","response","version","cssClass","icon","Button","button","large","onClick","title","Modal","onHide","animation","Header","closeButton","Footer","buttons","map","but","index","key","res","errors","isError","trim","validateFields","func","PdfView","pdf","dispatch","signModalRemoveObj","signUp","faTrashAlt","ListGroup","Item","is_active","preventDefault","faChevronRight","user","ButtonGroup","faCalendarAlt","connect","FileUploader","state","file","setFile","loader","setLoader","modal","setModal","fileUp","formData","FormData","append","post","headers","onSubmit","then","result","error","JSON","parse","Spinner","aria-describedby","files","catch","htmlFor","style","PdfBlock","signModalObj","console","log","accessToken","picture","url","faPlus","fieldsData","sort","a","b","d1","d2","pdfItem","pdfUsers","filter","us","PageView","page","to","PageBlock","activePdfId","activePdfPath","activePages","item","addPageObj","pageUsers","activePage","Blocks","Col","Row","ImagesPaginator","activeIndex","items","onPageChange","pageId","setActivePage","activeItem","setActiveItem","activeImages","setActiveImages","setPage","parseInt","aPage","activeInd","window","location","hash","selected","img","useEffect","faChevronUp","src","replace","faChevronDown","EditableField","saveTextFunction","customFieldSize","height","width","fieldText","setFieldText","fieldSize","setFieldSize","wrapperRef","setWrapperRef","textRef","setTextRef","edit","save","buttonsVisibility","setButtonsVisibility","handleClickOutside","contains","document","removeEventListener","handleEditField","rect","getBoundingClientRect","addEventListener","ref","faEdit","withRouter","EditablePageView","newTextId","previewLength","innerHeight","customFieldState","customButtonsVisibility","customButtonsStatus","startImageIndex","pageNum","isNaN","canvasRef","useRef","imageTexts","setImageTexts","activeMessages","setActiveMessages","activeMessageText","setActiveMessageText","imageIndex","setImageIndex","fieldData","setFieldData","buttonsStatus","setButtonsStatus","setMovingMode","handleActiveMessagesRemove","msg","renderImage","setTextsVisibility","imageTextId","visibility","txt","handleAddNewMessage","text_id","left","top","page_id","image_index","msgText","addNewMessage","getTexts","ctx","current","getContext","image","Image","Promise","resolve","onload","canvas","clearRect","drawImage","activeTxt","undefined","forEach","Container","changePageName","pageData","remove","ok","warning","clientX","clientY","imageTextStatus","stopPropagation","currentTarget","offsetLeft","offsetTop","imageTextClick","faEnvelope","disabled","offsetWidth","rows","faExclamation","faCheck","message","mUsers","mUser","EditablePage","history","useParams","activePdfs","activePdf","activeTexts","Helmet","faChevronLeft","UserBlock","usersData","dataItems","loadingArr","push","axios","all","spread","responses","cUserId","localStorage","getItem","getStartData","exact","component","store","createStore","newTexts","newMessages","newText","newMessage","newPages","newPage","newUsers","fUsers","newPdfs","newTextsIds","action","saveData","savedData","stringify","pg","oldTexts","setItem","removeItem","newPdf","pd","removedPdfs","removedPdf","removedPagesIds","removedTexts","removePdf","cUser","render","getElementById"],"mappings":"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","file":"static/js/main.d0f538ce.chunk.js","sourcesContent":["import md5 from \"react-native-md5\";\r\nexport const CHANGE_ACTIVE_PDF = 'CHANGE_ACTIVE_PDF';\r\nexport const CHANGE_TEXT_VALUE = 'CHANGE_TEXT_VALUE';\r\nexport const REMOVE_TEXT_VALUE = 'REMOVE_TEXT_VALUE';\r\nexport const ADD_NEW_TEXT_VALUE = 'ADD_NEW_TEXT_VALUE';\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE';\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\nexport const ADD_FIRST_MESSAGE = 'ADD_FIRST_MESSAGE';\r\nexport const REMOVE_PAGE = 'REMOVE_PAGE';\r\nexport const ADD_NEW_PAGE = 'ADD_NEW_PAGE';\r\nexport const SIGN_FORM = 'SIGN_FORM';\r\nexport const SIGN_FB = 'SIGN_FB';\r\nexport const SIGN_OUT_FORM = 'SIGN_OUT_FORM';\r\nexport const SIGN_FORM_AND_ADD_NEW_PAGE = 'SIGN_FORM_AND_ADD_NEW_PAGE';\r\nexport const ADD_PDF = 'ADD_PDF';\r\nexport const REMOVE_PDF = 'REMOVE_PDF';\r\nexport const CHANGE_PDF_DATE = 'CHANGE_PDF_DATE';\r\nexport const CHANGE_PAGE_DATE = 'CHANGE_PAGE_DATE';\r\nexport const CHANGE_PAGE_NAME = 'CHANGE_PAGE_NAME';\r\n\r\nexport const LOAD_USERS = 'LOAD_USERS';\r\nexport const LOAD_PAGES = 'LOAD_PAGES';\r\nexport const LOAD_PDFS = 'LOAD_PDFS';\r\nexport const LOAD_TEXTS = 'LOAD_TEXTS';\r\nexport const LOAD_MESSAGES = 'LOAD_MESSAGES';\r\nexport const LOAD_CURRENT_USER = 'LOAD_CURRENT_USER';\r\n\r\nexport function changeActivePdf(index) {\r\n\treturn {\r\n\t\ttype: CHANGE_ACTIVE_PDF,\r\n\t\tindex: index\r\n\t};\r\n}\r\nexport function changeTextValue(data) {\r\n\treturn {\r\n\t\ttype: CHANGE_TEXT_VALUE,\r\n\t\tid: data.id,\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tstatus: data.status\r\n\t};\r\n}\r\nexport function addNewTextValue(data) {\r\n\treturn {\r\n\t\ttype: ADD_NEW_TEXT_VALUE,\t\t\r\n\t\ttext: data.text,\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\r\n\t};\r\n}\r\nexport function addFirstMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_FIRST_MESSAGE,\r\n\t\tuser_id: data.user_id,\t\t\r\n\t\tmsgText: data.msgText,\r\n\t\tdate: data.date,\r\n\t\t\r\n\t\ttext: data.text,\t\t\r\n\t\tmax_width: data.max_width,\t\t\t\r\n\t\tx: data.x,\r\n\t\ty: data.y,\r\n\t\tpage_id: data.page_id,\r\n\t\timage_index: data.image_index,\r\n\t\tid: data.id\t\t\r\n\t};\r\n}\r\nexport function addNewMessage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_MESSAGE,\r\n\t\tuser_id: data.user_id,\r\n\t\ttext_id: data.text_id,\r\n\t\ttext: data.text,\r\n\t\tdate: data.date\r\n\t};\r\n}\r\nexport function addNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\r\n\t\tuser_id: data.user_id\t\r\n\t};\r\n}\r\nexport function removeTextValue(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_TEXT_VALUE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removeMessage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_MESSAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function removePage(id) {\r\n\treturn {\r\n\t\ttype: REMOVE_PAGE,\r\n\t\tid: id\r\n\t};\r\n}\r\nexport function signForm(userData) {\r\n\treturn {\r\n\t\ttype: SIGN_FORM,\r\n\t\tname: userData.login,\r\n\t\tpass: md5.hex_md5(userData.pass)\r\n\t};\r\n}\r\nexport function signFB(userData) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FB,\r\n\t\tname: userData.name,\r\n\t\tpass: userData.pass,\r\n\t\tphoto: userData.photo,\r\n\t\tid: userData.id\r\n\t};\r\n}\r\nexport function signOutForm() {\r\n\treturn {\r\n\t\ttype: SIGN_OUT_FORM\r\n\t};\r\n}\r\nexport function signFormAndAddNewPage(data) {\t\r\n\treturn {\r\n\t\ttype: SIGN_FORM_AND_ADD_NEW_PAGE,\r\n\t\tname: data.name,\t\t\r\n\t\tpdf_id: data.pdf_id,\t\t\r\n\t\t\r\n\t\tlogin: data.login,\r\n\t\tpass: md5.hex_md5(data.pass)\r\n\t};\r\n}\r\nexport function addPdf(data) {\t\r\n\treturn {\r\n\t\ttype: ADD_PDF,\r\n\t\tpath: data.path,\r\n\t\timages: data.images,\r\n\t\tuser_id: data.user_id\r\n\t};\r\n}\r\nexport function removePdf(id) {\t\r\n\treturn {\r\n\t\ttype: REMOVE_PDF,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePdfDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PDF_DATE,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePageDate(id) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PAGE_DATE,\r\n\t\tid: id\r\n\t};\r\n}\r\n\r\nexport function changePageName(id, name) {\t\r\n\treturn {\r\n\t\ttype: CHANGE_PAGE_NAME,\r\n\t\tid: id,\r\n\t\tname: name\r\n\t};\r\n}\r\n\r\nexport function loadUsers(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_USERS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadPages(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_PAGES,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadTexts(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_TEXTS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadPdfs(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_PDFS,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadMessages(data) {\t\r\n\treturn {\r\n\t\ttype: LOAD_MESSAGES,\r\n\t\tdata: data\r\n\t};\r\n}\r\nexport function loadCurrentUser(id) {\t\r\n\treturn {\r\n\t\ttype: LOAD_CURRENT_USER,\r\n\t\tid: id\r\n\t};\r\n}","export function hasSomeParentTheClass(element, classname) {\r\n    if (element.className && element.className.split && element.className.split(' ').indexOf(classname)>=0) return true;\r\n    return element.parentNode && hasSomeParentTheClass(element.parentNode, classname);\r\n}\r\nexport function formatDate(date) {\r\n\tconst monthNames = [\"Jan\", \"Feb\", \"March\", \"Apr\", \"May\", \"June\",\r\n\t  \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\r\n\t];\r\n\t\r\n    let d = date ? new Date(date) : new Date(),\r\n        month = '' + monthNames[d.getMonth()],\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear(),\r\n\t\th = d.getHours(),\r\n\t\tm = d.getMinutes();\r\n\r\n    if (month.length < 2) \r\n        month = '0' + month;\r\n    if (day.length < 2) \r\n        day = '0' + day;\r\n\r\n    return day + \" \" + month + \",\" + year + \" \" + h + \":\" + m;\r\n}","import axios, { post } from 'axios';\r\nimport { CHANGE_ACTIVE_PDF } from '../actions';\r\nimport { CHANGE_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_TEXT_VALUE } from '../actions';\r\nimport { ADD_NEW_TEXT_VALUE } from '../actions';\r\nimport { REMOVE_MESSAGE } from '../actions';\r\nimport { ADD_NEW_MESSAGE } from '../actions';\r\nimport { ADD_FIRST_MESSAGE } from '../actions';\r\nimport { REMOVE_PAGE } from '../actions';\r\nimport { ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM_AND_ADD_NEW_PAGE } from '../actions';\r\nimport { SIGN_FORM } from '../actions';\r\nimport { SIGN_OUT_FORM } from '../actions';\r\nimport { ADD_PDF } from '../actions';\r\nimport { REMOVE_PDF } from '../actions';\r\nimport { CHANGE_PDF_DATE } from '../actions';\r\nimport { CHANGE_PAGE_DATE } from '../actions';\r\nimport { LOAD_USERS } from '../actions';\r\nimport { LOAD_PAGES } from '../actions';\r\nimport { LOAD_PDFS } from '../actions';\r\nimport { LOAD_TEXTS } from '../actions';\r\nimport { LOAD_MESSAGES } from '../actions';\r\nimport { LOAD_CURRENT_USER } from '../actions';\r\nimport { CHANGE_PAGE_NAME } from '../actions';\r\nimport { SIGN_FB } from '../actions';\r\n\r\nimport { formatDate } from '../helper';\r\n\r\n\r\nconst initialState = {  \r\n\tcurrent_user: {\r\n\t\tid: null\r\n\t},\r\n\tusers: [/*{\r\n\t\tid: 0,\r\n\t\tname: \"OlkaOlkaOlkaOlka OlkaOlkaOlkaOlkaOlkaOlka\",\r\n\t\tpass: \"123\"\r\n\t}*/],\r\n\tpdfs: [{\r\n\t\tpath: \"some path1 some path1 some path1 some path1 some path1some path1 some path1 some path1\",\r\n\t\tid: 0,\r\n\t\tuser_id: 0,\r\n\t\tload_date: \"\",\r\n\t\tlast_edit_date: \"\",\r\n\t\timages: [\"/uploads/photos/photo_pdf билета.png\", \"../photos/2.jpg\", \"../photos/3.jpg\", \"../photos/4.jpg\", \"../photos/5.jpg\", \"../photos/6.jpg\", \"../photos7.jpg\", \"../photos/8.jpg\"]\r\n\t}],\r\n\ttexts: [/*{\r\n\t\ttext: \"testing text1\",\r\n\t\tx: 0,\r\n\t\ty:0,\r\n\t\tpage_id: 0,\r\n\t\timage_index: 0,\r\n\t\tid: 0,\r\n\t\tmax_width: \"auto\",\r\n\t\tstatus: \"ok\" //\"ok\", \"warning\"\r\n\t}*/],\r\n\tmessages: [/*{\r\n\t\tid: 0,\r\n\t\tuser_id: null,\t\t\r\n\t\ttext_id: 0,\r\n\t\ttext: \"message1\",\r\n\t\tdate: \"date1\"\r\n\t}*/],\r\n\tactive_pdf_index: 0,\r\n\tpages: [{\r\n\t\tname: \"page 1 page 1page 1page 1 page 1page 1page 1page 1page 1page 1page 1page 1page 1page 1page 1\",\r\n\t\tid: 0,\r\n\t\tpdf_id: 0,\r\n\t\tuser_id: 0\r\n\t}]  \r\n};\r\nexport default function toDoApp(state = initialState, action) {\t\r\n\tlet newTexts, newMessages, \r\n\t\tid, newText, newMessage, \r\n\t\tnewPages, newPage, cUserId,\r\n\t\tnewUsers, fUsers, pageId, newPdfs, newTextsIds;\r\n\t\t\r\n\tlet saveData= (name, data)=>{\r\n\t\tconst url = '/db.php';\r\n\t\tlet savedData = JSON.stringify(data);\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"name\", name);\r\n\t\tformData.append(\"action\", \"set\");\r\n\t\tformData.append(\"data\", savedData);\t\t\r\n\t\tpost(url, formData).then((result)=>{\r\n\t\t\tconsole.log(result, \"saved\", name);\r\n\t\t});\r\n\t}\t\r\n\tlet removePdf= (images, pdf)=>{\r\n\t\tconst url = '/remove_pdf.php';\t\t\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"images\", JSON.stringify(images));\r\n\t\tformData.append(\"pdf\", pdf);\r\n\t\t\r\n\t\tpost(url, formData).then((result)=>{\r\n\t\t\tconsole.log(result, \"removed\");\r\n\t\t});\r\n\t}\t\r\n\tswitch (action.type) {\r\n\tcase CHANGE_ACTIVE_PDF:\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tactive_pdf_index: action.index\r\n\t\t}\r\n\tcase CHANGE_TEXT_VALUE: \t\t\r\n\t\tnewTexts = state.texts.map((txt)=>{\t\t\t\r\n\t\t\tif(txt.id == action.id){\r\n\t\t\t\ttxt.text = action.text;\r\n\t\t\t\ttxt.max_width = action.max_width;\t\r\n\t\t\t\ttxt.x = action.x;\t\r\n\t\t\t\ttxt.y = action.y;\r\n\t\t\t\ttxt.status = action.status;\r\n\t\t\t\ttxt.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn txt;\r\n\t\t});\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts\r\n\t\t}\r\n\tcase ADD_NEW_TEXT_VALUE: \t\t\t\r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"texts\", [...state.texts, newText]);\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText]\r\n\t\t}\t\r\n\tcase ADD_NEW_MESSAGE: \r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\t\t\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.text_id,\r\n\t\t\ttext: action.text,\r\n\t\t\tdate: action.date\t\t\t\t\r\n\t\t};\t\r\n\t\tsaveData(\"messages\", [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\r\n\tcase ADD_FIRST_MESSAGE: \r\n\t\tnewText = {\r\n\t\t\ttext: action.text,\r\n\t\t\tx: action.x,\r\n\t\t\ty:action.y,\r\n\t\t\tpage_id: action.page_id,\r\n\t\t\timage_index: action.image_index,\r\n\t\t\tid: action.id,\r\n\t\t\tmax_width: action.max_width,\r\n\t\t\tstatus: null\r\n\t\t};\t\r\n\t\tid = state.messages.length > 0 ? state.messages[state.messages.length-1].id + 1 : 0;\r\n\t\tnewMessage = {\r\n\t\t\tid: id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\ttext_id: action.id,\r\n\t\t\ttext: action.msgText,\r\n\t\t\tdate: action.date\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"messages\", [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]);\t\r\n\t\tsaveData(\"texts\", [...state.texts, newText]);\t\t\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...state.texts, newText],\r\n\t\t\tmessages: [\r\n\t\t\t\t...state.messages,\r\n\t\t\t\tnewMessage\r\n\t\t\t]\r\n\t\t}\t\r\n\tcase ADD_NEW_PAGE:\r\n\t\tid = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: id,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pages\", [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]\r\n\t\t}\t\t\t\r\n\tcase REMOVE_TEXT_VALUE: \t\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.id !== action.id;\t\r\n\t\t});\t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.text_id !== action.id;\t\r\n\t\t});\t\t\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"messages\", newMessages);\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_MESSAGE: \t\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn msg.id !== action.id;\t\r\n\t\t});\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase REMOVE_PAGE: \t\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.id !== action.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id !== action.id;\t\r\n\t\t});\t\r\n\t\tlet oldTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn txt.page_id == action.id;\t\r\n\t\t});\t\r\n\t\tnewTextsIds = oldTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"pages\", newPages);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: newPages,\r\n\t\t\ttexts: newTexts,\r\n\t\t\tmessages: newMessages\r\n\t\t}\t\r\n\tcase SIGN_FB:\t\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.id == action.id;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\t\t\t\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: action.id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass,\r\n\t\t\t\t\tphoto: action.photo\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = action.id;\r\n\t\t}\r\n\t\tconsole.log(newUsers, \"newUsersnewUsersnewUsers\");\r\n\t\tsaveData(\"users\", [...newUsers]);\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\r\n\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\t\t\r\n\tcase SIGN_FORM:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.name && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\r\n\t\tsaveData(\"users\", [...newUsers]);\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\r\n\t\t}\r\n\tcase SIGN_OUT_FORM:\t\t\r\n\t\tlocalStorage.removeItem(\"current_user_edithomework\");\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: null\r\n\t\t\t}\r\n\t\t}\r\n\tcase SIGN_FORM_AND_ADD_NEW_PAGE:\r\n\t\tcUserId = null;\r\n\t\tnewUsers = [...state.users];\r\n\t\tfUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.name == action.login && us.pass == action.pass;\r\n\t\t});\r\n\t\tif(fUsers.length > 0){\r\n\t\t\tcUserId = fUsers[0].id;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tid = state.users.length > 0 ? state.users[state.users.length-1].id + 1 : 0;\r\n\t\t\tnewUsers = [\r\n\t\t\t\t...state.users,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tname: action.login,\r\n\t\t\t\t\tpass: action.pass\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tcUserId = id;\r\n\t\t}\t\r\n\t\tpageId = state.pages.length > 0 ? state.pages[state.pages.length-1].id + 1 : 0;\r\n\t\tnewPage = {\r\n\t\t\tname: action.name,\r\n\t\t\tid: pageId,\r\n\t\t\tpdf_id: action.pdf_id,\r\n\t\t\tuser_id: cUserId,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pages\", [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t]);\r\n\t\tsaveData(\"users\", [...newUsers]);\t\r\n\t\tlocalStorage.setItem(\"current_user_edithomework\", cUserId);\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [\r\n\t\t\t\t...state.pages,\r\n\t\t\t\tnewPage\r\n\t\t\t],\r\n\t\t\tcurrent_user: {\r\n\t\t\t\tid: cUserId\r\n\t\t\t},\r\n\t\t\tusers: [...newUsers]\t\t\t\r\n\t\t}\r\n\tcase ADD_PDF:\r\n\t\tid = state.pdfs.length > 0 ? state.pdfs[state.pdfs.length-1].id + 1 : 0;\r\n\t\tlet newPdf = {\r\n\t\t\tid: id,\r\n\t\t\tpath: action.path,\r\n\t\t\timages: action.images,\r\n\t\t\tuser_id: action.user_id,\r\n\t\t\tload_date: formatDate(),\r\n\t\t\tlast_edit_date: formatDate()\t\t\t\t\r\n\t\t};\r\n\t\tsaveData(\"pdfs\", [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [\r\n\t\t\t\t...state.pdfs,\r\n\t\t\t\tnewPdf\r\n\t\t\t]\t\t\t\r\n\t\t}\r\n\tcase REMOVE_PDF:\t\r\n\t\tnewPdfs = state.pdfs.filter((pd)=>{\r\n\t\t\treturn pd.id !== action.id;\r\n\t\t});\r\n\t\tlet removedPdfs = state.pdfs.filter((pd)=>{\r\n\t\t\treturn pd.id == action.id;\r\n\t\t});\t\r\n\t\tlet removedPdf = removedPdfs.length > 0 ? removedPdfs[0] : null;\r\n\t\tnewPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.pdf_id !== action.id;\r\n\t\t});\r\n\t\tlet removedPages = state.pages.filter((pg)=>{\r\n\t\t\treturn pg.pdf_id == action.id;\r\n\t\t});\r\n\t\tlet removedPagesIds = removedPages.map((pg)=>{\r\n\t\t\treturn pg.id;\r\n\t\t});\r\n\t\tnewTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn removedPagesIds.indexOf(txt.page_id)==-1;\t\r\n\t\t});\t\r\n\t\tlet removedTexts = state.texts.filter((txt)=>{\t\t\t\r\n\t\t\treturn removedPagesIds.indexOf(txt.page_id)!==-1;\t\r\n\t\t});\t\r\n\t\tnewTextsIds = removedTexts.map((txt)=>{\r\n\t\t\treturn txt.id;\r\n\t\t});\r\n\t\tnewMessages = state.messages.filter((msg)=>{\t\t\t\r\n\t\t\treturn newTextsIds.indexOf(msg.text_id) == -1;\t\r\n\t\t});\t\t\t\r\n\t\tsaveData(\"messages\", newMessages);\r\n\t\tsaveData(\"texts\", newTexts);\r\n\t\tsaveData(\"pages\", newPages);\t\r\n\t\tsaveData(\"pdfs\", newPdfs);\t\t\t\r\n\t\tremovedPdf && removePdf(removedPdf.images, removedPdf.path);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...newPdfs],\r\n\t\t\tpages: [...newPages],\r\n\t\t\ttexts: [...newTexts],\r\n\t\t\tmessages: [...newMessages]\r\n\t\t}\r\n\tcase CHANGE_PDF_DATE:\t\t\r\n\t\tnewPdfs = state.pdfs.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pdfs\", [...newPdfs]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...newPdfs]\r\n\t\t}\r\n\tcase CHANGE_PAGE_DATE:\r\n\t\tconsole.log(action.id, \"page action\");\r\n\t\tnewPages = state.pages.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.last_edit_date = formatDate();\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pages\", [...newPages]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\r\n\tcase CHANGE_PAGE_NAME:\r\n\t\tconsole.log(action.id, \"page action\");\r\n\t\tnewPages = state.pages.map((pd)=>{\t\t\t\r\n\t\t\tif(pd.id == action.id){\r\n\t\t\t\tpd.name = action.name;\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn pd;\r\n\t\t});\t\r\n\t\tsaveData(\"pages\", [...newPages]);\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...newPages]\r\n\t\t}\t\t\r\n\tcase LOAD_USERS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tusers: [...action.data]\r\n\t\t}\t\r\n\tcase LOAD_PAGES:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpages: [...action.data]\r\n\t\t}\r\n\tcase LOAD_PDFS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tpdfs: [...action.data]\r\n\t\t}\r\n\tcase LOAD_TEXTS:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\ttexts: [...action.data]\r\n\t\t}\r\n\tcase LOAD_MESSAGES:\t\t\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tmessages: [...action.data]\r\n\t\t}\r\n\tcase LOAD_CURRENT_USER:\t\r\n\t\tlet cUsers = state.users.filter((us)=>{\r\n\t\t\treturn us.id == action.id;\r\n\t\t});\r\n\t\tlet cUser = cUsers.length > 0 ? {id: action.id} : {...state.current_user}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tcurrent_user: cUser\r\n\t\t}\t\t\r\n    default:\r\n      return state;\r\n  }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Card from 'react-bootstrap/Card';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst UserModal = (data) => {\t\t\r\n\tlet customFieldsValue = {\r\n\t\tlogin: \"\",\r\n\t\tpass: \"\",\r\n\t\tname: \"\"\r\n\t};\r\n\tlet customFieldsError = {\r\n\t\tlogin: false,\r\n\t\tpass: false,\r\n\t\tname: false\r\n\t};\t\r\n\tlet requiredFields = {\r\n\t\tname: data.addPage,\r\n\t\tlogin: data.signIn,\r\n\t\tpass: data.signIn,\r\n\t\t\r\n\t}\r\n\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [fbData, setFbData] = useState(false);\r\n\tconst [fieldsValue, setFieldsValue] = useState({...customFieldsValue});\r\n\tconst [fieldsErrors, setFieldsErrors] = useState({...customFieldsError});\r\n\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\t\r\n\t\r\n\tconst responseFacebookCallback = (response)=>{\r\n\t\tresponse && typeof data.fb === \"function\" && data.fb(response);\r\n\t\thandleClose();\t\r\n\t\tclearFields();\r\n\t}\t\r\n\t\r\n\tlet validateFields = ()=>{\r\n\t\tlet res = true;\r\n\t\tlet errors = {};\r\n\t\tfor(let key in requiredFields){\r\n\t\t\tif(requiredFields[key]){\r\n\t\t\t\tlet isError = fieldsValue[key].trim().length == 0;\t\t\t\t\r\n\t\t\t\terrors[key] = isError;\r\n\t\t\t\tif(isError){\r\n\t\t\t\t\tres = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\terrors[key] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFieldsErrors({\r\n\t\t\t...errors\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\treturn res;\r\n\t}\t\r\n\tlet clearFields = ()=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...customFieldsValue\r\n\t\t})\t\t\r\n\t}\r\n\tlet handleFieldValueChange = (e)=>{\r\n\t\tsetFieldsValue({\r\n\t\t\t...fieldsValue,\r\n\t\t\t[e.target.getAttribute(\"name\")]: e.target.value\r\n\t\t})\r\n\t\tsetFieldsErrors({\r\n\t\t\t...customFieldsError\r\n\t\t});\r\n\t}\r\n\tlet signIn = \"\";\r\n\tlet signUp = \"\";\r\n\tlet sureRemove = \"\";\t\r\n\tlet sureRemovePdf = \"\";\t\r\n\tlet fb = \"\";\r\n\tlet addPage = \"\";\r\n\tif(data.signIn){\r\n\t\tsignIn = <Card><Card.Body>\r\n\t\t\t<Card.Title>Login or Register <small>(if you don't have an account)</small></Card.Title>\r\n\t\t\t<Card.Text>\r\n\t\t\t<div><Form.Control size=\"sm\" name=\"login\" type=\"text\" value={fieldsValue.login} placeholder=\"Login\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.login ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t<div>\r\n\t\t\t<Form.Control size=\"sm\" name=\"pass\" type=\"password\" value={fieldsValue.pass} placeholder=\"Password\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.pass ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t\t\t</Card.Text>\r\n\t\t</Card.Body></Card>;\r\n\t\tfb = <FacebookLogin\t\t\t\r\n\t\t\tappId=\"176592233585640\"\r\n\t\t\tautoLoad={false}\r\n\t\t\tfields=\"name,email,picture\"\r\n\t\t\t\r\n\t\t\tcallback={responseFacebookCallback}\r\n\t\t\tversion=\"3.1\"\r\n\t\t\tcssClass=\"my-facebook-button-class\"\r\n\t\t\ticon=\"fa-facebook\"\r\n\t\t  />;\r\n\t}\r\n\r\n\tif(data.sureRemove){\r\n\t\tsureRemove = <div>Are you sure? You won't be able to recover this page! </div>;\r\n\t}\r\n\tif(data.sureRemovePdf){\r\n\t\tsureRemovePdf = <div>Are you sure? You won't be able to recover this Pdf and all pages created from this Pdf will be removed! </div>;\r\n\t}\t\r\n\tif(data.addPage){\r\n\t\taddPage = <div><Form.Control size=\"sm\" type=\"text\" name=\"name\" value={fieldsValue.name} placeholder=\"Name\" onChange={handleFieldValueChange} />\r\n\t\t\t{fieldsErrors.name ? <Alert  variant=\"danger\">Required field</Alert> : <></>}</div>\r\n\t}\r\n\r\n\treturn (\r\n    <>\r\n      <Button size={data.button.large ? \"lg\" : \"sm\"} variant=\"primary\" onClick={handleShow}>\r\n\t\t  {data.button.icon ? <FontAwesomeIcon icon={data.button.icon} /> : \"\"} \r\n\t\t\t{data.button.title}\r\n      </Button>\r\n\r\n      <Modal show={show} onHide={handleClose} animation={false}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{data.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n\t\t\t{signIn} \r\n\t\t\t{fb}\r\n\t\t\t{signUp}\r\n\t\t\t{sureRemove}\r\n\t\t\t{sureRemovePdf}\r\n\t\t\t{addPage}\r\n\t\t</Modal.Body>\r\n        <Modal.Footer>\r\n\t\t\t{data.buttons.map((but, index)=>{\r\n\t\t\t\treturn (<Button size=\"sm\" key={index}  variant=\"primary\" onClick={()=>{\r\n\t\t\t\t\tif(validateFields()){\r\n\t\t\t\t\t\ttypeof but.func === \"function\" && but.func(fieldsValue);\r\n\t\t\t\t\t\thandleClose();\t\r\n\t\t\t\t\t\tclearFields();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{but.title}\r\n\t\t\t\t</Button>);\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\t);\r\n}\t\r\n\r\n\r\nexport default UserModal;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faChevronRight, faCalendarAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { changeActivePdf, removePdf } from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nlet PdfView = ({pdf, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemovePdf: true,\r\n\t\ttitle: \"Remove PDF File\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove PDF\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePdf(pdf.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item className={pdf.is_active ? \"list-group-item-primary\" : \"\"}>\t\t\t\r\n\t\t\t<div className=\"itemTitle\"><Button variant=\"link\"  onClick={e => {\r\n\t\t\t\te.preventDefault();\t\r\n\t\t\t\tdispatch(changeActivePdf(pdf.index));\r\n\t\t\t}}><span>{pdf.path} <FontAwesomeIcon icon={faChevronRight} /></span></Button></div>\t\r\n\t\t\t<div className=\"absBtns\">\r\n\t\t\t{pdf.current_user.id !== null && pdf.user && pdf.current_user.id == pdf.user.id ?\r\n\t\t\t\t<ButtonGroup ><UserModal {...signModalRemoveObj} /></ButtonGroup>\r\n\t\t\t\t: <></>\r\n\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"calendarBlock\">\r\n\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t{pdf.user ?  <div><small>Loaded by {pdf.user.id == pdf.current_user.id ? \"you\" : pdf.user.name} {pdf.load_date}</small>\r\n\t\t\t\t<div><small>Last pages edits - {pdf.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPdfView = connect()(PdfView);\r\nexport default PdfView;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios, { post } from 'axios';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addPdf} from '../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst FileUploader = connect(mapStateToProps)(({ current_user, dispatch }) => {\r\n\tconst [file, setFile] = useState(null);\r\n\tconst [loader, setLoader] = useState(null);\r\n\tconst [modal, setModal] = useState({\r\n\t\tshow: false,\r\n\t\ttitle: \"\",\r\n\t\ttext: \"\"\r\n\t});\r\n\t\r\n\tlet fileUp = (file)=>{\r\n\t\tconst url = '/upload.php';\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('file',file)\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n            'content-type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn  post(url, formData,config)\r\n\t}\r\n\t\r\n\tlet onFormSubmit = (e)=>{\r\n\t\te.preventDefault() \r\n\t\tfile && setLoader(true);\r\n\t\tfileUp(file).then((response)=>{\t\r\n\t\t\tsetLoader(false);\r\n\t\t\tlet result = response.data;\r\n\t\t\tif(result.error == false){\r\n\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\tlet onChange = (e)=> {\r\n\t\tsetFile(e.target.files[0]);\t\r\n\t\tif(e.target.files[0]){\r\n\t\t\tsetLoader(true);\r\n\t\t\tfileUp(e.target.files[0]).then((response)=>{\t\t\t\t\r\n\t\t\t\tsetLoader(false);\r\n\t\t\t\tlet result = response.data;\r\n\t\t\t\tif(result.error == false){\r\n\t\t\t\t\tdispatch(addPdf({\r\n\t\t\t\t\t\tpath: result.file,\r\n\t\t\t\t\t\timages: JSON.parse(result.images),\r\n\t\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t\t}));\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsetModal({...modal, show: true, title: \"File Upload Error\", text: (\"File wasn't loaded. \" + result.error) });\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => { setLoader(false); setModal({...modal, show: true, title: \"File Upload Error\", text: \"File wasn't loaded. Somthing went wrong...\"});});\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t<form onSubmit={onFormSubmit}>\r\n\t\t\t<h6>Upload PDF File</h6>\r\n\t\t\t{ loader ? <span>\r\n\t\t\t\t\t<Spinner animation=\"border\" variant=\"secondary\" />\r\n\t\t\t\t\tWait please, File is Loading...\r\n\t\t\t\t</span> : <>\r\n\t\t\t\t  <div className=\"custom-file\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tclassName=\"custom-file-input\"\r\n\t\t\t\t\t\tid=\"inputGroupFile01\"\r\n\t\t\t\t\t\taria-describedby=\"inputGroupFileAddon01\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"custom-file-label\" size=\"sm\" htmlFor=\"inputGroupFile01\">\r\n\t\t\t\t\t  Choose file\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<button type=\"submit\" style={{\"display\": \"none\"}}>Upload</button>\r\n\t\t\t\t  </div>\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t  </>\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t</form>\r\n\t\t<Modal show={modal.show} onHide={()=>{setModal({...modal, show: false})}}>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title>{modal.title}</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>{modal.text}</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"primary\" onClick={()=>{setModal({...modal, show: false})}} >\r\n\t\t\t\t\tOk\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\t\r\n\t\t</>\r\n)});\r\n\r\n\r\nexport default FileUploader;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport UserModal from './UserModal';\r\nimport PdfView from './PdfView';\r\nimport FileUploader from './FileUploader';\r\nimport { signForm, signFB} from '../actions';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n  };\r\n};\r\n\r\n\r\nconst PdfBlock = connect(mapStateToProps)(({ pdfs, active_pdf_index, users, current_user , dispatch}) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\r\n\t\ttitle: \"Login or Register to Upload File\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register to Upload PDF File\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: (fieldsData)=>{\r\n\t\t\t\tdispatch(signForm(fieldsData));\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn(\r\n\t<ListGroup className=\"list-group-flush\">\r\n\t\t<ListGroup.Item className=\"topItem\">{current_user.id == null ? <UserModal {...signModalObj} /> : <FileUploader/>}</ListGroup.Item>\r\n\t\t<div className=\"scrollBlock\">\r\n\t\t{pdfs.sort((a,b)=>{\r\n\t\t\tlet d1 = new Date(a.last_edit_date);\r\n\t\t\tlet d2 = new Date(b.last_edit_date);\r\n\t\t\treturn +d1 > +d2 ? -1 : +d1 < +d2 ? 1 : 0;\r\n\t\t}).map((pdfItem, index) => {\t\r\n\t\t\tlet pdfUsers = users.filter((us)=>{\r\n\t\t\t\treturn us.id == pdfItem.user_id;\r\n\t\t\t});\r\n\t\t\tlet user = pdfUsers.length > 0 ? pdfUsers[0] : null;\r\n\t\t\tlet pdf = {\r\n\t\t\t\t...pdfItem,\r\n\t\t\t\tis_active: index === active_pdf_index,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tuser: user,\r\n\t\t\t\tcurrent_user: current_user\r\n\t\t\t}\r\n\t\t\treturn(\t\t\t\r\n\t\t\t\t<PdfView key={index} {...{pdf: pdf}} />\r\n\t\t\t)}\r\n\t\t)}\r\n\t\t{pdfs.length == 0 ? <ListGroup.Item>Don't have any PDF Files</ListGroup.Item> : <></> }\r\n\t\t</div>\r\n\t</ListGroup>\r\n)});\r\n\r\n\r\nexport default PdfBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route,Link } from 'react-router-dom';\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { removePage, changePdfDate} from '../actions';\r\nimport UserModal from './UserModal';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit, faCalendarAlt, faChevronRight } from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet PageView = ({page, dispatch}) => {\t\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Book\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove Book\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tdispatch(removePage(page.id));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\treturn (\r\n\t\t<ListGroup.Item>\t\t\t\t\r\n\t\t\t<div className=\"itemTitle\"><Link to={\"/pages/\" +page.id}><span>{page.name}</span> <FontAwesomeIcon icon={faChevronRight} /></Link></div>\r\n\t\t\t<div className=\"absBtns\">\t\t\t\r\n\t\t\t{ page.user && page.user.id == page.current_user.id ? <ButtonGroup><UserModal {...signModalRemoveObj} /></ButtonGroup> : <></>}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"calendarBlock\">\r\n\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small>\r\n\t\t\t\t<div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ListGroup.Item>\r\n\t);\r\n}\r\nPageView = connect()(PageView);\r\nexport default PageView;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { addNewPage, signFormAndAddNewPage, changePdfDate, signFB, signForm} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\nimport PageView from './PageView';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n\t\r\n\treturn {\t\r\n\t\t\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\t\t\r\n\t};\r\n};\r\n\r\n\r\nlet PageBlock = connect(mapStateToProps)(({ pages, pdfs, active_pdf_index, users, current_user, dispatch }) => {\r\n\tlet activePdfId = pdfs.length > 0 ? pdfs[active_pdf_index].id : null;\r\n\tlet activePdfPath = pdfs.length > 0 ? pdfs[active_pdf_index].path : null;\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn activePdfId == item.pdf_id;\r\n\t});\t\r\n\tlet handleAddNewPage = ()=>{\r\n\t\t\r\n\t}\r\n\tlet addPageObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\taddPage: true,\r\n\t\ttitle: \"Create New Book\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Create New Book\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Create New Book\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\tdispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(addNewPage({\r\n\t\t\t\t\tname: fieldsValue.name,\r\n\t\t\t\t\tpdf_id: activePdfId,\r\n\t\t\t\t\tuser_id: current_user.id\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}]\t\t\r\n\t}\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: true,\r\n\t\taddPage: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\ttitle: \"Login or Register to Create New Book\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register to Create New Book\" ,\r\n\t\t\ticon: faPlus,\r\n\t\t\tlarge: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\t\t\t\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsValue){\r\n\t\t\t\t//dispatch(changePdfDate(activePdfId));\r\n\t\t\t\tdispatch(signForm({\r\n\t\t\t\t\tlogin: fieldsValue.login,\r\n\t\t\t\t\tpass: fieldsValue.pass\r\n\t\t\t\t}));\t\t\t\t\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\treturn\t(<>\r\n\t\t{pdfs.length > 0 ?\r\n\t\t<ListGroup className=\"list-group-flush\">\r\n\t\t\t\r\n\t\t\t<ListGroup.Item className=\"topItem\">\r\n\t\t\t{current_user.id !== null ? <UserModal {...addPageObj} />\t :\t<UserModal {...signModalObj} />\t}\r\n\t\t\t{activePages.length > 0 && activePdfPath !== null ? <div className=\"topItemText\">Books, created from  {activePdfPath}: </div> : <></>}\r\n\t\t\t</ListGroup.Item>\r\n\t\t\t<div className=\"scrollBlock\">\r\n\t\t\t{activePages.sort((a,b)=>{\r\n\t\t\tlet d1 = new Date(a.last_edit_date);\r\n\t\t\tlet d2 = new Date(b.last_edit_date);\r\n\t\t\treturn +d1 > +d2 ? -1 : +d1 < +d2 ? 1 : 0;\r\n\t\t}).map((page, index) => {\t\r\n\t\t\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\t\t\treturn us.id == page.user_id;\r\n\t\t\t\t});\r\n\t\t\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\t\t\tlet activePage = {\r\n\t\t\t\t\t...page,\r\n\t\t\t\t\tuser: user,\r\n\t\t\t\t\tcurrent_user: current_user\r\n\t\t\t\t}\r\n\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t<PageView key={index} {...{page: activePage}} />\r\n\t\t\t\t)}\r\n\t\t\t)}\r\n\t\t\t{activePages.length == 0 ? <ListGroup.Item>Don't have any Books</ListGroup.Item> : <></> }\r\n\t\t\t</div>\t\t\r\n\t\t</ListGroup>\r\n\t: <></>\r\n\t}\r\n</>)\r\n\r\n\t\r\n});\r\n\r\nexport default PageBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nimport PdfBlock from './PdfBlock';\r\nimport PageBlock from './PageBlock';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\t\t\r\n\t\tpdfs: state.pdfs,\r\n\t\tactive_pdf_index: state.active_pdf_index\r\n  };\r\n};\r\n\r\n\r\nconst Blocks = connect(mapStateToProps)(({ pdfs, active_pdf_index }) => {\r\n\treturn(\r\n\t\t<>\t\t\t\r\n\t\t\t<Col><Row><div className=\"blockBorder\"><PdfBlock /></div></Row></Col>\r\n\t\t\t<Col><Row><div className=\"blockBorder\"><PageBlock /></div></Row></Col>\r\n\t\t</>\t\t\r\n)});\r\n\r\n\r\nexport default Blocks;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronUp, faChevronDown} from '@fortawesome/free-solid-svg-icons'\r\n\r\nlet ImagesPaginator = ({images,activeIndex, items, onPageChange, pageId}) => {\t\r\n\tconst [activePage, setActivePage] = useState(0);\r\n\tconst [activeItem, setActiveItem] = useState(0);\r\n\tconst [activeImages, setActiveImages] = useState(images);\r\n\t\r\n\tlet setPage = (e, type)=>{\r\n\t\te.preventDefault();\r\n\t\tlet pages = parseInt(images.length/items);\r\n\t\tlet aPage = type == \"next\" ? activePage < pages ? activePage+1 : 0 :\r\n\t\tactivePage == 0 ? pages : activePage-1;\r\n\t\tsetActivePage(aPage);\t\r\n\t\t\t\t\r\n\t\tif(!(activeItem >= items*aPage && activeItem < (items * aPage + items))){\t\t\r\n\t\t\tlet activeInd = items*aPage;\r\n\t\t\tsetActiveItem(activeInd);\r\n\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tlet aPage = activePage;\r\n\t\r\n\t\tconsole.log(activeIndex, \"activeIndex\");\r\n\t\tif(activeIndex > 0){\r\n\t\t\tsetActiveItem(activeIndex);\r\n\t\t\t//typeof onPageChange == \"function\" && onPageChange({selected: activeIndex});\r\n\t\t\tif(activeIndex > (items * activePage + items)){\r\n\t\t\t\taPage = parseInt(activeIndex/items);\r\n\t\t\t\tsetActivePage(aPage);\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\tsetActiveImages(images.filter((img, index)=>{\r\n\t\t\treturn index >= items*aPage && index < (items * aPage + items);\r\n\t\t}));\t\t\t\r\n\t\tconsole.log(\"--pag->>>\");\r\n\t},[images]);\t\r\n\t\r\n\treturn (\r\n\t\t<div className=\"imagePreviewsContainer\">\r\n\t\t\t{images.length < items ? <></> : <div className=\"imagePreviewsPrev\" onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"prev\");\r\n\t\t\t\t}}><FontAwesomeIcon icon={faChevronUp} /></div>}\r\n\t\t\t\r\n\t\t\t<div className=\"imagePreviews\">\t\t\t\r\n\t\t\t{activeImages.map((img, index)=>{\t\t\t\t\r\n\t\t\t\tlet src = img.replace(\".png\", \"_preview.png\").replace(\".jpg\", \"_preview.jpg\");\r\n\t\t\t\treturn <div onClick={(e)=>{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlet activeInd = items * activePage + index;\r\n\t\t\t\t\tsetActiveItem(activeInd);\r\n\t\t\t\t\twindow.location.hash = \"#page_\" + activeInd;\r\n\t\t\t\t\ttypeof onPageChange == \"function\" && onPageChange({selected: activeInd});\r\n\t\t\t\t}} className={activeItem == (items * activePage + index) ? \"active imagePreview\" : \"imagePreview\"}>\r\n\t\t\t\t\t<img src={src}/>\r\n\t\t\t\t\t<span className=\"imagePreviewNumber\"><span>{items * activePage + index+1}</span></span></div>\r\n\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t{images.length < items ? <></> : <div onClick={(e)=>{\r\n\t\t\t\tsetPage(e, \"next\");\r\n\t\t\t\t}} className=\"imagePreviewsNext\"><FontAwesomeIcon icon={faChevronDown} /></div>}\t\t\t\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default  ImagesPaginator;","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditableField = connect(mapStateToProps)(({text , saveTextFunction}) => {\r\n\tconst customButtonsVisibility = {\r\n\t\tedit: \"inline-block\",\r\n\t\tsave: \"none\"\r\n\t};\r\n\tconst customFieldSize = {\r\n\t\theight: 0,\r\n\t\twidth: 0\r\n\t}\r\n\tconst [fieldText, setFieldText] = useState(\"\");\r\n\tconst [fieldSize, setFieldSize] = useState({...customFieldSize});\r\n\tconst [wrapperRef, setWrapperRef] = useState(null);\r\n\tconst [textRef, setTextRef] = useState(null);\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility})\r\n\r\n\tlet handleClickOutside = (e)=>{\r\n\t\tif (wrapperRef && !wrapperRef.contains(e.target)) {\r\n\t\t\tsetFieldText(\"\");\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\tedit: \"inline-block\",\r\n\t\t\t\tsave: \"none\"\r\n\t\t\t});\r\n\t\t\tsetFieldSize({...customFieldSize});\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t}\t\t\r\n\t}\r\n\tlet handleEditField = (e)=>{\t\t\r\n\t\te.preventDefault();\r\n\t\tlet rect = textRef.getBoundingClientRect();\r\n\t\tconsole.log(rect, \"rexr\");\r\n\t\tsetFieldText(text);\r\n\t\tsetButtonsVisibility({\r\n\t\t\tedit: \"none\",\r\n\t\t\tsave: \"inline-block\"\r\n\t\t});\r\n\t\tsetFieldSize({\r\n\t\t\twidth: rect.width + 10,\r\n\t\t\theight: rect.height + 10\r\n\t\t});\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t}\r\n\tlet handleChangeField = (e)=>{\r\n\t\tsetFieldText(e.target.value);\r\n\t}\r\n\tlet handleSave = (e)=>{\r\n\t\tif(fieldText.trim().length > 0 && typeof saveTextFunction == \"function\"){\r\n\t\t\tsaveTextFunction(fieldText);\r\n\t\t\tsetFieldText(\"\");\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\tedit: \"inline-block\",\r\n\t\t\t\tsave: \"none\"\r\n\t\t\t});\t\t\t\r\n\t\t}\t\r\n\t\tsetFieldSize({...customFieldSize});\r\n\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t}\r\n\t\t\r\n\t\r\n\treturn(\r\n\t<>\r\n\t\t<div className=\"editableFieldParent\" ref={setWrapperRef}>\r\n\t\t\t<div className=\"editableFieldValue\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.edit\r\n\t\t\t}} ref={setTextRef} onClick={handleEditField}>{text}</div>\r\n\t\t\t<textarea style={{\r\n\t\t\t\t\"display\": buttonsVisibility.save,\r\n\t\t\t\t\"width\": fieldSize.width,\r\n\t\t\t\t\"height\": fieldSize.height\r\n\t\t\t}} className=\"editableFieldField\" value={fieldText} onChange={handleChangeField}></textarea>\r\n\t\t\t<Button size=\"sm\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.edit\r\n\t\t\t}} onClick={handleEditField}><FontAwesomeIcon icon={faEdit} />Edit</Button>\r\n\t\t\t<Button size=\"sm\" style={{\r\n\t\t\t\t\"display\": buttonsVisibility.save\r\n\t\t\t}} onClick={handleSave} >Save</Button>\r\n\t\t</div>\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditableField);","import React , { useState, useEffect,useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport Alert  from 'react-bootstrap/Alert';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport UserModal from './UserModal';\r\nimport ImagesPaginator from './ImagesPaginator';\r\nimport EditableField from './EditableField';\r\n\r\nimport { hasSomeParentTheClass, formatDate } from '../helper';\r\n\r\nimport { changeTextValue, removeTextValue , addNewTextValue, \r\n\t\tremoveMessage, addNewMessage, addFirstMessage, removePage, changePdfDate, changePageDate, changePageName} from '../actions';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faPlus, faArrowsAlt, faExclamation, faCheck, faEnvelope, faCalendarAlt} from '@fortawesome/free-solid-svg-icons';\r\n\r\nlet EditablePageView = ({page, newTextId, dispatch}) => {\r\nconsole.log(page, \"page\");\t\r\n\tlet previewLength = parseInt(window.innerHeight/40) - 3 ;\r\n\tif(previewLength < 5){\r\n\t\tpreviewLength = 5;\r\n\t}\r\n\t\r\n\tconst customFieldState = {\r\n\t\t\"visibility\": \"hidden\",\r\n\t\t\"left\": 0,\r\n\t\t\"top\": 0,\r\n\t\t\"value\": \"\",\r\n\t\t\"width\": 0,\r\n\t\t\"height\": 0,\r\n\t\t\"imageTextId\": null\r\n\t};\r\n\tconst customButtonsVisibility = {\r\n\t\t\"remove\": \"visible\",\r\n\t\t\"move\": \"visible\",\r\n\t\t\"warning\": \"visible\",\r\n\t\t\"ok\": \"visible\",\r\n\t\t\"message\": \"visible\"\r\n\t};\r\n\tconst customButtonsStatus = {\r\n\t\t\"warning\": false,\r\n\t\t\"ok\": false,\r\n\t\t\"message\": true\r\n\t};\r\n\tlet startImageIndex = 0;\r\n\tlet hash = window.location.hash;\r\n\tif(hash.indexOf(\"#page_\") !== -1){\r\n\t\tlet pageNum = parseInt(hash.replace(\"#page_\", \"\"));\t\t\t\r\n\t\tif(!isNaN(pageNum) && pageNum > 0 && pageNum < page.pdf.images.length){\r\n\t\t\tstartImageIndex = pageNum;\t\t\t\t\t\r\n\t\t}\r\n\t}\t\t\r\n\tconsole.log(startImageIndex, \"startImageIndex\");\r\n\tconst canvasRef = useRef(null);\r\n\tconst [imageTexts, setImageTexts] = useState([]);\r\n\tconst [activeMessages, setActiveMessages] = useState([]);\t\r\n\tconst [activeMessageText, setActiveMessageText] = useState(\"\");\t\r\n\tconst [imageIndex, setImageIndex] = useState(startImageIndex);\r\n\tconst [fieldData, setFieldData] = useState({...customFieldState});\r\n\tconst [buttonsVisibility, setButtonsVisibility] = useState({...customButtonsVisibility});\r\n\tconst [buttonsStatus, setButtonsStatus] = useState({...customButtonsStatus});\r\n\tconst [isMove, setMovingMode] = useState(false);\t\r\n\r\n\tlet signModalRemoveObj = {\r\n\t\tsignIn: false,\r\n\t\tsignUp: false,\r\n\t\tsureRemove: true,\r\n\t\ttitle: \"Remove Book\",\t\t\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Remove Book\",\r\n\t\t\ticon: faTrashAlt\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Remove it!\",\r\n\t\t\tfunc: function(){\r\n\t\t\t\tdispatch(removePage(page.id));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\r\n\tlet handlePageChange = (pageData)=>{\t\r\n\t\tsetImageIndex(pageData.selected);\t\t\r\n\t};\r\n\tlet handleFieldTextChange = (e)=>{\t\r\n\t\t\r\n\t\tsetFieldData({\r\n\t\t\t...fieldData,\r\n\t\t\t\"value\": e.target.value\r\n\t\t});\t\t\t\r\n\t\tif(e.target.value.trim().length > 0){\t\t\t\r\n\t\t\tif(fieldData.imageTextId == null){\r\n\t\t\t\tdispatch(addNewTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t\tsetButtonsVisibility({\r\n\t\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\t\tremove: \"visible\"\r\n\t\t\t\t});\t\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId,\r\n\t\t\t\t\t\"value\": e.target.value\r\n\t\t\t\t});\t\r\n\t\t\t\tlet value = e.target.value;\r\n\t\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(changeTextValue({\r\n\t\t\t\t\ttext: e.target.value, \r\n\t\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\t\tmax_width: e.target.offsetWidth,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: fieldData.imageTextId, visibility: \"hidden\"})]);\t\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t}\t\r\n\t};\r\n\tlet handleFieldTextRemove = (e)=>{\t\t\t\t\r\n\t\tdispatch(removeTextValue(fieldData.imageTextId));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetFieldData({...customFieldState});\r\n\t\trenderImage();\r\n\t};\t\t\t\r\n\tlet handleImageTextsClick = (e)=>{\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageText\") && !hasSomeParentTheClass(e.target, \"imageTextFileldParent\")){\r\n\t\t\tsetButtonsVisibility({\r\n\t\t\t\t...customButtonsVisibility,\r\n\t\t\t\tremove: \"hidden\",\r\n\t\t\t\tok: \"hidden\",\r\n\t\t\t\twarning: \"hidden\"\r\n\t\t\t});\r\n\t\t\tsetButtonsStatus({...customButtonsStatus});\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...customFieldState,\r\n\t\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\t\"width\": 120,\r\n\t\t\t\t\"height\": 30,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\r\n\t\t\tsetActiveMessages([]);\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\r\n\t};\r\n\tlet handleFileldMouseDown = (e)=>{\r\n\t\tconsole.log(\"handleFileldMouseDown\");\r\n\t\tsetMovingMode(true);\r\n\t};\r\n\tlet handleFileldMouseUp = (e)=>{\r\n\t\tconsole.log( \"handleFileldMouseUp\");\r\n\t\tsetMovingMode(false);\r\n\t};\r\n\tlet handleFileldMouseMove = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\t\r\n\t\tconsole.log(isMove, \"is move\");\r\n\t\tif(isMove){\t\t\t\r\n\t\t\tlet rect = e.target.getBoundingClientRect();\r\n\t\t\tconsole.log(rect.x, e.clientX, \"-----\");\r\n\t\t\tsetFieldData({\r\n\t\t\t\t...fieldData,\r\n\t\t\t\t\"left\": e.clientX - rect.x,\r\n\t\t\t\t\"top\": e.clientY - rect.y\r\n\t\t\t});\t\r\n\t\t\tdispatch(changeTextValue({\r\n\t\t\t\ttext: fieldData.value, \r\n\t\t\t\tid: fieldData.imageTextId,\r\n\t\t\t\tmax_width: fieldData.max_width,\r\n\t\t\t\tx: fieldData.left,\r\n\t\t\t\ty: fieldData.top\r\n\t\t\t}));\r\n\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\r\n\t\t}\r\n\t};\r\n\tlet handleFieldTextWarning = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.warning ? null : \"warning\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: !buttonsStatus.warning,\r\n\t\t\tok: buttonsStatus.warning ?  buttonsStatus.ok : false\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleFieldTextOk = (e)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\t\r\n\t\tdispatch(changeTextValue({\r\n\t\t\ttext: fieldData.value, \r\n\t\t\tid: fieldData.imageTextId,\r\n\t\t\tmax_width: fieldData.max_width,\r\n\t\t\tx: fieldData.left,\r\n\t\t\ty: fieldData.top,\r\n\t\t\tstatus: buttonsStatus.ok ? null : \"ok\"\r\n\t\t}));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: buttonsStatus.ok ?  buttonsStatus.warning : false,\r\n\t\t\tok: !buttonsStatus.ok\r\n\t\t});\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t});\t\t\r\n\t\t\r\n\t};\r\n\tlet handleFieldTextMessageVisibility = ()=>{\r\n\t\tsetButtonsStatus({\r\n\t\t\t...buttonsStatus,\r\n\t\t\tmessage: !buttonsStatus.message\r\n\t\t});\t\t\r\n\t};\r\n\tlet handleActiveMessagesRemove = (e, msg)=>{\r\n\t\t\r\n\t\tdispatch(removeMessage(msg.id));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t\trenderImage().then((result)=>{\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: fieldData.imageTextId, visibility: \"hidden\"})]);\r\n\t\t\tlet messages = page.texts.filter((txt)=>{\r\n\t\t\t\treturn txt.id == fieldData.imageTextId;\r\n\t\t\t})[0].messages;\r\n\t\t\tsetActiveMessages([\r\n\t\t\t\t...messages\r\n\t\t\t]);\t\t\t\t\t\r\n\t\t});\t\t\t\r\n\t};\r\n\tlet handleAddNewMessage = (e)=>{\t\t\t\r\n\t\tif(/*e.keyCode == 13 && e.shiftKey == false &&*/ activeMessageText.trim().length > 0){\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\tlet text_id = fieldData.imageTextId;\r\n\t\t\tif(fieldData.imageTextId == null){\t\t\t\t\r\n\t\t\t\tdispatch(addFirstMessage({\r\n\t\t\t\t\ttext: \"\", \r\n\t\t\t\t\tmax_width: 0,\r\n\t\t\t\t\tx: fieldData.left,\r\n\t\t\t\t\ty: fieldData.top,\r\n\t\t\t\t\tpage_id: page.id,\r\n\t\t\t\t\timage_index: imageIndex,\r\n\t\t\t\t\tid: newTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id,\r\n\t\t\t\t\tmsgText: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate()\t\t\t\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\r\n\t\t\t\tsetFieldData({\r\n\t\t\t\t\t...fieldData,\r\n\t\t\t\t\t\"imageTextId\": newTextId\r\n\t\t\t\t});\t\r\n\t\t\t\ttext_id = newTextId;\r\n\t\t\t\tconsole.log(newTextId, \"newTextId\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdispatch(addNewMessage({\r\n\t\t\t\t\ttext: activeMessageText,//e.target.value,\r\n\t\t\t\t\tdate: formatDate(),\r\n\t\t\t\t\ttext_id: fieldData.imageTextId,\r\n\t\t\t\t\tuser_id: page.current_user.id\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(changePageDate(page.id));\r\n\t\t\t\tdispatch(changePdfDate(page.pdf_id));\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\trenderImage().then((result)=>{\t\t\t\t\r\n\t\t\t\tsetImageTexts([...setTextsVisibility(getTexts(), {id: text_id, visibility: \"hidden\"})]);\r\n\t\t\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\t\t\treturn txt.id == text_id;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(texts.length > 0){\t\t\t\t\t\r\n\t\t\t\t\tsetActiveMessages([\r\n\t\t\t\t\t\t...texts[0].messages\r\n\t\t\t\t\t]);\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetActiveMessageText(\"\");\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t}\t\t\r\n\t};\r\n\tlet handleActiveMessageText = (e)=>{\r\n\t\tsetActiveMessageText(e.target.value);\t\r\n\t};\r\n\tlet imageTextFieldBlur = (e)=>{\t\t\r\n\t\tif(!hasSomeParentTheClass(e.target, \"imageTexts\")){\r\n\t\t\tsetMovingMode(false);\r\n\t\t\tsetFieldData({...customFieldState});\t\t\t\r\n\t\t\tsetImageTexts([...setTextsVisibility(imageTexts)]);\r\n\t\t}\t\t\t\r\n\t}\r\n\tlet imageTextClick = (e, imageTextId, imageTextStatus, messages, text)=>{\r\n\t\te.preventDefault();\t\t\r\n\t\te.stopPropagation();\t\r\n\t\t\r\n\t\tsetMovingMode(false);\r\n\t\tsetButtonsVisibility({...customButtonsVisibility});\t\t\r\n\t\tsetButtonsStatus({\r\n\t\t\t...customButtonsStatus,\r\n\t\t\twarning: imageTextStatus == \"warning\",\r\n\t\t\tok: imageTextStatus == \"ok\",\r\n\t\t});\r\n\t\tlet rect = e.currentTarget.getBoundingClientRect();\r\n\t\tsetFieldData({\r\n\t\t\t\"visibility\": \"visible\",\r\n\t\t\t\"left\": e.currentTarget.offsetLeft,\r\n\t\t\t\"top\": e.currentTarget.offsetTop,\r\n\t\t\t\"value\": text,\r\n\t\t\t\"width\": rect.width + 30,\r\n\t\t\t\"height\": rect.height > 30 ? rect.height : 30,\r\n\t\t\t\"imageTextId\": imageTextId\r\n\t\t});\r\n\t\tsetActiveMessages([\r\n\t\t\t...messages\r\n\t\t]);\r\n\t\tsetImageTexts([...setTextsVisibility(imageTexts, {id: imageTextId, visibility: \"hidden\"})]);\r\n\t}\r\n\tlet renderImage = ()=>{\r\n\t\tconst canvas = canvasRef.current;\r\n\t\tconst ctx = canvas.getContext('2d');\t\t\t\t\r\n\t\tconst image = new Image();\r\n\t\timage.src = page.pdf.images[imageIndex];\r\n\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tlet w = 1000;\r\n\t\t\t\tlet h = (w * image.height) / image.width;\r\n\t\t\t\tctx.canvas.width  = w;\r\n\t\t\t\tctx.canvas.height = h;\t\t\t\r\n\t\t\t\tctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\t\tctx.drawImage(image, 0, 0, w, h);\t\t\t\r\n\t\t\t\tsetImageTexts(getTexts());\t\t\r\n\t\t\t\tresolve({status: 'ok'});\r\n\t\t\t};\t\t\t\t\r\n\t\t});\t\r\n\t}\r\n\tlet setTextsVisibility = (texts, activeTxt)=>{\r\n\t\treturn texts.map((txt)=>{\t\r\n\t\t\tlet visibility = \"visible\";\r\n\t\t\tif(activeTxt !== undefined && txt.id == activeTxt.id){\r\n\t\t\t\tvisibility  = activeTxt.visibility;\r\n\t\t\t}\r\n\t\t\ttxt.visibility = visibility;\r\n\t\t\treturn txt;\r\n\t\t});\t\t\t\r\n\t}\t\r\n\tlet getTexts = ()=>{\r\n\t\tlet texts = page.texts.filter((txt)=>{\r\n\t\t\treturn txt.image_index == imageIndex;\r\n\t\t});\r\n\t\ttexts.forEach((txt)=>{\r\n\t\t\ttxt.messages = page.messages.filter((msg)=>{\r\n\t\t\t\treturn msg.text_id == txt.id;\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\treturn setTextsVisibility(texts);\t\t\r\n\t}\r\n\tlet handleChangePageName = (name)=>{\r\n\t\tconsole.log(\"new name\", name);\r\n\t\t\r\n\t\tdispatch(changePageName(page.id, name));\r\n\t\tdispatch(changePageDate(page.id));\r\n\t\tdispatch(changePdfDate(page.pdf_id));\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\t\t\r\n\t\trenderImage(imageIndex);\r\n\t\tconsole.log(\"---ed--->>>\");\r\n\t}, [imageIndex]);\r\n\t\r\n\treturn (\r\n\t\t<Container onClick={imageTextFieldBlur}>\r\n\t\t\t<Row>\r\n\t\t\t\t{page.user && page.user.id == page.current_user.id ? <div className=\"removeBookBtnParent\"><ButtonGroup className=\"removeBookBtn\"><UserModal {...signModalRemoveObj} /></ButtonGroup></div> : <></>}\r\n\t\t\t\t<div><h2 className=\"bookPageTitle\">{page.user && page.user.id == page.current_user.id ? <EditableField {...{text: page.name, saveTextFunction: handleChangePageName}}/> : <>{page.name}</>} </h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div style={{width: \"100%\"}}><div className=\"calendarBlock\">\r\n\t\t\t\t\t<div className=\"calendarIcon\"><FontAwesomeIcon icon={faCalendarAlt} /></div>\r\n\t\t\t\t\t<div className=\"calendarValue\">\r\n\t\t\t\t\t{page.user ?  <div><small>Added by {page.user.id == page.current_user.id ? \"you\" : page.user.name} {page.load_date}</small>\r\n\t\t\t\t\t<div><small>Last edit - {page.last_edit_date}</small></div></div> : <></>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div></div>\r\n\t\t\t\t\r\n\t\t\t\t<ImagesPaginator {...{images: page.pdf.images, items: previewLength, onPageChange: handlePageChange, activeIndex: imageIndex, pageId: page.id}}/>\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<div className=\"imageParent\">\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\t  ref={canvasRef}\r\n\t\t\t\t\t/>\t\r\n\t\t\t\t\t<div className=\"imageTexts\" onClick={handleImageTextsClick} /*onMouseMove={handleFileldMouseMove}*/>\r\n\t\t\t\t\t\t{imageTexts.map((txt, index) => {\t\r\n\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t<div key={index}  style={{\r\n\t\t\t\t\t\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\"zIndex\": 3,\r\n\t\t\t\t\t\t\t\t\t\"left\": txt.x,\r\n\t\t\t\t\t\t\t\t\t\"top\": txt.y,\r\n\t\t\t\t\t\t\t\t\t\"maxWidth\": txt.max_width,\r\n\t\t\t\t\t\t\t\t\t\"visibility\": txt.visibility,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": !(page.user && page.user.id == page.current_user.id) && txt.text == \"\" ? 0 : 1\r\n\t\t\t\t\t\t\t\t}}  className={txt.status ? (\"imageText \" + (txt.status + \"Text\")) : \"imageText\"} onClick={(e)=>{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\timageTextClick(e, txt.id, txt.status, txt.messages, txt.text);\r\n\t\t\t\t\t\t\t\t}}><span>{txt.text}</span>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{txt.messages.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"sm\"><FontAwesomeIcon icon={faEnvelope} />{txt.messages.length}</Button>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t: <></>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t)}\t\r\n\t\t\t\t\t\t<div className=\"imageTextFileldParent\" style={{\r\n\t\t\t\t\t\t\t\"left\": fieldData.left,\r\n\t\t\t\t\t\t\t\"top\": fieldData.top,\r\n\t\t\t\t\t\t\t\"visibility\": fieldData.visibility\r\n\t\t\t\t\t\t}}  >\r\n\t\t\t\t\t\t\t<textarea  \r\n\t\t\t\t\t\t\t\tdisabled={!(page.user && page.user.id == page.current_user.id)}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Your text...\"\r\n\t\t\t\t\t\t\t\tonChange={handleFieldTextChange}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\"width\": fieldData.value == \"\" && !(page.user && page.user.id == page.current_user.id) ? 0 : fieldData.width,\r\n\t\t\t\t\t\t\t\t\t\"borderWidth\": page.user && page.user.id == page.current_user.id ? 1 : 0,\r\n\t\t\t\t\t\t\t\t\t\"height\": fieldData.height,\r\n\t\t\t\t\t\t\t\t\t\"resize\": page.user && page.user.id == page.current_user.id ? \"both\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\t\tvalue={fieldData.value} \r\n\t\t\t\t\t\t\t\tclassName={buttonsStatus.warning ? \"form-control form-control-warning imageTextFileld\" : \r\n\t\t\t\t\t\t\t\t\t\t\tbuttonsStatus.ok ? \"form-control form-control-ok imageTextFileld\" : \"form-control imageTextFileld\"}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trows=\"1\"\r\n\t\t\t\t\t\t\t\t/*onMouseDown={handleFileldMouseDown} \r\n\t\t\t\t\t\t\t\tonMouseUp={handleFileldMouseUp} \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonDragStart={()=>{return false;}} */\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldButtons\">\r\n\t\t\t\t\t\t\t\t{page.user && page.user.id == page.current_user.id ? <Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.remove == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextRemove} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button> : <></>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.warning == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextWarning} variant={buttonsStatus.warning ? \"danger\" : \"outline-danger\"} size=\"sm\"><FontAwesomeIcon icon={faExclamation} /></Button>\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.ok == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextOk} variant={buttonsStatus.ok ? \"success\" : \"outline-success\"} size=\"sm\"><FontAwesomeIcon icon={faCheck} /></Button>\t\t\r\n\t\t\t\t\t\t\t\t<Button style={{\r\n\t\t\t\t\t\t\t\t\t\"display\":  buttonsVisibility.message == \"visible\" ? \"inline\" : \"none\"\r\n\t\t\t\t\t\t\t\t}} onClick={handleFieldTextMessageVisibility} variant={buttonsStatus.message ? \"primary\" : \"outline-primary\"} size=\"sm\"><FontAwesomeIcon icon={faEnvelope} /></Button>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t<div className=\"imageTextFileldMessageParent\" style={{\r\n\t\t\t\t\t\t\t\t\"display\": buttonsStatus.message ? \"block\" : \"none\"\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Alert variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t{activeMessages.map((msg, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet mUsers = page.users.filter((us)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn us.id == msg.user_id;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tlet mUser = mUsers.length > 0 ? mUsers[0] : null;\r\n\t\t\t\t\t\t\t\t\t\treturn(\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={index} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{mUser ? <>{mUser.id == page.current_user.id ? \"you\" : mUser.name}, </>  : <>unsigned user, </> } {msg.date}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{msg.text}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{mUser && mUser.id == page.current_user.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleActiveMessagesRemove(e, msg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} variant=\"outline-primary\" size=\"sm\"><FontAwesomeIcon icon={faTrashAlt} /></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<div><textarea\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleActiveMessageText}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your message...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control imageTextFileldMessageField\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={activeMessageText}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup className=\"imageTextFileldMessageBtn\"> <Button className=\"simpBtn\" onClick={(e)=>{\r\n\t\t\t\t\t\t\t\t\t\t\thandleAddNewMessage(e);\r\n\t\t\t\t\t\t\t\t\t\t}} variant=\"primary\" size=\"sm\">Add Message</Button>\t</ButtonGroup>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n}\r\nEditablePageView = connect()(EditablePageView); \r\nexport default EditablePageView;\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {useParams,withRouter,Link} from \"react-router-dom\";\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTrashAlt, faEdit, faChevronLeft } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport EditablePageView from './EditablePageView';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\t\tpages: state.pages,\r\n\t\tpdfs: state.pdfs,\r\n\t\ttexts: state.texts,\r\n\t\tmessages: state.messages,\r\n\t\tusers: state.users,\r\n\t\tcurrent_user: state.current_user\r\n\t};\r\n};\r\n\r\n\r\nconst EditablePage = connect(mapStateToProps)(({ pages , pdfs, texts, messages, users, current_user, history}) => {\r\n\tlet { id } = useParams();\r\n\tlet activePages = pages.filter((item)=>{\r\n\t\treturn item.id == id;\r\n\t});\r\n\tlet activePage = activePages.length > 0 ? activePages[0] : null;\r\n\tlet newTextId = texts && texts.length > 0 ? texts[texts.length-1].id + 1: 0;\r\n\tif(activePage !== null){\r\n\t\tlet activePdfs = pdfs.filter((pdf)=>{\r\n\t\t\treturn pdf.id == activePage.pdf_id;\r\n\t\t});\r\n\t\tlet activePdf = activePdfs.length > 0 ? activePdfs[0] : null;\r\n\t\tactivePage.pdf = activePdf;\r\n\t\tlet activeTexts = texts && texts.filter((txt)=>{\r\n\t\t\treturn txt.page_id == id;\r\n\t\t});\r\n\t\tactivePage.texts = activeTexts;\r\n\t\tif(activePage.texts){\r\n\t\t\tactivePage.messages = messages;\r\n\t\t}\t\r\n\t\tactivePage.users = users;\r\n\t\tactivePage.current_user = current_user;\r\n\t\tlet pageUsers = users.filter((us)=>{\r\n\t\t\treturn us.id == activePage.user_id;\r\n\t\t});\r\n\t\tlet user = pageUsers.length > 0 ? pageUsers[0] : null;\t\t\r\n\t\tactivePage.user = user;\r\n\t}\r\n\treturn(\r\n\t<>\r\n\t\t<Helmet>                \r\n            <title>Edit Homework {activePage !== null && activePage.pdf !== null ? (\" - \" + activePage.pdf.path + \" - \" + activePage.name) :\"\"}</title>                \r\n        </Helmet>\t\r\n\t\t<Link to=\"/\" className=\"backLink\"> <FontAwesomeIcon icon={faChevronLeft} /> Back To Home Page</Link>\t\r\n\t  {activePage === null || activePage.pdf == null ? <></> : <EditablePageView  {...{page: activePage, newTextId: newTextId}}/>}\r\n\t\t\r\n\t</>\r\n)});\r\n\r\n\r\nexport default withRouter(EditablePage);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport { signForm, signOutForm, signFB} from '../actions';\r\n\r\nimport UserModal from './UserModal';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcurrent_user: state.current_user,\r\n\t\tusers: state.users\r\n\t};\r\n};\r\n\r\n\r\nlet UserBlock = connect(mapStateToProps)(({ current_user, users, dispatch }) => {\r\n\tlet signModalObj = {\r\n\t\tsignIn: true,\r\n\t\tsignUp: false,\r\n\t\tfb: (response)=>{\r\n\t\t\tconsole.log(\"response\", response.id);\r\n\t\t\tresponse.id && dispatch(signFB({\r\n\t\t\t\tid: response.id,\r\n\t\t\t\tname: response.name,\r\n\t\t\t\tpass: response.accessToken,\r\n\t\t\t\tphoto: response.picture.data.url\r\n\t\t\t}));\t\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\ttitle: \"Login or Register\",\r\n\t\t\"button\": {\r\n\t\t\ttitle: \"Login or Register\"\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: \"Cancel\"\r\n\t\t},{\r\n\t\t\ttitle: \"Ok\",\r\n\t\t\tfunc: function(fieldsData){\r\n\t\t\t\tdispatch(signForm(fieldsData));\r\n\t\t\t}\r\n\t\t}]\r\n\t};\r\n\t\r\n\tlet userData = null;\r\n\tif(current_user.id !== null){\r\n\t\tlet usersData = users.filter((us)=>{\r\n\t\t\treturn us.id == current_user.id;\r\n\t\t});\r\n\t\tuserData = usersData.length > 0 ? usersData[0] : null;\r\n\t}\r\n\treturn(\r\n\t<ListGroup className=\"topUserBlock\">\r\n\t{current_user.id == null ?\r\n\t\t<ListGroup.Item><UserModal {...signModalObj} /></ListGroup.Item>\r\n\t:\r\n\t\t<ListGroup.Item>Hello, <strong>{userData ? userData.name : \"\"}</strong> <div><Button onClick={()=>{\r\n\t\t\tdispatch(signOutForm());\r\n\t\t}} variant=\"primary\" size=\"sm\">SignOut</Button></div></ListGroup.Item>\r\n\t}\r\n\t\r\n\t</ListGroup>\r\n)});\r\n\r\nUserBlock = connect()(UserBlock);\r\nexport default UserBlock;","import React, { useState, useEffect, Component } from \"react\";\nimport { connect } from 'react-redux';\nimport axios, { post } from 'axios';\nimport {Helmet} from \"react-helmet\";\nimport { Route,Link,withRouter } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\nimport Blocks from './components/Blocks';\nimport EditablePage from './components/EditablePage';\nimport UserBlock from './components/UserBlock';\n\n\nimport './styles/main.scss';\n\nimport { loadPdfs, loadPages, loadMessages, loadUsers, loadTexts, loadCurrentUser} from './actions';\n\nfunction App({location, dispatch}) {\t\n\tlet getStartData = ()=>{\n\t\tconst url = '/db.php';\n\t\tlet dataItems = [[\"users\", loadUsers], [\"pages\", loadPages], [\"texts\", loadTexts], [\"pdfs\", loadPdfs], [\"messages\", loadMessages]];\n\t\tlet loadingArr = [];\n\n\t\tdataItems.forEach((item)=>{\n\t\t\tconst formData = new FormData();\t\t\n\t\t\tformData.append(\"action\", \"get\");\n\t\t\tformData.append(\"data\", \"\");\t\t\t\t\n\t\t\tformData.append(\"name\", item[0]);\n\t\t\tloadingArr.push(post(url, formData));\n\t\t});\n\t\taxios.all(loadingArr).then(axios.spread((...responses) => {\t\t\t\n\t\t\tdataItems.forEach((item, index)=>{\n\t\t\t\tlet res = responses[index];\n\t\t\t\tif(res.data.error == false){\n\t\t\t\t\tdispatch(item[1](JSON.parse(res.data.data)));\t\n\t\t\t\t}\n\t\t\t});\t\n\t\t\tlet cUserId = localStorage.getItem(\"current_user_edithomework\");\n\t\t\t\n\t\t\tif(cUserId !== null){\n\t\t\t\tdispatch(loadCurrentUser(cUserId));\n\t\t\t}\n\t\t})).catch(errors => {\n\t\t\tconsole.log(\"loading error\");\n\t\t});\t\t\t\t\n\t}\n\tuseEffect(() => {\n\t\tgetStartData();\t\t\n\t}, []);\t\t\n    return (\n\t\t<Container>\n\t\t     <Helmet>                \n                <title>Edit Homework</title>                \n            </Helmet>\n\t\t\t<Row className=\"headerBlock\">\t\n\t\t\t\t<Link className=\"mainLogoLink\" to=\"/\"><h1 className=\"mainLogo\"><span>Edit</span>Homework</h1></Link>\t\n\t\t\t\t<UserBlock />\n\t\t\t</Row>\t\n\t\t\t<Row className=\"contentBlock\">\t\t\t\n\t\t\t\t<Route exact path=\"/\" component={Blocks} />\n\t\t\t\t<Route exact path=\"/pages/:id\" component={EditablePage} />\t\t\t\t\t\t\n\t\t\t</Row>\t\n\t\t\t<Row className=\"bottomBlock\">\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t</Row>\t \t\t\t\n\t\t</Container>\n    );\n}\n\nexport default connect()(withRouter(App));\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport toDoApp from './reducers';\nimport App from './App';\n\nconst store = createStore(toDoApp);\nrender(\n  <Provider store={store}>\n\t<BrowserRouter>\n    <App />\n\t</BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}